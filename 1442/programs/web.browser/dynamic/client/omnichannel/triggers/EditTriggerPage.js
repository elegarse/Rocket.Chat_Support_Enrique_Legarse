function module(e,n,t){let a,l,s,r,o,i,u,c,m,d,g,p,k,h,E,v,x;t.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),t.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){l=e}},1),t.link("react",{default(e){s=e}},0),t.link("@rocket.chat/fuselage",{Button(e){r=e},Callout(e){o=e},FieldGroup(e){i=e},ButtonGroup(e){u=e}},1),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){c=e}},2),t.link("./TriggersForm",{default(e){m=e}},3),t.link("../../components/PageSkeleton",{default(e){d=e}},4),t.link("../../contexts/TranslationContext",{useTranslation(e){g=e}},5),t.link("../../contexts/ServerContext",{useMethod(e){p=e}},6),t.link("../../hooks/useForm",{useForm(e){k=e}},7),t.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){h=e},ENDPOINT_STATES(e){E=e}},8),t.link("../../contexts/RouterContext",{useRoute(e){v=e}},9),t.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){x=e}},10);const b=e=>{let{id:n,onSave:t}=e;const a=g(),{data:l,state:r}=h("livechat/triggers/".concat(n));return r===E.LOADING?s.createElement(d,null):r!==E.ERROR&&(null==l?void 0:l.trigger)?s.createElement(f,{data:l.trigger,onSave:t}):s.createElement(o,null,a("Error"),": error")},S=e=>{let{name:n,description:t,enabled:a,runOnce:l,conditions:[{name:s,value:r}],actions:[{action:o,params:{sender:i,msg:u,name:c}}]}=e;return{name:null!=n?n:"",description:null!=t?t:"",enabled:!!a,runOnce:!!l,conditions:{name:null!=s?s:"page-url",value:null!=r?r:""},actions:{name:null!=o?o:"",params:{sender:null!=i?i:"queue",msg:null!=u?u:"",name:null!=c?c:""}}}},f=e=>{let{data:n,onSave:t}=e;const o=x(),d=g(),h=v("omnichannel-triggers"),E=p("livechat:saveTrigger"),{values:b,handlers:f}=k(S(n)),T=c(async()=>{try{const{actions:{params:{sender:e,msg:s,name:r}}}=b,i=l(b,["actions"]);await E(a({_id:n._id},i,{conditions:[b.conditions],actions:[{name:"send-message",params:a({sender:e,msg:s},"custom"===e&&{name:r})}]})),o({type:"success",message:d("Saved")}),t(),h.push({})}catch(e){o({type:"error",message:e})}});return s.createElement(s.Fragment,null,s.createElement(i,null,s.createElement(m,{values:b,handlers:f})),s.createElement(u,{align:"end"},s.createElement(r,{primary:!0,onClick:T},d("Save"))))};t.exportDefault(b)}

