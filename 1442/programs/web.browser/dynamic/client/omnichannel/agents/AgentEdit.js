function module(e,t,a){let n,l,s,r,o,i,c,u,m,d,p,E,h,b,v,x,f,g,k,w,C,S,D,A,R,U,I,_;function G(e){let{uid:t,reload:a}=e;const n=k(),{data:l,state:r,error:o}=S("livechat/users/agent/".concat(t)),{data:i,state:c,error:u}=S("livechat/agents/".concat(t,"/departments")),{data:m,state:d,error:E}=S("livechat/department");return[r,d,c].includes(D.LOADING)?s.createElement(A,null):o||u||E||!l||!l.user?s.createElement(p,{mbs:"x16"},n("User_not_found")):s.createElement(L,{uid:t,data:l,userDepartments:i,availableDepartments:m,reset:a})}function L(e){let{data:t,userDepartments:a,availableDepartments:S,uid:D,reset:A}=e,G=l(e,["data","userDepartments","availableDepartments","uid","reset"]);const L=k(),M=I("omnichannel-agents"),[T,y]=i(),{user:F}=t||{user:{}},{name:N,username:z,statusLivechat:B}=F,P=U(F),j=r(()=>S&&S.departments?S.departments.map(e=>{let{_id:t,name:a}=e;return[t,a||t]}):[],[S]),O=r(()=>a&&a.departments?a.departments.map(e=>{let{departmentId:t}=e;return t}):[],[a]),V=x(_),W=o({values:{},hasUnsavedChanges:!1}),q=v(e=>{let{hasUnsavedChanges:t}=e,a=l(e,["hasUnsavedChanges"]);W.current=a,t!==T&&y(t)}),{useMaxChatsPerAgent:H=(()=>{})}=V;console.log(V,H());const{values:J,handlers:K,hasUnsavedChanges:Q,commit:X}=R({departments:O,status:B,maxChats:0}),{reset:Y,commit:Z}=W.current,{handleDepartments:$,handleStatus:ee}=K,{departments:te,status:ae}=J,ne=H(),le=f("livechat:saveAgentInfo"),se=f("livechat:changeLivechatStatus"),re=g(),oe=v(()=>{A(),Y()}),ie=v(async()=>{try{await le(D,W.current.values,te),await se({status:ae,agentId:D}),re({type:"success",message:L("saved")}),M.push({})}catch(e){re({type:"error",message:e}),console.log(e)}X(),Z()});return s.createElement(w.ScrollableContent,n({is:"form"},G),s.createElement(C.Avatar,{margin:"auto",size:"x332",title:z,username:z}),s.createElement(c,null,s.createElement(c.Label,null,L("Name")),s.createElement(c.Row,null,s.createElement(u,{flexGrow:1,value:N,disabled:!0}))),s.createElement(c,null,s.createElement(c.Label,null,L("Username")),s.createElement(c.Row,null,s.createElement(u,{flexGrow:1,value:z,disabled:!0,addon:s.createElement(h,{name:"at",size:"x20"})}))),s.createElement(c,null,s.createElement(c.Label,null,L("Email")),s.createElement(c.Row,null,s.createElement(u,{flexGrow:1,value:P,disabled:!0,addon:s.createElement(h,{name:"mail",size:"x20"})}))),s.createElement(c,null,s.createElement(c.Label,null,L("Departments")),s.createElement(c.Row,null,s.createElement(E,{options:j,value:te,placeholder:L("Select_an_option"),onChange:$,flexGrow:1}))),s.createElement(c,null,s.createElement(c.Label,null,L("Status")),s.createElement(c.Row,null,s.createElement(b,{options:[["available",L("Available")],["not-available",L("Not_Available")]],value:ae,placeholder:L("Select_an_option"),onChange:ee,flexGrow:1}))),ne&&s.createElement(ne,{data:F,onChange:q}),s.createElement(c.Row,null,s.createElement(p,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},s.createElement(d,{inlineEnd:"x4"},s.createElement(m,{flexGrow:1,type:"reset",disabled:!Q&&!T,onClick:oe},L("Reset")),s.createElement(m,{mie:"none",flexGrow:1,disabled:!Q&&!T,onClick:ie},L("Save"))))))}a.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),a.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){l=e}},1),a.export({default:()=>G,AgentEdit:()=>L}),a.link("react",{default(e){s=e},useMemo(e){r=e},useRef(e){o=e},useState(e){i=e}},0),a.link("@rocket.chat/fuselage",{Field(e){c=e},TextInput(e){u=e},Button(e){m=e},Margins(e){d=e},Box(e){p=e},MultiSelect(e){E=e},Icon(e){h=e},Select(e){b=e}},1),a.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){v=e}},2),a.link("use-subscription",{useSubscription(e){x=e}},3),a.link("../../contexts/ServerContext",{useMethod(e){f=e}},4),a.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){g=e}},5),a.link("../../contexts/TranslationContext",{useTranslation(e){k=e}},6),a.link("../../components/basic/VerticalBar",{default(e){w=e}},7),a.link("../../components/basic/UserInfo",{UserInfo(e){C=e}},8),a.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){S=e},ENDPOINT_STATES(e){D=e}},9),a.link("./Skeleton",{FormSkeleton(e){A=e}},10),a.link("../../hooks/useForm",{useForm(e){R=e}},11),a.link("../../helpers/getUserEmailAddress",{getUserEmailAddress(e){U=e}},12),a.link("../../contexts/RouterContext",{useRoute(e){I=e}},13),a.link("../additionalForms",{formsSubscription(e){_=e}},14)}

