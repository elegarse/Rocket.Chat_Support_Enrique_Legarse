function module(e,t,l){let a,n,r,o,s,i,c,m,u,d,x,f,p,E,h,g,C,b,k,D,v,y,S,w,M,F,G,T,A;l.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},1),l.link("@babel/runtime/helpers/extends",{default(e){r=e}},2),l.link("react",{default(e){o=e},useEffect(e){s=e},useMemo(e){i=e}},0),l.link("@rocket.chat/fuselage",{TextInput(e){c=e},Box(e){m=e},Icon(e){u=e},MultiSelect(e){d=e},Select(e){x=e},InputBox(e){f=e},Menu(e){p=e}},1),l.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){E=e},useLocalStorage(e){h=e}},2),l.link("moment",{default(e){g=e}},3),l.link("use-subscription",{useSubscription(e){C=e}},4),l.link("../additionalForms",{formsSubscription(e){b=e}},5),l.link("../../components/basic/Page",{default(e){k=e}},6),l.link("../../contexts/TranslationContext",{useTranslation(e){D=e}},7),l.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){v=e}},8),l.link("../../contexts/AuthorizationContext",{usePermission(e){y=e}},9),l.link("../../components/GenericTable",{GenericTable(e){S=e}},10),l.link("../../contexts/ServerContext",{useMethod(e){w=e}},11),l.link("../DeleteWarningModal",{default(e){M=e}},12),l.link("../../contexts/ModalContext",{useSetModal(e){F=e}},13),l.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){G=e}},14),l.link("../../components/basic/AutoCompleteDepartment",{AutoCompleteDepartment(e){T=e}},15),l.link("../../components/basic/AutoCompleteAgent",{AutoCompleteAgent(e){A=e}},16);const Y=e=>o.createElement(m,r({fontScale:"p2",color:"default"},e)),_=e=>{let{handleClearFilters:t,handleRemoveClosed:l}=e,s=n(e,["handleClearFilters","handleRemoveClosed"]);const i=D(),c=y("remove-closed-livechat-rooms"),d=a({clearFilters:{label:o.createElement(m,null,o.createElement(u,{name:"refresh",size:"x16",marginInlineEnd:"x4"}),i("Clear_filters")),action:t}},c&&{removeClosed:{label:o.createElement(m,{color:"danger"},o.createElement(u,{name:"trash",size:"x16",marginInlineEnd:"x4"}),i("Delete_all_closed_chats")),action:l}});return o.createElement(p,r({alignSelf:"flex-end",small:!1,square:!0,options:d,placement:"bottom-start"},s))},B=e=>{let{setFilter:t,reload:l}=e,a=n(e,["setFilter","reload"]);const u=F(),p=G(),k=D(),{data:y}=v("livechat/custom-fields"),S=[["all",k("All")],["closed",k("Closed")],["opened",k("Open")]],B=i(()=>y&&y.customFields?y.customFields.map(e=>{let{_id:t,label:l}=e;return[t,l]}):[],[y]),[R,H]=h("guest",""),[I,P]=h("servedBy","all"),[z,W]=h("status","all"),[j,q]=h("department","all"),[L,O]=h("from",""),[J,K]=h("to",""),[N,Q]=h("tags",[]),[U,V]=h("tags",[]),X=E(e=>H(e.target.value)),Z=E(e=>P(e)),$=E(e=>W(e)),ee=E(e=>q(e)),te=E(e=>O(e.target.value)),le=E(e=>K(e.target.value)),ae=E(e=>Q(e)),ne=E(e=>V(e)),re=E(()=>{H(""),P("all"),W("all"),q("all"),O(""),K(""),Q([]),V([])}),oe=C(b),{useCurrentChatTags:se=(()=>{})}=oe,ie=se(),ce=E(e=>e.preventDefault()),me=function(e,t){return e[t]="",e};s(()=>{t({guest:R,servedBy:I,status:z,department:j,from:L&&g(new Date(L)).utc().format("YYYY-MM-DDTHH:mm:ss"),to:J&&g(new Date(J)).utc().format("YYYY-MM-DDTHH:mm:ss"),tags:N,customFields:U.reduce(me,{})})},[t,R,I,z,j,L,J,N,U]);const ue=E(()=>{re()}),de=w("livechat:removeAllClosedRooms"),xe=E(async()=>{const e=async()=>{try{await de(),l(),p({type:"success",message:k("Chat_removed")})}catch(e){p({type:"error",message:e})}u()};u(o.createElement(M,{onDelete:e,onCancel:()=>u()}))});return o.createElement(m,r({mb:"x16",is:"form",onSubmit:ce,display:"flex",flexDirection:"column"},a),o.createElement(m,r({display:"flex",flexDirection:"row",flexWrap:"wrap"},a),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},k("Guest"),":"),o.createElement(c,{flexShrink:0,placeholder:k("Guest"),onChange:X,value:R})),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},k("Served_By"),":"),o.createElement(A,{value:I,onChange:Z})),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},k("Department"),":"),o.createElement(T,{value:j,onChange:ee})),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},k("Status"),":"),o.createElement(x,{flexShrink:0,options:S,value:z,onChange:$,placeholder:k("Status")})),o.createElement(m,{display:"flex",mie:"x8",flexGrow:0,flexDirection:"column"},o.createElement(Y,{mb:"x4"},k("From"),":"),o.createElement(f,{type:"date",flexShrink:0,placeholder:k("From"),onChange:te,value:L})),o.createElement(m,{display:"flex",mie:"x8",flexGrow:0,flexDirection:"column"},o.createElement(Y,{mb:"x4"},k("To"),":"),o.createElement(f,{type:"date",flexShrink:0,placeholder:k("To"),onChange:le,value:J})),o.createElement(_,{handleClearFilters:ue,handleRemoveClosed:xe})),ie&&o.createElement(m,r({display:"flex",flexDirection:"row",marginBlockStart:"x8"},a),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},k("Tags"),":"),o.createElement(ie,{value:N,handler:ae}))),y&&o.createElement(m,r({display:"flex",flexDirection:"row",marginBlockStart:"x8"},a),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},k("Custom_fields"),":"),o.createElement(d,r({options:B,value:U,onChange:ne,flexGrow:1},a)))))};function R(e){let{data:t,header:l,setParams:a,params:n,title:r,renderRow:s,reload:i,children:c}=e;return(o.createElement(k,{flexDirection:"row"},o.createElement(k,null,o.createElement(k.Header,{title:r}),o.createElement(k.Content,null,o.createElement(S,{FilterComponent:B,header:l,renderRow:s,results:t&&t.rooms,total:t&&t.total,setParams:a,params:n,reload:i}))),c))}l.exportDefault(R)}

