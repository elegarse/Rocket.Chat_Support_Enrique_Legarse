function module(e,t,l){let a,n,s,i,o,r,c,u,d,m,h,k,E,p,b,C,x,g,v,f,F,S,y,T;l.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),l.link("react",{default(e){n=e},useCallback(e){s=e},useState(e){i=e}},0),l.link("@rocket.chat/fuselage",{Box(e){o=e},Button(e){r=e},Icon(e){c=e},ButtonGroup(e){u=e},Callout(e){d=e},FieldGroup(e){m=e}},1),l.link("use-subscription",{useSubscription(e){h=e}},2),l.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){k=e}},3),l.link("./CustomFieldsForm",{default(e){E=e}},4),l.link("../../components/basic/Page",{default(e){p=e}},5),l.link("../../components/PageSkeleton",{default(e){b=e}},6),l.link("../../contexts/TranslationContext",{useTranslation(e){C=e}},7),l.link("../../contexts/RouterContext",{useRouteParameter(e){x=e},useRoute(e){g=e}},8),l.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){v=e}},9),l.link("../../contexts/ServerContext",{useMethod(e){f=e}},10),l.link("../additionalForms",{formsSubscription(e){F=e}},11),l.link("../../hooks/useForm",{useForm(e){S=e}},12),l.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){y=e},ENDPOINT_STATES(e){T=e}},13);const D=e=>({field:e._id,label:e.label,scope:e.scope,visibility:"visible"===e.visibility,regexp:e.regexp}),_=()=>{const e=C(),t=x("id"),{data:l,state:a,error:s}=y("livechat/custom-fields/".concat(t));return a===T.LOADING?n.createElement(b,null):l&&l.success&&l.customField&&!s?n.createElement(w,{customField:l.customField,id:t}):n.createElement(p,null,n.createElement(p.Header,{title:e("Edit_Custom_Field")}),n.createElement(p.ScrollableContentWithShadow,null,n.createElement(d,{type:"danger"},e("Error"))))},w=e=>{let{customField:t,id:l}=e;const d=C(),b=v(),[x,y]=i({}),{useCustomFieldsAdditionalForm:T=(()=>{})}=h(F),_=T(),w=g("omnichannel-customfields"),B=s(()=>{w.push({})},[w]),{values:M,handlers:P,hasUnsavedChanges:A}=S(D(t)),G=f("livechat:saveCustomField"),{hasError:I,data:N,hasUnsavedChanges:R}=x,W=!I&&(R||A),H=k(async()=>{try{await G(l,a({},N,{},M,{visibility:M.visibility?"visible":"hidden"})),b({type:"success",message:d("Saved")}),w.push({})}catch(e){b({type:"error",message:e})}}),O=k(e=>{y(a({},x,{},e))});return n.createElement(p,null,n.createElement(p.Header,{title:d("Edit_Custom_Field")},n.createElement(u,{align:"end"},n.createElement(r,{onClick:B},n.createElement(c,{size:"x16",name:"back"}),d("Back")),n.createElement(r,{primary:!0,onClick:H,disabled:!W},d("Save")))),n.createElement(p.ScrollableContentWithShadow,null,n.createElement(o,{maxWidth:"x600",w:"full",alignSelf:"center"},n.createElement(m,null,n.createElement(E,{values:M,handlers:P}),_&&n.createElement(_,{onChange:O,state:M,data:t})))))};l.exportDefault(_)}

