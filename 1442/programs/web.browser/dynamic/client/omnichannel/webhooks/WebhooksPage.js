function module(e,t,o){let n,a,l,s,c,r,_,i,h,u,k,m,d,v,b,w,g,E,L,p,f,C,S;o.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),o.link("react",{default(e){a=e},useMemo(e){l=e}},0),o.link("@rocket.chat/fuselage",{Box(e){s=e},Callout(e){c=e},FieldGroup(e){r=e},Field(e){_=e},TextInput(e){i=e},MultiSelect(e){h=e},Button(e){u=e},ButtonGroup(e){k=e}},1),o.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){m=e}},2),o.link("../../contexts/AuthorizationContext",{usePermission(e){d=e}},3),o.link("../../contexts/ServerContext",{useMethod(e){v=e}},4),o.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){b=e}},5),o.link("../../contexts/TranslationContext",{useTranslation(e){w=e}},6),o.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){g=e},ENDPOINT_STATES(e){E=e}},7),o.link("../../hooks/useForm",{useForm(e){L=e}},8),o.link("../../components/basic/Page",{default(e){p=e}},9),o.link("../../components/basic/ExternalLink",{default(e){f=e}},10),o.link("../../components/PageSkeleton",{default(e){C=e}},11),o.link("../../components/NotAuthorizedPage",{default(e){S=e}},12);const x=e=>e.reduce((e,t)=>{let{_id:o,value:a}=t;return e=n({},e,{[o]:a})},{}),y=e=>Object.entries(e).reduce((e,t)=>{let[o,n]=t;return n&&(e=[...e,o]),e},[]),T="https://rocket.chat/docs/administrator-guides/livechat/#integrations",M=()=>{const e=w(),{data:t,state:o,error:n}=g("livechat/integrations.settings"),l=d("view-livechat-webhooks");return l?o===E.LOADING?a.createElement(C,null):t&&t.success&&t.settings&&!n?a.createElement(U,{settings:x(t.settings)}):a.createElement(p,null,a.createElement(p.Header,{title:e("Webhooks")}),a.createElement(p.ScrollableContentWithShadow,null,a.createElement(c,{type:"danger"},e("Error")))):a.createElement(S,null)},O=e=>{let{Livechat_webhookUrl:t,Livechat_secret_token:o,Livechat_webhook_on_start:n,Livechat_webhook_on_close:a,Livechat_webhook_on_chat_taken:l,Livechat_webhook_on_chat_queued:s,Livechat_webhook_on_forward:c,Livechat_webhook_on_offline_msg:r,Livechat_webhook_on_visitor_message:_,Livechat_webhook_on_agent_message:i}=e;const h={Livechat_webhook_on_start:n,Livechat_webhook_on_close:a,Livechat_webhook_on_chat_taken:l,Livechat_webhook_on_chat_queued:s,Livechat_webhook_on_forward:c,Livechat_webhook_on_offline_msg:r,Livechat_webhook_on_visitor_message:_,Livechat_webhook_on_agent_message:i},u=y(h);return{Livechat_webhookUrl:t,Livechat_secret_token:o,sendOn:u}},U=e=>{let{settings:t}=e;const o=w(),c=b(),{values:d,handlers:g,hasUnsavedChanges:E,reset:C,commit:S}=L(O(t)),x=v("livechat:saveIntegration"),y=v("livechat:webhookTest"),{Livechat_webhookUrl:M,Livechat_secret_token:U,sendOn:D}=d,{handleLivechat_webhookUrl:I,handleLivechat_secret_token:R,handleSendOn:W}=g,q=l(()=>[["Livechat_webhook_on_start",o("Chat_start")],["Livechat_webhook_on_close",o("Chat_close")],["Livechat_webhook_on_chat_taken",o("Chat_taken")],["Livechat_webhook_on_chat_queued",o("Chat_queued")],["Livechat_webhook_on_forward",o("Forwarding")],["Livechat_webhook_on_offline_msg",o("Offline_messages")],["Livechat_webhook_on_visitor_message",o("Visitor_message")],["Livechat_webhook_on_agent_message",o("Agent_messages")]],[o]),A=m(async()=>{const e=q.reduce((e,t)=>{let[o]=t;return e=n({},e,{[o]:D.includes(o)?1:0})},{});try{await x(n({Livechat_webhookUrl:M,Livechat_secret_token:U},e)),c({type:"success",message:o("Saved")}),S()}catch(t){c({type:"error",message:t})}}),F=m(async()=>{try{await y(),c({type:"success",message:o("It_works")}),S()}catch(e){c({type:"error",message:e})}});return a.createElement(p,null,a.createElement(p.Header,{title:o("Webhooks")},a.createElement(k,null,a.createElement(u,{onClick:()=>C()},o("Reset")),a.createElement(u,{onClick:F,disabled:!M||E},o("Send_Test")),a.createElement(u,{primary:!0,onClick:A,disabled:!E},o("Save")))),a.createElement(p.ScrollableContentWithShadow,null,a.createElement(s,{maxWidth:"x600",w:"full",alignSelf:"center"},a.createElement("p",null,o("You_can_use_webhooks_to_easily_integrate_livechat_with_your_CRM")),a.createElement("p",null,a.createElement(f,{to:T},o("Click_here"))," ",o("to_see_more_details_on_how_to_integrate")),a.createElement(r,null,a.createElement(_,null,a.createElement(_.Label,null,o("Webhook_URL")),a.createElement(_.Row,null,a.createElement(i,{value:M,onChange:I,placeholder:"https://yourdomain.com/webhook/entrypoint"}))),a.createElement(_,null,a.createElement(_.Label,null,o("Secret_token")),a.createElement(_.Row,null,a.createElement(i,{value:U,onChange:R,placeholder:o("Secret_token")}))),a.createElement(_,null,a.createElement(_.Label,null,o("Send_request_on")),a.createElement(_.Row,null,a.createElement(s,{w:"full",display:"flex",alignItems:"stretch",justifyContent:"stretch"},a.createElement(h,{w:"full",value:D,onChange:W,options:q,placeholder:o("Select_an_option")}))))))))};o.exportDefault(M)}

