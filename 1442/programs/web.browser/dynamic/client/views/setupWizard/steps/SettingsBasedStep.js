function module(e,t,a){let l,n,r,u,i,o,s,c,d,p,m,g,k,E,f,S,v,b,h,y,x,C,T,F;a.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){l=e}},0),a.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},1),a.link("@rocket.chat/fuselage",{Field(e){r=e},FieldGroup(e){u=e},Flex(e){i=e},InputBox(e){o=e},Margins(e){s=e},Select(e){c=e},Skeleton(e){d=e},TextInput(e){p=e}},0),a.link("@rocket.chat/fuselage-hooks",{useAutoFocus(e){m=e}},1),a.link("react",{default(e){g=e},useEffect(e){k=e},useReducer(e){E=e},useState(e){f=e},useCallback(e){S=e}},2),a.link("../../../contexts/SettingsContext",{useSettingsDispatch(e){v=e}},3),a.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){b=e}},4),a.link("../../../contexts/TranslationContext",{useTranslation(e){h=e},useLanguages(e){y=e}},5),a.link("../Pager",{Pager(e){x=e}},6),a.link("../SetupWizardState",{useSetupWizardContext(e){C=e}},7),a.link("../Step",{Step(e){T=e}},8),a.link("../StepHeader",{StepHeader(e){F=e}},9);const _=()=>{const e="RESET",t="SET_VALUE",[a,l]=E((a,l)=>{let{type:r,payload:u}=l;if(r===e)return u;if(r===t){const{_id:e,value:t}=u;return a.map(a=>a._id===e?n({},a,{value:t}):a)}return a},[]),r=S(t=>l({type:e,payload:t}),[]),u=S((e,a)=>l({type:t,payload:{_id:e,value:a}}),[]);return{fields:a,resetFields:r,setFieldValue:u}};function w(e){let{step:t,title:a,active:E}=e;const{settings:S,currentStep:w,goToPreviousStep:L,goToNextStep:z}=C(),{fields:D,resetFields:q,setFieldValue:P}=_(),[A,I]=f(!1),M=y();k(()=>{q(S.filter(e=>{let{wizard:a}=e;return a.step===t}).filter(e=>{let{type:t}=e;return["string","select","language","boolean"].includes(t)}).sort((e,t)=>{let{wizard:{order:a}}=e,{wizard:{order:l}}=t;return a-l}).map(e=>{let{value:t}=e,a=l(e,["value"]);return n({},a,{value:null!=t?t:""})}))},[S,w,t,q]);const R=h(),V=v(),W=m(E),j=b(),B=()=>{L()},H=async e=>{e.preventDefault(),I(!0);try{await V(D.map(e=>{let{_id:t,value:a}=e;return{_id:t,value:a}})),z()}catch(t){j({type:"error",message:t})}finally{I(!1)}};return 0===D.length?g.createElement(T,{active:E,working:A,onSubmit:H},g.createElement(F,{number:t,title:a}),g.createElement(s,{blockEnd:"x32"},g.createElement(u,null,Array.from({length:5},(e,t)=>g.createElement(r,{key:t},g.createElement(i.Item,{align:"stretch"},g.createElement(r.Label,null,g.createElement(d,{width:"50%"}))),g.createElement(o.Skeleton,null)))))):g.createElement(T,{active:E,working:A,onSubmit:H},g.createElement(F,{number:t,title:a}),g.createElement(s,{blockEnd:"x32"},g.createElement(u,null,D.map((e,t)=>{let{_id:a,type:l,i18nLabel:n,value:u,values:i}=e;return(g.createElement(r,{key:t},g.createElement(r.Label,{htmlFor:a},R(n)),g.createElement(r.Row,null,"string"===l&&g.createElement(p,{type:"text","data-qa":a,id:a,name:a,ref:0===t?W:void 0,value:u,onChange:e=>{let{currentTarget:{value:t}}=e;return P(a,t)}}),"select"===l&&g.createElement(c,{"data-qa":a,id:a,name:a,placeholder:R("Select_an_option"),value:u,onChange:e=>P(a,e),options:i.map(e=>{let{i18nLabel:t,key:a}=e;return[a,R(t)]})}),"boolean"===l&&g.createElement(c,{"data-qa":a,id:a,name:a,ref:0===t?W:void 0,value:String(u),onChange:e=>P(a,"true"===e),options:[["true",R("Yes")],["false",R("No")]]}),"language"===l&&g.createElement(c,{"data-qa":a,id:a,name:a,placeholder:R("Default"),value:u,onChange:e=>P(a,e),options:M.map(e=>{let{key:t,name:a}=e;return[t,a]}).sort((e,t)=>{let[a]=e,[l]=t;return a-l})}))))}))),g.createElement(x,{disabled:A,onBackClick:w>2&&B}))}a.exportDefault(w)}

