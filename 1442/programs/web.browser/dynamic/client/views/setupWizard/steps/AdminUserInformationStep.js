function module(e,t,r){let n,a,l,o,s,i,u,c,m,d,E,g,p,h,k,x,_,v,w,y,S,T;function C(e){let{step:t,title:r,active:C}=e;const f=v(),b=p("registerUser"),F=p("setUsername"),R=h("forceLogin"),I=w(),L=x(),U=async e=>{let{name:t,username:r,email:n,password:a,onRegistrationEmailSent:l}=e;await b({name:t,username:r,email:n,pass:a}),I.run("userRegistered");try{await f(n,a)}catch(o){if("error-invalid-email"===o.error)return void(l&&l());throw L({type:"error",message:o}),o}R(!1),await F(r),I.run("usernameSet")},q=k("UTF8_Names_Validation"),z=E(()=>new RegExp("^".concat(q,"$")),[q]),M=E(()=>/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]+$/i,[]),[P,A]=g(""),[D,Z]=g(""),[H,N]=g(""),[W,$]=g(""),[G,O]=g(!0),[V,j]=g(!0),[B,J]=g(!0),[K,Q]=g(!0),X=E(()=>P&&D&&H&&W,[P,D,H,W]),[Y,ee]=g(!1),te=()=>{const e=!!P,t=!!D&&z.test(D),r=!!H&&M.test(H),n=!!W;return O(e),j(t),J(r),Q(n),e&&t&&r&&n},re=_(),ne=c(C),ae=async e=>{e.preventDefault();const t=te();if(t){ee(!0);try{await U({name:P,username:D,email:H,password:W,onRegistrationEmailSent:()=>{L({type:"success",message:re("We_have_sent_registration_email")})}})}catch(r){console.error(r)}finally{ee(!1)}}},le=m(),oe=m(),se=m(),ie=m();return d.createElement(S,{active:C,working:Y,onSubmit:ae},d.createElement(T,{number:t,title:r}),d.createElement(s,{blockEnd:"x32"},d.createElement(l,null,d.createElement(a,null,d.createElement(a.Label,{htmlFor:le,required:!0},re("Name")),d.createElement(a.Row,null,d.createElement(u,{ref:ne,id:le,addon:d.createElement(o,{name:"user",size:"x20"}),placeholder:re("Type_your_name"),value:P,onChange:e=>{let{currentTarget:{value:t}}=e;return A(t)},error:G?"":"error"}))),d.createElement(a,null,d.createElement(a.Label,{htmlFor:oe,required:!0},re("Username")),d.createElement(a.Row,null,d.createElement(u,{id:oe,addon:d.createElement(o,{name:"at",size:"x20"}),placeholder:re("Type_your_username"),value:D,onChange:e=>{let{currentTarget:{value:t}}=e;return Z(t)},error:V?"":"error"})),!V&&d.createElement(a.Error,null,re("Invalid_username"))),d.createElement(a,null,d.createElement(a.Label,{htmlFor:se,required:!0},re("Organization_Email")),d.createElement(a.Row,null,d.createElement(n,{id:se,addon:d.createElement(o,{name:"mail",size:"x20"}),placeholder:re("Type_your_email"),value:H,onChange:e=>{let{currentTarget:{value:t}}=e;return N(t)},error:B?"":"error"})),!B&&d.createElement(a.Error,null,re("Invalid_email"))),d.createElement(a,null,d.createElement(a.Label,{htmlFor:ie,required:!0},re("Password")),d.createElement(a.Row,null,d.createElement(i,{id:ie,addon:d.createElement(o,{name:"key",size:"x20"}),placeholder:re("Type_your_password"),value:W,onChange:e=>{let{currentTarget:{value:t}}=e;return $(t)},error:K?"":"error"}))))),d.createElement(y,{disabled:Y,isContinueEnabled:X}))}r.link("@rocket.chat/fuselage",{EmailInput(e){n=e},Field(e){a=e},FieldGroup(e){l=e},Icon(e){o=e},Margins(e){s=e},PasswordInput(e){i=e},TextInput(e){u=e}},0),r.link("@rocket.chat/fuselage-hooks",{useAutoFocus(e){c=e},useUniqueId(e){m=e}},1),r.link("react",{default(e){d=e},useMemo(e){E=e},useState(e){g=e}},2),r.link("../../../contexts/ServerContext",{useMethod(e){p=e}},3),r.link("../../../contexts/SessionContext",{useSessionDispatch(e){h=e}},4),r.link("../../../contexts/SettingsContext",{useSetting(e){k=e}},5),r.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){x=e}},6),r.link("../../../contexts/TranslationContext",{useTranslation(e){_=e}},7),r.link("../../../contexts/UserContext",{useLoginWithPassword(e){v=e}},8),r.link("../../../hooks/useCallbacks",{useCallbacks(e){w=e}},9),r.link("../Pager",{Pager(e){y=e}},10),r.link("../Step",{Step(e){S=e}},11),r.link("../StepHeader",{StepHeader(e){T=e}},12),r.exportDefault(C)}

