function module(e,o,r){let n,t,a,s,l,m,i,c,_,u,d,g,f,b,h,p,v,k,C,x,E,M,S,U,w,R,A,T,y,I;r.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),r.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){t=e}},1),r.export({useUserInfoActionsSpread:()=>D,useUserInfoActions:()=>V}),r.link("react",{default(e){a=e},useCallback(e){s=e},useMemo(e){l=e}},0),r.link("@rocket.chat/fuselage",{Button(e){m=e},ButtonGroup(e){i=e},Icon(e){c=e},Modal(e){_=e},Box(e){u=e}},1),r.link("@rocket.chat/fuselage-hooks",{useAutoFocus(e){d=e},useMutableCallback(e){g=e}},2),r.link("underscore.string",{default(e){f=e}},3),r.link("../../contexts/TranslationContext",{useTranslation(e){b=e}},4),r.link("../../hooks/useReactiveValue",{useReactiveValue(e){h=e}},5),r.link("../../contexts/AuthorizationContext",{usePermission(e){p=e},useAllPermissions(e){v=e}},6),r.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){k=e}},7),r.link("../../contexts/UserContext",{useUserId(e){C=e},useUserSubscription(e){x=e},useUserSubscriptionByName(e){E=e}},8),r.link("../../contexts/ServerContext",{useMethod(e){M=e}},9),r.link("../../../app/webrtc/client",{WebRTC(e){S=e}},10),r.link("../../contexts/RouterContext",{useRoute(e){U=e}},11),r.link("../../contexts/ModalContext",{useSetModal(e){w=e}},12),r.link("../../../app/models/client",{RoomRoles(e){R=e}},13),r.link("../../../app/utils",{roomTypes(e){A=e},RoomMemberActions(e){T=e}},14),r.link("../../hooks/useEndpointAction",{useEndpointActionExperimental(e){y=e}},15),r.link("./useUserRoom",{useUserRoom(e){I=e}},16);const O=(e,o,r)=>h(s(()=>!!R.findOne({rid:o,"u._id":e,roles:r}),[e,o,r])),P=(e,o,r,n)=>{const t=r||o,a=e&&e.name!==n;return t&&a},B=e=>{if(!e)return!1;const{localUrl:o,remoteItems:r}=e,n=r.get()||[];return null!==o.get()||0!==n.length},L=(e,o,r)=>e&&e.ro?(!Array.isArray(e.unmuted)||-1===e.unmuted.indexOf(o&&o.username))&&(!r||Array.isArray(e.muted)&&-1!==e.muted.indexOf(o&&o.username)):e&&Array.isArray(e.muted)&&e.muted.indexOf(o&&o.username)>-1,N=e=>{let{text:o,confirmText:r,close:n,confirm:s}=e,l=t(e,["text","confirmText","close","confirm"]);const u=d(!0),g=b();return a.createElement(_,l,a.createElement(_.Header,null,a.createElement(c,{color:"warning",name:"modal-warning",size:20}),a.createElement(_.Title,null,g("Are_you_sure")),a.createElement(_.Close,{onClick:n})),a.createElement(_.Content,{fontScale:"p1"},o),a.createElement(_.Footer,null,a.createElement(i,{align:"end"},a.createElement(m,{ghost:!0,onClick:n},g("Cancel")),a.createElement(m,{ref:u,primary:!0,danger:!0,onClick:s},r))))},j=e=>{let[o,{action:r,label:n,icon:t}]=e;return[o,{label:{label:n,icon:t},action:r}]},D=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return l(()=>{const r=Object.entries(e),n=r.slice(0,o),t=r.slice(o,r.length).map(j),a=t.length&&Object.fromEntries(r.slice(o,r.length).map(j));return{actions:n,menu:a}},[e,o])},V=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;const r=b(),t=k(),m=U("direct"),i=w(),{_id:c}=e,_=C(),d=g(()=>i(null)),R=I(o),j=x(o),D=E(e.username),V=O(c,o,"leader"),W=O(c,o,"moderator"),z=O(c,o,"owner"),F=s(()=>S.getInstanceByRoomId(o),[o]),G=h(F),H=v("post-readonly",o),J=j&&j.ignored&&j.ignored.indexOf(c)>-1,Y=L(R,e,H),q="p"===R.t?"groups":"channels",K=R&&R.t&&A.getConfig(R.t),{roomCanSetOwner:Q,roomCanSetLeader:X,roomCanSetModerator:Z,roomCanBlock:$,roomCanMute:ee,roomCanRemove:oe}=n({},K&&{roomCanSetOwner:K.allowMemberAction(R,T.SET_AS_OWNER),roomCanSetLeader:K.allowMemberAction(R,T.SET_AS_LEADER),roomCanSetModerator:K.allowMemberAction(R,T.SET_AS_MODERATOR),roomCanBlock:K.allowMemberAction(R,T.IGNORE),roomCanMute:K.allowMemberAction(R,T.MUTE),roomCanRemove:K.allowMemberAction(R,T.REMOVE_USER)}),re=R&&R.t&&f.escapeHTML(A.getRoomName(R.t,R)),ne=p("set-owner",o),te=p("set-leader",o),ae=p("set-moderator",o),se=p("mute-user",o),le=p("remove-user",o),me=p("create-d"),ie=B(G),ce=h(s(()=>{var e;return null==G?void 0:null===(e=G.callInProgress)||void 0===e?void 0:e.get()},[])),_e=P(j,D,me,e.username),ue=g(()=>m.push({rid:e.username})),de=l(()=>_e&&{label:r("Direct_Message"),icon:"chat",action:ue},[ue,_e,r]),ge=l(()=>{const e=()=>{G.joinCall({audio:!0,video:!0})},o=()=>{G.startCall({audio:!0,video:!0})},n=ce?e:o;return ie&&{label:r(ce?"Join_video_call":"Start_video_call"),icon:"video",action:n}},[ce,ie,r,G]),fe=l(()=>{const e=()=>{G.joinCall({audio:!0,video:!1})},o=()=>{G.startCall({audio:!0,video:!1})},n=ce?e:o;return ie&&{label:r(ce?"Join_audio_call":"Start_audio_call"),icon:"mic",action:n}},[ce,ie,r,G]),be=z?"removeOwner":"addOwner",he=z?"User__username__removed_from__room_name__owners":"User__username__is_now_a_owner_of__room_name_",pe=y("POST","".concat(q,".").concat(be),r(he,{username:e.username,room_name:re})),ve=g(async()=>pe({roomId:o,userId:c})),ke=l(()=>Q&&ne&&{label:r(z?"Remove_as_owner":"Set_as_owner"),icon:"shield-check",action:ve},[ve,z,r,Q,ne]),Ce=V?"removeLeader":"addLeader",xe=V?"User__username__removed_from__room_name__leaders":"User__username__is_now_a_leader_of__room_name_",Ee=y("POST","".concat(q,".").concat(Ce),r(xe,{username:e.username,room_name:re})),Me=g(()=>Ee({roomId:o,userId:c})),Se=l(()=>X&&te&&{label:r(V?"Remove_as_leader":"Set_as_leader"),icon:"shield-alt",action:Me},[V,X,r,te,Me]),Ue=W?"removeModerator":"addModerator",we=W?"User__username__removed_from__room_name__moderators":"User__username__is_now_a_moderator_of__room_name_",Re=y("POST","".concat(q,".").concat(Ue),r(we,{username:e.username,room_name:re})),Ae=g(()=>Re({roomId:o,userId:c})),Te=l(()=>Z&&ae&&{label:r(W?"Remove_as_moderator":"Set_as_moderator"),icon:"shield",action:Ae},[Ae,W,Z,r,ae]),ye=M("ignoreUser"),Ie=g(async()=>{try{await ye({rid:o,userId:c,ignore:!J}),t({type:"success",message:r("User_has_been_unignored")})}catch(e){t({type:"error",message:e})}}),Oe=l(()=>$&&c!==_&&{label:r(J?"Unignore":"Ignore"),icon:"ban",action:Ie},[Ie,J,_,$,r,c]),Pe=M(Y?"unmuteUserInRoom":"muteUserInRoom"),Be=l(()=>{const n=()=>{const n=async()=>{try{await Pe({rid:o,username:e.username}),d(),t({type:"success",message:r(Y?"User__username__unmuted_in_room__roomName__":"User__username__muted_in_room__roomName__",{username:e.username,roomName:re})})}catch(n){t({type:"error",message:n})}};if(Y)return n();i(a.createElement(N,{text:r("The_user_wont_be_able_to_type_in_s",re),close:d,confirmText:r("Yes_mute_user"),confirm:n}))};return ee&&se&&{label:r(Y?"Unmute_user":"Mute_user"),icon:Y?"mic":"mic-off",action:n}},[d,t,Y,Pe,o,ee,re,i,r,e.username,se]),Le=y("POST","".concat(q,".kick"),r("User_has_been_removed_from_s",re)),Ne=g(()=>{i(a.createElement(N,{text:r("The_user_will_be_removed_from_s",re),close:d,confirmText:r("Yes_remove_user"),confirm:()=>{Le({roomId:o,userId:c}),d()}}))}),je=l(()=>oe&&le&&{label:a.createElement(u,{color:"danger"},r("Remove_from_room")),icon:"sign-out",action:Ne},[oe,le,Ne,r]);return l(()=>n({},de&&{openDirectMessage:de},{},ge&&{video:ge},{},fe&&{audio:fe},{},ke&&{changeOwner:ke},{},Se&&{changeLeader:Se},{},Te&&{changeModerator:Te},{},Oe&&{ignoreUser:Oe},{},Be&&{muteUser:Be},{},je&&{removeUser:je}),[fe,Se,Te,ke,Oe,Be,de,je,ge])}}

