function module(e,t,n){let a,o,r,s,l,c,i,m,u,k,T,_,d,x,f,A,E,C,h,P;n.link("@babel/runtime/helpers/extends",{default(e){a=e}},0),n.export({AccountTokensTable:()=>y}),n.link("@rocket.chat/fuselage",{Table(e){o=e},Button(e){r=e},ButtonGroup(e){s=e},Icon(e){l=e},Box(e){c=e}},0),n.link("react",{default(e){i=e},useMemo(e){m=e},useCallback(e){u=e},useState(e){k=e}},1),n.link("../../components/GenericTable",{GenericTable(e){T=e},Th(e){_=e}},2),n.link("../../contexts/ModalContext",{useSetModal(e){d=e}},3),n.link("../../contexts/ServerContext",{useMethod(e){x=e}},4),n.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){f=e}},5),n.link("../../contexts/TranslationContext",{useTranslation(e){A=e}},6),n.link("../../hooks/useResizeInlineBreakpoint",{useResizeInlineBreakpoint(e){E=e}},7),n.link("../../hooks/useFormatDateAndTime",{useFormatDateAndTime(e){C=e}},8),n.link("./InfoModal",{default(e){h=e}},9),n.link("../../contexts/UserContext",{useUserId(e){P=e}},10);const p=e=>{let{lastTokenPart:t,name:n,createdAt:a,bypassTwoFactor:c,formatDateAndTime:m,onRegenerate:k,onRemove:T,t:_,isMedium:d}=e;const x=u(()=>k(n),[n,k]),f=u(()=>T(n),[n,T]);return i.createElement(o.Row,{key:n,tabIndex:0,role:"link",action:!0,"qa-token-name":n},i.createElement(o.Cell,{withTruncatedText:!0,color:"default",fontScale:"p2"},n),d&&i.createElement(o.Cell,{withTruncatedText:!0},m(a)),i.createElement(o.Cell,{withTruncatedText:!0},"...",t),i.createElement(o.Cell,{withTruncatedText:!0},_(c?"Ignore":"Require")),i.createElement(o.Cell,{withTruncatedText:!0},i.createElement(s,null,i.createElement(r,{onClick:x,small:!0},i.createElement(l,{name:"refresh",size:"x16"})),i.createElement(r,{onClick:f,small:!0},i.createElement(l,{name:"trash",size:"x16"})))))};function y(e){let{data:t,reload:n}=e;const o=A(),r=C(),s=f(),l=d(),y=P(),I=x("personalAccessTokens:regenerateToken"),g=x("personalAccessTokens:removeToken"),[M,R]=E([600],200),[w,b]=k({current:0,itemsPerPage:25}),v=t&&t.success?t.tokens.length:0,{current:B,itemsPerPage:D}=w,G=m(()=>{if(!t)return null;if(!t.success)return[];const e=B>v?v-D:B;return t.tokens.slice(e,e+D)},[B,t,D,v]),S=u(()=>l(null),[l]),z=m(()=>[i.createElement(_,{key:"name"},o("API_Personal_Access_Token_Name")),R&&i.createElement(_,{key:"createdAt"},o("Created_at")),i.createElement(_,{key:"lastTokenPart"},o("Last_token_part")),i.createElement(_,{key:"2fa"},o("Two Factor Authentication")),i.createElement(_,{key:"actions"})].filter(Boolean),[R,o]),F=u(e=>{const t=async()=>{try{const t=await I({tokenName:e});l(i.createElement(h,{title:o("API_Personal_Access_Token_Generated"),content:i.createElement(c,{dangerouslySetInnerHTML:{__html:o("API_Personal_Access_Token_Generated_Text_Token_s_UserId_s",{token:t,userId:y})}}),confirmText:o("ok"),onConfirm:S})),n()}catch(t){s({type:"error",message:t})}};l(i.createElement(h,{title:o("Are_you_sure"),content:o("API_Personal_Access_Tokens_Regenerate_Modal"),confirmText:o("API_Personal_Access_Tokens_Regenerate_It"),onConfirm:t,cancelText:o("Cancel"),onClose:S}))},[S,s,I,n,l,o,y]),N=u(e=>{const t=async()=>{try{await g({tokenName:e}),s({type:"success",message:o("Removed")}),n(),S()}catch(t){s({type:"error",message:t})}};l(i.createElement(h,{title:o("Are_you_sure"),content:o("API_Personal_Access_Tokens_Remove_Modal"),confirmText:o("Yes"),onConfirm:t,cancelText:o("Cancel"),onClose:S}))},[S,s,n,g,l,o]);return i.createElement(T,{ref:M,header:z,results:G,total:v,setParams:b,params:w},u(e=>i.createElement(p,a({onRegenerate:F,onRemove:N,t:o,formatDateAndTime:r,isMedium:R},e)),[r,R,F,N,o]))}n.exportDefault(y)}

