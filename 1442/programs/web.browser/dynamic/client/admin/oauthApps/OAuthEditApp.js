function module(e,t,l){let n,a,r,c,o,i,u,m,s,E,d,p,h,_,C,b,k,f,x,g,w,y,A,S,v,T,R,D,I;l.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),l.link("@babel/runtime/helpers/extends",{default(e){a=e}},1),l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){r=e}},2),l.export({default:()=>M}),l.link("react",{default(e){c=e},useCallback(e){o=e},useState(e){i=e},useMemo(e){u=e}},0),l.link("@rocket.chat/fuselage",{Box(e){m=e},Button(e){s=e},ButtonGroup(e){E=e},TextInput(e){d=e},Field(e){p=e},Icon(e){h=e},Skeleton(e){_=e},Throbber(e){C=e},InputBox(e){b=e},TextAreaInput(e){k=e},ToggleSwitch(e){f=e},FieldGroup(e){x=e},Modal(e){g=e}},1),l.link("../../contexts/TranslationContext",{useTranslation(e){w=e}},2),l.link("../../contexts/ServerContext",{useMethod(e){y=e},useAbsoluteUrl(e){A=e}},3),l.link("../../contexts/RouterContext",{useRoute(e){S=e}},4),l.link("../../contexts/ModalContext",{useSetModal(e){v=e}},5),l.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){T=e}},6),l.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){R=e},ENDPOINT_STATES(e){D=e}},7),l.link("../../components/basic/VerticalBar",{default(e){I=e}},8);const L=e=>{let{onDelete:t,onCancel:l}=e,n=r(e,["onDelete","onCancel"]);const a=w();return(c.createElement(g,n,c.createElement(g.Header,null,c.createElement(h,{color:"danger",name:"modal-warning",size:20}),c.createElement(g.Title,null,a("Are_you_sure")),c.createElement(g.Close,{onClick:l})),c.createElement(g.Content,{fontScale:"p1"},a("Application_delete_warning")),c.createElement(g.Footer,null,c.createElement(E,{align:"end"},c.createElement(s,{ghost:!0,onClick:l},a("Cancel")),c.createElement(s,{primary:!0,danger:!0,onClick:t},a("Delete"))))))},U=e=>{let{onClose:t}=e,l=r(e,["onClose"]);const n=w();return(c.createElement(g,l,c.createElement(g.Header,null,c.createElement(h,{color:"success",name:"checkmark-circled",size:20}),c.createElement(g.Title,null,n("Deleted")),c.createElement(g.Close,{onClick:t})),c.createElement(g.Content,{fontScale:"p1"},n("Your_entry_has_been_deleted")),c.createElement(g.Footer,null,c.createElement(E,{align:"end"},c.createElement(s,{primary:!0,onClick:t},n("Ok"))))))};function M(e){let{_id:t}=e,l=r(e,["_id"]);const n=w(),[d,p]=i(),h=o(()=>{p(new Date)},[]),k=u(()=>({appId:t}),[t,d]),{data:f,state:x,error:g}=R("oauth-apps.get",k);return x===D.LOADING?c.createElement(m,{pb:"x20",maxWidth:"x600",w:"full",alignSelf:"center"},c.createElement(_,{mbs:"x8"}),c.createElement(b.Skeleton,{w:"full"}),c.createElement(_,{mbs:"x8"}),c.createElement(b.Skeleton,{w:"full"}),c.createElement(E,{stretch:!0,w:"full",mbs:"x8"},c.createElement(s,{disabled:!0},c.createElement(C,{inheritColor:!0})),c.createElement(s,{primary:!0,disabled:!0},c.createElement(C,{inheritColor:!0}))),c.createElement(E,{stretch:!0,w:"full",mbs:"x8"},c.createElement(s,{primary:!0,danger:!0,disabled:!0},c.createElement(C,{inheritColor:!0})))):!g&&f&&t?c.createElement(O,a({data:f.oauthApp,onChange:h},l)):c.createElement(m,{fontScale:"h1",pb:"x20"},n("error-application-not-found"))}function O(e){let{onChange:t,data:l}=e,m=r(e,["onChange","data"]);const _=w(),C=T(),[b,g]=i({name:l.name,active:l.active,redirectUri:Array.isArray(l.redirectUri)?l.redirectUri.join("\n"):l.redirectUri}),R=v(),D=S("admin-oauth-apps"),M=o(()=>D.push({}),[D]),O=A(),B=u(()=>O("oauth/authorize"),[O]),j=u(()=>O("oauth/token"),[O]),z=y("updateOAuthApp"),F=y("deleteOAuthApp"),G=o(async()=>{try{await z(l._id,b),C({type:"success",message:_("Application_updated")}),t()}catch(e){C({type:"error",message:e})}},[l._id,C,b,t,z,_]),H=o(async()=>{try{await F(l._id),R(()=>c.createElement(U,{onClose:()=>{R(),M()}}))}catch(e){C({type:"error",message:e})}},[M,l._id,F,C]),N=()=>R(()=>c.createElement(L,{onDelete:H,onCancel:()=>R(void 0)})),W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e.currentTarget.value;return l=>g(n({},b,{[e]:t(l)}))},{active:P,name:V,redirectUri:Y}=b;return c.createElement(I.ScrollableContent,a({w:"full"},m),c.createElement(x,{maxWidth:"x600",alignSelf:"center",w:"full"},c.createElement(p,null,c.createElement(p.Label,{display:"flex",justifyContent:"space-between",w:"full"},_("Active"),c.createElement(f,{checked:P,onChange:W("active",()=>!P)}))),c.createElement(p,null,c.createElement(p.Label,null,_("Application_Name")),c.createElement(p.Row,null,c.createElement(d,{value:V,onChange:W("name")})),c.createElement(p.Hint,null,_("Give_the_application_a_name_This_will_be_seen_by_your_users"))),c.createElement(p,null,c.createElement(p.Label,null,_("Redirect_URI")),c.createElement(p.Row,null,c.createElement(k,{rows:5,value:Y,onChange:W("redirectUri")})),c.createElement(p.Hint,null,_("After_OAuth2_authentication_users_will_be_redirected_to_this_URL"))),c.createElement(p,null,c.createElement(p.Label,null,_("Client_ID")),c.createElement(p.Row,null,c.createElement(d,{value:l.clientId,onChange:W("clientId")}))),c.createElement(p,null,c.createElement(p.Label,null,_("Client_Secret")),c.createElement(p.Row,null,c.createElement(d,{value:l.clientSecret}))),c.createElement(p,null,c.createElement(p.Label,null,_("Authorization_URL")),c.createElement(p.Row,null,c.createElement(d,{value:B}))),c.createElement(p,null,c.createElement(p.Label,null,_("Access_Token_URL")),c.createElement(p.Row,null,c.createElement(d,{value:j}))),c.createElement(p,null,c.createElement(p.Row,null,c.createElement(E,{stretch:!0,w:"full"},c.createElement(s,{onClick:M},_("Cancel")),c.createElement(s,{primary:!0,onClick:G},_("Save"))))),c.createElement(p,null,c.createElement(p.Row,null,c.createElement(E,{stretch:!0,w:"full"},c.createElement(s,{primary:!0,danger:!0,onClick:N},c.createElement(h,{name:"trash",mie:"x4"}),_("Delete")))))))}}

