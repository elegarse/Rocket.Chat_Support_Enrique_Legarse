function module(e,t,n){let o,a,l,s,r,i,c,u,m,d,h,_,E,C,f,k,x,g,b,p,y,v,S;n.link("@babel/runtime/helpers/objectSpread2",{default(e){o=e}},0),n.link("@babel/runtime/helpers/extends",{default(e){a=e}},1),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){l=e}},2),n.export({UserInfoActions:()=>w}),n.link("@rocket.chat/fuselage",{Button(e){s=e},ButtonGroup(e){r=e},Icon(e){i=e},Menu(e){c=e},Modal(e){u=e},Option(e){m=e}},0),n.link("react",{default(e){d=e},useCallback(e){h=e},useMemo(e){_=e}},1),n.link("../../channel/hooks/useUserInfoActions",{useUserInfoActionsSpread(e){E=e}},2),n.link("../../components/ConfirmOwnerChangeWarningModal",{default(e){C=e}},3),n.link("../../components/basic/UserInfo",{default(e){f=e}},4),n.link("../../contexts/AuthorizationContext",{usePermission(e){k=e}},5),n.link("../../contexts/ModalContext",{useSetModal(e){x=e}},6),n.link("../../contexts/RouterContext",{useRoute(e){g=e}},7),n.link("../../contexts/ServerContext",{useMethod(e){b=e},useEndpoint(e){p=e}},8),n.link("../../contexts/SettingsContext",{useSetting(e){y=e}},9),n.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){v=e}},10),n.link("../../contexts/TranslationContext",{useTranslation(e){S=e}},11);const A=e=>{let{onConfirm:t,onCancel:n,confirmText:o,text:a}=e,c=l(e,["onConfirm","onCancel","confirmText","text"]);const m=S();return(d.createElement(u,c,d.createElement(u.Header,null,d.createElement(i,{color:"danger",name:"modal-warning",size:20}),d.createElement(u.Title,null,m("Are_you_sure")),d.createElement(u.Close,{onClick:n})),d.createElement(u.Content,{fontScale:"p1"},a),d.createElement(u.Footer,null,d.createElement(r,{align:"end"},d.createElement(s,{ghost:!0,onClick:n},m("Cancel")),d.createElement(s,{primary:!0,danger:!0,onClick:t},o)))))},T=e=>{let{onClose:t,title:n,text:o}=e,a=l(e,["onClose","title","text"]);const c=S();return(d.createElement(u,a,d.createElement(u.Header,null,d.createElement(i,{color:"success",name:"checkmark-circled",size:20}),d.createElement(u.Title,null,n),d.createElement(u.Close,{onClick:t})),d.createElement(u.Content,{fontScale:"p1"},o),d.createElement(u.Footer,null,d.createElement(r,{align:"end"},d.createElement(s,{primary:!0,onClick:t},c("Ok"))))))},w=e=>{let{username:t,_id:n,isActive:s,isAdmin:i,onChange:u}=e;const w=S(),M=x(),U=g("direct"),O=g("admin-users"),R=v(),D=k("create-d"),I=k("edit-other-user-info"),P=k("assign-admin-role"),B=k("edit-other-user-e2ee"),W=k("edit-other-user-active-status"),F=k("delete-user"),K=y("Accounts_TwoFactorAuthentication_Enforce_Password_Fallback"),j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async()=>{try{return await e()}catch(l){var n,o;if("user-last-owner"===(null===(n=l.xhr)||void 0===n?void 0:null===(o=n.responseJSON)||void 0===o?void 0:o.errorType)){const{shouldChangeOwner:n,shouldBeRemoved:o}=l.xhr.responseJSON.details;return void M(d.createElement(C,a({shouldChangeOwner:n,shouldBeRemoved:o},t,{onConfirm:async()=>{await e(!0),M()},onCancel:()=>{M(),u()}})))}R({type:"error",message:l})}}},z=_(()=>({userId:n}),[n]),q=p("POST","users.delete"),G=y("Message_ErasureType"),H=j((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(z.confirmRelinquish=e);const t=await q(z);t.success?M(d.createElement(T,{title:w("Deleted"),text:w("User_has_been_deleted"),onClose:()=>{M(),u()}})):M()}),{contentTitle:w("Delete_User_Warning_".concat(G)),confirmLabel:w("Delete")}),J=h(()=>{M(d.createElement(A,{onConfirm:H,onCancel:()=>M(),text:w("Delete_User_Warning_".concat(G)),confirmText:w("Delete")}))},[H,G,M,w]),L=b("setAdminStatus"),N=h(()=>{try{L(n,!i);const e=i?"User_is_no_longer_an_admin":"User_is_now_an_admin";R({type:"success",message:w(e)}),u()}catch(e){R({type:"error",message:e})}},[n,R,i,u,L,w]),Y=p("POST","users.resetE2EKey"),Q=h(async()=>{M();const e=await Y({userId:n});e&&M(d.createElement(T,{title:w("Success"),text:w("Users_key_has_been_reset"),onClose:()=>{M(),u()}}))},[Y,u,M,w,n]),V=h(()=>{M(d.createElement(A,{onConfirm:Q,onCancel:()=>M(),text:w("E2E_Reset_Other_Key_Warning"),confirmText:w("Reset")}))},[Q,w,M]),X=_(()=>({userId:n,activeStatus:!s}),[n,s]),Z=s?"User_has_been_deactivated":"User_has_been_activated",$=p("POST","users.setActiveStatus"),ee=j((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(X.confirmRelinquish=e);try{const e=await $(X);e.success&&(R({type:"success",message:w(Z)}),u())}catch(t){throw t}}),{confirmLabel:w("Yes_deactivate_it")}),te=h(()=>U.push({rid:t}),[U,t]),ne=h(()=>O.push({context:"edit",id:n}),[n,O]),oe=_(()=>o({},D&&{directMessage:{icon:"chat",label:w("Direct_Message"),action:te}},{},I&&{editUser:{icon:"edit",label:w("Edit"),action:ne}},{},P&&{makeAdmin:{icon:"key",label:w(i?"Remove_Admin":"Make_Admin"),action:N}},{},B&&K&&{resetE2EEKey:{icon:"key",label:w("Reset_E2E_Key"),action:V}},{},F&&{delete:{icon:"trash",label:w("Delete"),action:J}},{},W&&{changeActiveStatus:{icon:"user",label:w(s?"Deactivate":"Activate"),action:ee}}),[w,D,te,I,ne,P,i,N,F,J,W,s,ee,K,B,V]),{actions:ae,menu:le}=E(oe),se=le&&d.createElement(c,{mi:"x4",placement:"bottom-start",small:!1,ghost:!1,flexShrink:0,key:"menu",renderItem:e=>{let{label:{label:t,icon:n}}=e,o=l(e,["label"]);return(d.createElement(m,a({label:t,title:t,icon:n},o)))},options:le}),re=_(()=>[...ae.map(e=>{let[t,{label:n,icon:o,action:a}]=e;return(d.createElement(f.Action,{key:t,title:n,label:n,onClick:a,icon:o}))}),se].filter(Boolean),[ae,se]);return d.createElement(r,{flexGrow:0,justifyContent:"center"},re)}}

