function module(e,t,a){let s,n,r,l,i,o,u,d,c,m,p,f,E,v,k,_,x,h,b,g,w;function y(e){let{uid:t}=e,a=n(e,["uid"]);const i=f(),{data:o,state:u,error:d}=E("roles.list","")||{},{data:c,state:m,error:k}=E("users.info",l(()=>({userId:t}),[t]));return[m,u].includes(v.LOADING)?r.createElement(w,null):k||d?r.createElement(p,{m:"x16",type:"danger"},i("User_not_found")):r.createElement(T,s({data:c.user,roles:o.roles},a))}a.link("@babel/runtime/helpers/extends",{default(e){s=e}},0),a.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},1),a.export({EditUserWithData:()=>y,EditUser:()=>T}),a.link("react",{default(e){r=e},useMemo(e){l=e},useState(e){i=e},useCallback(e){o=e}},0),a.link("@rocket.chat/fuselage",{Box(e){u=e},Field(e){d=e},Margins(e){c=e},Button(e){m=e},Callout(e){p=e}},1),a.link("../../contexts/TranslationContext",{useTranslation(e){f=e}},2),a.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){E=e},ENDPOINT_STATES(e){v=e}},3),a.link("../../hooks/useEndpointAction",{useEndpointAction(e){k=e}},4),a.link("../../hooks/useEndpointUpload",{useEndpointUpload(e){_=e}},5),a.link("../../contexts/RouterContext",{useRoute(e){x=e}},6),a.link("../../components/basic/avatar/UserAvatarEditor",{default(e){h=e}},7),a.link("../../hooks/useForm",{useForm(e){b=e}},8),a.link("./UserForm",{default(e){g=e}},9),a.link("./Skeleton",{FormSkeleton(e){w=e}},10);const A=e=>{var t,a,s,n,r;return{roles:e.roles,name:null!==(t=e.name)&&void 0!==t?t:"",password:"",username:e.username,status:e.status,bio:null!==(a=e.bio)&&void 0!==a?a:"",nickname:null!==(s=e.nickname)&&void 0!==s?s:"",email:e.emails&&e.emails[0].address||"",verified:e.emails&&e.emails[0].verified||!1,setRandomPassword:!1,requirePasswordChange:e.setRandomPassword||!1,customFields:null!==(n=e.customFields)&&void 0!==n?n:{},statusText:null!==(r=e.statusText)&&void 0!==r?r:""}};function T(e){let{data:t,roles:a}=e,p=n(e,["data","roles"]);const E=f(),[v,w]=i(),{values:y,handlers:T,reset:U,hasUnsavedChanges:S}=b(A(t)),C=x("admin-users"),O=o(e=>C.push({context:"info",id:e}),[C]),P=l(()=>({userId:t._id,data:y}),[t._id,JSON.stringify(y)]),F=l(()=>({userId:t._id,avatarUrl:v&&v.avatarUrl}),[t._id,JSON.stringify(v)]),I=l(()=>({userId:t._id}),[t._id]),R=k("POST","users.update",P,E("User_updated_successfully")),D=_("users.setAvatar",F,E("Avatar_changed_successfully")),N=k("POST","users.setAvatar",F,E("Avatar_changed_successfully")),j=k("POST","users.resetAvatar",I,E("Avatar_changed_successfully")),G=o(async()=>"reset"===v?j():v.avatarUrl?N():(v.set("userId",t._id),D(v)),[v,j,D,N,t._id]),B=o(async()=>{const e=await R();e.success&&(v&&await G(),O(t._id))},[v,t._id,O,R,G]),J=a.map(e=>{let{_id:t,description:a}=e;return[t,a||t]}),M=S||v,W=l(()=>r.createElement(h,{username:t.username,etag:t.avatarETag,setAvatarObj:w}),[t.username,t.avatarETag]),q=l(()=>r.createElement(d,null,r.createElement(d.Row,null,r.createElement(u,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},r.createElement(c,{inlineEnd:"x4"},r.createElement(m,{flexGrow:1,type:"reset",disabled:!M,onClick:U},E("Reset")),r.createElement(m,{mie:"none",flexGrow:1,disabled:!M,onClick:B},E("Save")))))),[B,M,U,E]);return r.createElement(g,s({formValues:y,formHandlers:T,availableRoles:J,prepend:W,append:q},p))}}

