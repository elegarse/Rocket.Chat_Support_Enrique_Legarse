function module(e,t,l){let n,a,r,o,s,i,c,m,d,u,p,E,_,g,h,y,f;function k(){var e;const t=E(),l=_(),[k,w]=i(m(!0)),[C,S]=i(m()),[x,v]=i(m([])),T=h("GET","getCurrentImportOperation"),F=h("GET","getLatestImportOperations"),I=h("POST","downloadPendingFiles"),b=g("admin-import-new"),D=g("admin-import-progress");d(()=>{const e=async()=>{w(!0);try{const{operation:e}=await T();S(e)}catch(e){l({type:"error",message:t("Failed_To_Load_Import_Operation")})}try{const e=await F();v(e)}catch(e){l({type:"error",message:t("Failed_To_Load_Import_History")})}w(!1)};e()},[l,T,F,S,v,w,t]);const O=u(()=>null==x?void 0:x.some(e=>{let{importerKey:t,status:l}=e;return"slack"===t&&l===y.DONE}),[x]),P=()=>{b.push()},L=async()=>{try{w(!0);const{count:e}=await I();if(e)return l({type:"info",message:t("No_files_left_to_download")}),void w(!1);l({type:"info",message:t("File_Downloads_Started")}),D.push()}catch(e){console.error(e),l({type:"error",message:t("Failed_To_Download_Files")}),w(!1)}},M=s("(max-width: 768px)");return c.createElement(p,null,c.createElement(p.Header,{title:t("Import")},c.createElement(r,null,c.createElement(a,{primary:!0,disabled:k,onClick:P},t("Import_New_File")),O&&c.createElement(a,{disabled:k,onClick:L},t("Download_Pending_Files")))),c.createElement(p.ScrollableContentWithShadow,null,c.createElement(o,{fixed:!0},c.createElement(o.Head,null,c.createElement(o.Row,null,c.createElement(o.Cell,{is:"th",rowSpan:2,width:"x140"},t("Import_Type")),c.createElement(o.Cell,{is:"th",rowSpan:2},t("Last_Updated")),!M&&c.createElement(c.Fragment,null,c.createElement(o.Cell,{is:"th",rowSpan:2},t("Last_Status")),c.createElement(o.Cell,{is:"th",rowSpan:2},t("File")),c.createElement(o.Cell,{is:"th",align:"center",colSpan:4,width:"x320"},t("Counters")))),!M&&c.createElement(o.Row,null,c.createElement(o.Cell,{is:"th",align:"center"},t("Users")),c.createElement(o.Cell,{is:"th",align:"center"},t("Channels")),c.createElement(o.Cell,{is:"th",align:"center"},t("Messages")),c.createElement(o.Cell,{is:"th",align:"center"},t("Total")))),c.createElement(o.Body,null,k?Array.from({length:20},(e,t)=>c.createElement(f.Skeleton,{small:M,key:t})):c.createElement(c.Fragment,null,(null==C?void 0:C.valid)&&c.createElement(f,n({},C,{small:M})),null==x?void 0:null===(e=x.filter(e=>{let{_id:t}=e;return(null==C?void 0:C._id)!==t||!(null==C?void 0:C.valid)}))||void 0===e?void 0:e.map(e=>c.createElement(f,n({key:e._id},e,{valid:!1,small:M}))))))))}l.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),l.link("@rocket.chat/fuselage",{Button(e){a=e},ButtonGroup(e){r=e},Table(e){o=e}},0),l.link("@rocket.chat/fuselage-hooks",{useMediaQuery(e){s=e},useSafely(e){i=e}},1),l.link("react",{default(e){c=e},useState(e){m=e},useEffect(e){d=e},useMemo(e){u=e}},2),l.link("../../components/basic/Page",{default(e){p=e}},3),l.link("../../contexts/TranslationContext",{useTranslation(e){E=e}},4),l.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){_=e}},5),l.link("../../contexts/RouterContext",{useRoute(e){g=e}},6),l.link("../../contexts/ServerContext",{useEndpoint(e){h=e}},7),l.link("../../../app/importer/lib/ImporterProgressStep",{ProgressStep(e){y=e}},8),l.link("./ImportOperationSummary",{default(e){f=e}},9),l.exportDefault(k)}

