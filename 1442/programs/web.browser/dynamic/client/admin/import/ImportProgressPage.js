function module(e,t,r){let n,o,a,s,i,l,c,u,p,m,d,g,f,E,h,k,x,C;function y(){const e=d(),t=E(),r=C(),[y,S]=s(c(null)),[_,I]=s(c("Loading...")),[v,T]=s(c(0)),[w,b]=s(c(0)),D=h("GET","getCurrentImportOperation"),L=h("GET","getImportProgress"),M=k("admin-import"),R=k("admin-import-prepare");l(()=>{const t=async()=>{try{const{operation:e}=await D();if(!e.valid)return void M.push();if(!f.includes(e.status))return void R.push();S(e.importerKey),T(e.count.completed),b(e.count.total)}catch(t){r(t,e("Failed_To_Load_Import_Data")),M.push()}};t()},[D,r,M,R,T,S,b,e]),l(()=>{if(!y)return;const n=n=>{let{key:o,step:a,count:{completed:s=0,total:i=0}={}}=n;if(o.toLowerCase()===y)switch(a){case g.DONE:return t({type:"success",message:e(a[0].toUpperCase()+a.slice(1))}),void M.push();case g.ERROR:case g.CANCELLED:return r(e(a[0].toUpperCase()+a.slice(1))),void M.push();default:I(a),T(s),b(i)}},o=new m.Streamer("importers"),a=async()=>{try{const r=await L();if(!r)return t({type:"warning",message:e("Importer_not_in_progress")}),void R.push();o.on("progress",n),n(r)}catch(a){r(a,e("Failed_To_Load_Import_Data")),M.push()}};return a(),()=>{o.removeListener("progress",n)}},[t,L,r,M,y,R,T,I,b,e]);const P=u(()=>0===w?null:v/w*100,[v,w]);return(i.createElement(x,null,i.createElement(x.Header,{title:e("Importing_Data")}),i.createElement(x.ScrollableContentWithShadow,null,i.createElement(n,{marginInline:"auto",marginBlock:"neg-x24",width:"full",maxWidth:"x580"},i.createElement(o,{block:"x24"},i.createElement(n,{is:"p",fontScale:"p1"},e(_[0].toUpperCase()+_.slice(1))),P?i.createElement(n,{display:"flex",justifyContent:"center"},i.createElement(n,{is:"progress",value:v,max:w,marginInlineEnd:"x24"}),i.createElement(n,{is:"span",fontScale:"p1"},v,"/",w," (",p.numberFormat(P,0),"%)")):i.createElement(a,{justifyContent:"center"}))))))}r.link("@rocket.chat/fuselage",{Box(e){n=e},Margins(e){o=e},Throbber(e){a=e}},0),r.link("@rocket.chat/fuselage-hooks",{useSafely(e){s=e}},1),r.link("react",{default(e){i=e},useEffect(e){l=e},useState(e){c=e},useMemo(e){u=e}},2),r.link("underscore.string",{default(e){p=e}},3),r.link("meteor/meteor",{Meteor(e){m=e}},4),r.link("../../contexts/TranslationContext",{useTranslation(e){d=e}},5),r.link("../../../app/importer/lib/ImporterProgressStep",{ProgressStep(e){g=e},ImportingStartedStates(e){f=e}},6),r.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){E=e}},7),r.link("../../contexts/ServerContext",{useEndpoint(e){h=e}},8),r.link("../../contexts/RouterContext",{useRoute(e){k=e}},9),r.link("../../components/basic/Page",{default(e){x=e}},10),r.link("./useErrorHandler",{useErrorHandler(e){C=e}},11),r.exportDefault(y)}

