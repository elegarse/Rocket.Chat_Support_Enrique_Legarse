function module(e,t,a){let n,l,c,i,s,r,o,p,u,d,m,b,x,E,_,f,h,k,y,g;function M(e){let{app:t}=e,a=c(e,["app"]);const M=E(),T=d(),I=m("admin-apps"),w=b("cloud:checkUserLoggedIn"),A=x("POST","/apps/".concat(t.id,"/status")),S=x("GET","/apps"),C=x("POST","/apps/".concat(t.id,"/sync")),P=x("DELETE","/apps/".concat(t.id)),v="subscription"===t.purchaseType,L=t.subscriptionInfo&&["active","trialing"].includes(t.subscriptionInfo.status),U=_.includes(t.status),z=u(()=>{T(null)},[T]),D=u(async()=>{try{const{status:e}=await A({status:"manually_enabled"});f(t.name,e)}catch(e){h(e)}},[t.name,A]),j=u(()=>{I.push({context:"logs",id:t.id})},[t.id,I]),O=u(async()=>{if(!(await w()))return void T(o.createElement(k,null));let e;try{e=await S({buildExternalUrl:"true",appId:t.id,purchaseType:t.purchaseType,details:!0})}catch(n){return void h(n)}const a=async()=>{try{await C()}catch(n){h(n)}};T(o.createElement(y,{url:e.url,confirm:a,cancel:z}))},[w,T,z,S,t.id,t.purchaseType,C]),R=u(()=>{const e=async()=>{z();try{const{status:e}=await A({status:"manually_disabled"});f(t.name,e)}catch(e){h(e)}};T(o.createElement(g,{close:z,confirm:e,text:M("Apps_Marketplace_Deactivate_App_Prompt"),confirmText:M("Yes")}))},[t.name,z,A,T,M]),W=u(()=>{const e=async()=>{z();try{await P()}catch(e){h(e)}};if(L){const t=async()=>{await O()};T(o.createElement(g,{close:z,cancel:e,confirm:t,text:M("Apps_Marketplace_Uninstall_Subscribed_App_Prompt"),confirmText:M("Apps_Marketplace_Modify_App_Subscription"),cancelText:M("Apps_Marketplace_Uninstall_Subscribed_App_Anyway")}))}T(o.createElement(g,{close:z,confirm:e,text:M("Apps_Marketplace_Uninstall_App_Prompt"),confirmText:M("Yes")}))},[z,O,L,T,M,P]),Y=p(()=>l({},v&&{subscribe:{label:o.createElement(i,null,o.createElement(s,{name:"card",size:"x16",marginInlineEnd:"x4"}),M("Subscription")),action:O}},{viewLogs:{label:o.createElement(i,null,o.createElement(s,{name:"list-alt",size:"x16",marginInlineEnd:"x4"}),M("View_Logs")),action:j}},U&&{disable:{label:o.createElement(i,{color:"warning"},o.createElement(s,{name:"ban",size:"x16",marginInlineEnd:"x4"}),M("Disable")),action:R}},{},!U&&{enable:{label:o.createElement(i,null,o.createElement(s,{name:"check",size:"x16",marginInlineEnd:"x4"}),M("Enable")),action:D}},{uninstall:{label:o.createElement(i,{color:"danger"},o.createElement(s,{name:"trash",size:"x16",marginInlineEnd:"x4"}),M("Uninstall")),action:W}}),[v,M,O,j,U,R,D,W]);return o.createElement(r,n({options:Y,placement:"bottom-start"},a))}a.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),a.link("@babel/runtime/helpers/objectSpread2",{default(e){l=e}},1),a.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){c=e}},2),a.link("@rocket.chat/fuselage",{Box(e){i=e},Icon(e){s=e},Menu(e){r=e}},0),a.link("react",{default(e){o=e},useMemo(e){p=e},useCallback(e){u=e}},1),a.link("../../contexts/ModalContext",{useSetModal(e){d=e}},2),a.link("../../contexts/RouterContext",{useRoute(e){m=e}},3),a.link("../../contexts/ServerContext",{useMethod(e){b=e},useEndpoint(e){x=e}},4),a.link("../../contexts/TranslationContext",{useTranslation(e){E=e}},5),a.link("./helpers",{appEnabledStatuses(e){_=e},warnStatusChange(e){f=e},handleAPIError(e){h=e}},6),a.link("./CloudLoginModal",{CloudLoginModal(e){k=e}},7),a.link("./IframeModal",{IframeModal(e){y=e}},8),a.link("./WarningModal",{default(e){g=e}},9),a.exportDefault(M)}

