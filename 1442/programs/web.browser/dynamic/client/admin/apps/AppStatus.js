function module(e,t,a){let n,l,o,r,i,s,c,u,p,d,h,m,k,f,b,x,g,y,E,C;a.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},0),a.link("@rocket.chat/fuselage",{Box(e){l=e},Button(e){o=e},Icon(e){r=e},Throbber(e){i=e}},0),a.link("@rocket.chat/fuselage-hooks",{useSafely(e){s=e}},1),a.link("react",{default(e){c=e},useCallback(e){u=e},useState(e){p=e},memo(e){d=e}},2),a.link("../../contexts/TranslationContext",{useTranslation(e){h=e}},3),a.link("./helpers",{appButtonProps(e){m=e},appStatusSpanProps(e){k=e},handleAPIError(e){f=e},warnStatusChange(e){b=e}},4),a.link("../../../app/apps/client/orchestrator",{Apps(e){x=e}},5),a.link("./IframeModal",{IframeModal(e){g=e}},6),a.link("./CloudLoginModal",{CloudLoginModal(e){y=e}},7),a.link("../../contexts/ModalContext",{useSetModal(e){E=e}},8),a.link("../../contexts/ServerContext",{useMethod(e){C=e}},9);const S=async e=>{let{id:t,name:a,version:n}=e;try{const{status:e}=await x.installApp(t,n);b(a,e)}catch(l){f(l)}},w={purchase:S,install:S,update:async e=>{let{id:t,name:a,version:n}=e;try{const{status:e}=await x.updateApp(t,n);b(a,e)}catch(l){f(l)}}},v=d(e=>{let{app:t,showStatus:a=!0}=e,d=n(e,["app","showStatus"]);const b=h(),[S,v]=s(p()),M=E(),I=m(t),P=!I&&k(t),T=(null==I?void 0:I.action)||"",A=u(()=>{M(null),w[T](t).then(()=>{v(!1)})},[M,T,t,v]),B=u(()=>{v(!1),M(null)},[v,M]),D=C("cloud:checkUserLoggedIn"),L=u(async e=>{e.preventDefault(),e.stopPropagation(),v(!0);const a=await D();if(!a)return v(!1),void M(c.createElement(y,null));if("purchase"!==T)A();else try{const e=await x.buildExternalUrl(t.id,t.purchaseType,!1);M(c.createElement(g,{url:e.url,cancel:B,confirm:A}))}catch(n){f(n)}},[v,D,T,A,M,t.id,t.purchaseType,B]);return c.createElement(l,d,I&&c.createElement(o,{primary:!0,disabled:S,invisible:!a&&!S,minHeight:"x40",onClick:L},S?c.createElement(i,{inheritColor:!0}):c.createElement(c.Fragment,null,I.icon&&c.createElement(r,{name:I.icon}),b(I.label))),P&&c.createElement(l,{color:"Disabled"===P.label?"warning":"hint",display:"flex",alignItems:"center"},c.createElement(r,{size:"x20",name:P.icon,mie:"x4"}),b(P.label)))});a.exportDefault(v)}

