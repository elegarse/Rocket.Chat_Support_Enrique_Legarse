function module(e,t,n){let l,r,a,o,i,c,u,s,m,E,g,_,h,d,p,w,b,y,f,k,H,R,S,C,x,I;function L(e){let{data:t,onChange:n}=e,o=r(e,["data","onChange"]);const c=b(),g=k("replayOutgoingIntegration"),{_id:h,_createdAt:p,_updatedAt:w,httpResult:H,event:R,step:S,httpCallData:C,data:I,prepareSentMessage:L,processSentMessage:T,url:O,httpError:P,errorStack:M,error:D,integration:{_id:W}}=t,N=d(e=>{e.stopPropagation(),g({integrationId:W,historyId:h}),n()},[h,W,n,g]),j=x(),F=y("json",JSON.stringify(L||"",null,2)),A=y("json",JSON.stringify(T||"",null,2)),J=y("json",JSON.stringify(C||"",null,2)),v=y("json",JSON.stringify(P||"",null,2)),B=y("json",JSON.stringify(H||"",null,2)),G=y("json",JSON.stringify(M||"",null,2));return _.createElement(s.Item,l({title:_.createElement(u,{display:"inline-flex",w:"full",flexDirection:"row",justifyContent:"space-between"},_.createElement(u,{display:"flex",flexDirection:"row",alignItems:"center"},_.createElement(i,{name:"info-circled",size:"x16",mie:"x4"}),j(p)),_.createElement(a,{ghost:!0,onClick:N},c("Replay")))},o),_.createElement(E,null,_.createElement(m,null,_.createElement(m.Label,null,c("Status")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("code",null,c(D?"Failure":"Success"))))),_.createElement(m,null,_.createElement(m.Label,null,c("Integration_Outgoing_WebHook_History_Time_Triggered")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("code",null,p)))),_.createElement(m,null,_.createElement(m.Label,null,c("Integration_Outgoing_WebHook_History_Time_Ended_Or_Error")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("code",null,w)))),_.createElement(m,null,_.createElement(m.Label,null,c("Event_Trigger")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("code",null,c(f.outgoingEvents[R].label))))),_.createElement(m,null,_.createElement(m.Label,null,c("Integration_Outgoing_WebHook_History_Trigger_Step")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("code",null,S)))),_.createElement(m,null,_.createElement(m.Label,null,c("Integration_Outgoing_WebHook_History_Data_Passed_To_Trigger")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("pre",null,_.createElement("code",{dangerouslySetInnerHTML:{__html:y("json",JSON.stringify(I,null,2))}}))))),L&&_.createElement(m,null,_.createElement(m.Label,null,c("Integration_Outgoing_WebHook_History_Messages_Sent_From_Prepare_Script")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("pre",null,_.createElement("code",{dangerouslySetInnerHTML:{__html:F}}))))),T&&_.createElement(m,null,_.createElement(m.Label,null,c("Integration_Outgoing_WebHook_History_Messages_Sent_From_Process_Script")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("pre",null,_.createElement("code",{dangerouslySetInnerHTML:{__html:A}}))))),O&&_.createElement(m,null,_.createElement(m.Label,null,c("URL")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("code",null,O)))),C&&_.createElement(m,null,_.createElement(m.Label,null,c("Integration_Outgoing_WebHook_History_Data_Passed_To_URL")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("pre",null,_.createElement("code",{dangerouslySetInnerHTML:{__html:J}}))))),P&&_.createElement(m,null,_.createElement(m.Label,null,c("Integration_Outgoing_WebHook_History_Http_Response_Error")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("pre",null,_.createElement("code",{dangerouslySetInnerHTML:{__html:v}}))))),H&&_.createElement(m,null,_.createElement(m.Label,null,c("Integration_Outgoing_WebHook_History_Http_Response")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("pre",null,_.createElement("code",{dangerouslySetInnerHTML:{__html:B}}))))),M&&_.createElement(m,null,_.createElement(m.Label,null,c("Integration_Outgoing_WebHook_History_Error_Stacktrace")),_.createElement(m.Row,null,_.createElement(u,{withRichContent:!0,w:"full"},_.createElement("pre",null,_.createElement("code",{dangerouslySetInnerHTML:{__html:G}})))))))}function T(e){let{data:t,state:n,onChange:a}=e,o=r(e,["data","state","onChange"]);const i=b();return t&&n!==R.LOADING?t.history.length<1?_.createElement(u,l({mbs:"x16"},o),i("Integration_Outgoing_WebHook_No_History")):_.createElement(_.Fragment,null,_.createElement(s,{w:"full",maxWidth:"x600",alignSelf:"center",key:"content"},t.history.map(e=>_.createElement(L,{data:e,key:e._id,onChange:a})))):_.createElement(u,l({w:"full",pb:"x24"},o),_.createElement(c,{mbe:"x4"}),_.createElement(c,{mbe:"x8"}),_.createElement(c,{mbe:"x4"}),_.createElement(c,{mbe:"x8"}),_.createElement(c,{mbe:"x4"}),_.createElement(c,{mbe:"x8"}))}function O(e){const t=I(),n=b(),[r,c]=p(),[u,s]=p(),[m,E]=p(),y=d(()=>{c(new Date)},[]),f=S("admin-integrations"),R=k("clearIntegrationHistory"),x=async()=>{try{await R(),t({type:"success",message:n("Integration_History_Cleared")}),y()}catch(e){t({type:"error",message:e})}},L=()=>{f.push({})},O=C("id"),P=h(()=>({id:O,count:m,offset:u}),[O,m,u,r]),{data:M,state:D}=H("integrations.history",P),W=d(e=>{let{count:t,current:l,itemsPerPage:r}=e;return n("Showing results %s - %s of %s",l+1,Math.min(l+r,t),t)},[n]);return _.createElement(w,l({flexDirection:"column"},e),_.createElement(w.Header,{title:n("Integration_Outgoing_WebHook_History")},_.createElement(o,null,_.createElement(a,{onClick:L},_.createElement(i,{name:"back",size:"x16"})," ",n("Back")),_.createElement(a,{primary:!0,danger:!0,onClick:x,disabled:!(M&&M.history.length>0)},_.createElement(i,{name:"trash"})," ",n("clear_history")))),_.createElement(w.ScrollableContentWithShadow,null,_.createElement(T,{key:"historyContent",data:M,state:D,onChange:y}),_.createElement(g,{current:u,itemsPerPage:m,itemsPerPageLabel:n("Items_per_page:"),showingResultsLabel:W,count:M&&M.total||0,onSetItemsPerPage:E,onSetCurrent:s})))}n.link("@babel/runtime/helpers/extends",{default(e){l=e}},0),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){r=e}},1),n.link("@rocket.chat/fuselage",{Button(e){a=e},ButtonGroup(e){o=e},Icon(e){i=e},Skeleton(e){c=e},Box(e){u=e},Accordion(e){s=e},Field(e){m=e},FieldGroup(e){E=e},Pagination(e){g=e}},0),n.link("react",{default(e){_=e},useMemo(e){h=e},useCallback(e){d=e},useState(e){p=e}},1),n.link("../../../components/basic/Page",{default(e){w=e}},2),n.link("../../../contexts/TranslationContext",{useTranslation(e){b=e}},3),n.link("../../../hooks/useHighlightedCode",{useHighlightedCode(e){y=e}},4),n.link("../../../../app/integrations/lib/rocketchat",{integrations(e){f=e}},5),n.link("../../../contexts/ServerContext",{useMethod(e){k=e}},6),n.link("../../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){H=e},ENDPOINT_STATES(e){R=e}},7),n.link("../../../contexts/RouterContext",{useRoute(e){S=e},useRouteParameter(e){C=e}},8),n.link("../../../hooks/useFormatDateAndTime",{useFormatDateAndTime(e){x=e}},9),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){I=e}},10),n.exportDefault(O)}

