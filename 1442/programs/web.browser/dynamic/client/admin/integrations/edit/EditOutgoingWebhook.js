function module(e,t,n){let l,o,r,a,i,s,u,d,c,m,g,p,E,x,v,k,b,f,h,y,C,w,D,S;function I(e){let{integrationId:t}=e,n=r(e,["integrationId"]);const l=v(),[u,d]=s(),{data:g,state:p,error:E}=k("integrations.get",i(()=>({integrationId:t}),[t,u])),x=()=>d(new Date);return p===b.LOADING?a.createElement(c,o({w:"full",pb:"x24"},n),a.createElement(m,{mbe:"x4"}),a.createElement(m,{mbe:"x8"}),a.createElement(m,{mbe:"x4"}),a.createElement(m,{mbe:"x8"}),a.createElement(m,{mbe:"x4"}),a.createElement(m,{mbe:"x8"})):E?a.createElement(c,o({mbs:"x16"},n),l("Oops_page_not_found")):a.createElement(W,o({data:g.integration,onChange:x},n))}n.link("@babel/runtime/helpers/objectSpread2",{default(e){l=e}},0),n.link("@babel/runtime/helpers/extends",{default(e){o=e}},1),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){r=e}},2),n.export({default:()=>I}),n.link("react",{default(e){a=e},useMemo(e){i=e},useState(e){s=e},useCallback(e){u=e}},0),n.link("@rocket.chat/fuselage",{Field(e){d=e},Box(e){c=e},Skeleton(e){m=e},Margins(e){g=e},Button(e){p=e}},1),n.link("./EditIntegrationsPage",{SuccessModal(e){E=e},DeleteWarningModal(e){x=e}},2),n.link("../../../contexts/TranslationContext",{useTranslation(e){v=e}},3),n.link("../../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){k=e},ENDPOINT_STATES(e){b=e}},4),n.link("../../../hooks/useEndpointAction",{useEndpointAction(e){f=e}},5),n.link("../../../contexts/RouterContext",{useRoute(e){h=e}},6),n.link("../../../contexts/ServerContext",{useMethod(e){y=e}},7),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){C=e}},8),n.link("../../../contexts/ModalContext",{useSetModal(e){w=e}},9),n.link("../OutgoiongWebhookForm",{default(e){D=e}},10),n.link("../../../hooks/useForm",{useForm(e){S=e}},11);const M=e=>{var t,n,l,o,r,a,i,s,u,d,c,m,g,p,E,x,v,k;const b={enabled:null===(t=e.enabled)||void 0===t||t,impersonateUser:e.impersonateUser,event:e.event,token:e.token,urls:null!==(n=e.urls.join("\n"))&&void 0!==n?n:"",triggerWords:null!==(l=null===(o=e.triggerWords)||void 0===o?void 0:o.join("; "))&&void 0!==l?l:"",targetRoom:null!==(r=e.targetRoom)&&void 0!==r?r:"",channel:null!==(a=e.channel.join(", "))&&void 0!==a?a:"",username:null!==(i=e.username)&&void 0!==i?i:"",name:null!==(s=e.name)&&void 0!==s?s:"",alias:null!==(u=e.alias)&&void 0!==u?u:"",avatarUrl:null!==(d=e.avatarUrl)&&void 0!==d?d:"",emoji:null!==(c=e.emoji)&&void 0!==c?c:"",scriptEnabled:null!==(m=e.scriptEnabled)&&void 0!==m&&m,script:null!==(g=e.script)&&void 0!==g?g:"",retryFailedCalls:null===(p=e.retryFailedCalls)||void 0===p||p,retryCount:null!==(E=e.retryCount)&&void 0!==E?E:5,retryDelay:null!==(x=e.retryDelay)&&void 0!==x?x:"power-of-ten",triggerrWordAnywhere:null!==(v=e.triggerrWordAnywhere)&&void 0!==v&&v,runOnEdits:null===(k=e.runOnEdits)||void 0===k||k};return b};function W(e){let{data:t,onChange:n,setSaveAction:s}=e,m=r(e,["data","onChange","setSaveAction"]);const k=v(),b=C(),{handlers:I,values:W,reset:_}=S(M(t)),j=w(),A=y("updateOutgoingIntegration"),O=h("admin-integrations"),T=i(()=>({type:"webhook-outgoing",integrationId:t._id}),[t._id]),F=f("POST","integrations.remove",T),R=u(()=>{const e=()=>j(),t=async()=>{const t=await F();t.success&&j(a.createElement(E,{onClose:()=>{e(),O.push({})}}))};j(a.createElement(x,{onDelete:t,onCancel:e}))},[F,O]),{urls:P,triggerWords:U}=W,G=u(async()=>{try{await A(t._id,l({},W,{triggerWords:U.split(/\s*(?:;|$)\s*/),urls:P.split("\n")})),b({type:"success",message:k("Integration_updated")}),n()}catch(e){b({type:"error",message:e})}},[t._id,b,W,n,A,k,U,P]),N=i(()=>a.createElement(d,null,a.createElement(d.Row,{display:"flex",flexDirection:"column"},a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},a.createElement(g,{inlineEnd:"x4"},a.createElement(p,{flexGrow:1,type:"reset",onClick:_},k("Reset")),a.createElement(p,{mie:"none",flexGrow:1,onClick:G},k("Save")))),a.createElement(p,{mbs:"x4",primary:!0,danger:!0,w:"full",onClick:R},k("Delete")))),[R,G,_,k]);return a.createElement(D,o({formValues:W,formHandlers:I,append:N},m))}}

