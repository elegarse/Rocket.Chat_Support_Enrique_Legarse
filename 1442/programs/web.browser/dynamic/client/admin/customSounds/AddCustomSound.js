function module(e,t,n){let a,l,r,o,s,c,i,u,m,d,p,g,h,E,f,y,k,C;function x(e){let{goToNew:t,close:n,onChange:x}=e,S=a(e,["goToNew","close","onChange"]);const b=h(),w=g(),[T,_]=r(""),[F,M]=r(),v=E("uploadCustomSound"),B=E("insertOrUpdateSound"),I=o(e=>{M(e)},[]),[N]=f(I,"audio/mp3"),D=o(async(e,t)=>{const n=k(t,e),a=y(n,t);if(0===a.length){let e;try{e=await B(n)}catch(l){w({type:"error",message:l})}if(n._id=e,n.random=Math.round(1e3*Math.random()),e){w({type:"success",message:b("Uploading_file")});const e=new FileReader;e.readAsBinaryString(t),e.onloadend=()=>{try{v(e.result,t.type,n),w({type:"success",message:b("File_uploaded")})}catch(l){w({type:"error",message:l})}}}return e}a.forEach(e=>{throw new Error({type:"error",message:b("error-the-field-is-required",{field:b(e)})})})},[w,B,b,v]),R=o(async()=>{try{const e=await D(T,F);w({type:"success",message:b("Custom_Sound_Updated_Successfully")}),t(e)(),x()}catch(e){w({type:"error",message:e})}},[w,t,T,x,D,F,b]);return l.createElement(C.ScrollableContent,S,l.createElement(s,null,l.createElement(s.Label,null,b("Name")),l.createElement(s.Row,null,l.createElement(c,{value:T,onChange:e=>_(e.currentTarget.value),placeholder:b("Name")}))),l.createElement(s,null,l.createElement(s.Label,{alignSelf:"stretch"},b("Sound_File_mp3")),l.createElement(i,{display:"flex",flexDirection:"row",mbs:"none"},l.createElement(m,{inline:"x4"},l.createElement(d,{square:!0,onClick:N},l.createElement(u,{name:"upload",size:"x20"})),F&&F.name||"none"))),l.createElement(s,null,l.createElement(s.Row,null,l.createElement(p,{stretch:!0,w:"full"},l.createElement(d,{mie:"x4",onClick:n},b("Cancel")),l.createElement(d,{primary:!0,onClick:R,disabled:""===T},b("Save"))))))}n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){a=e}},0),n.export({AddCustomSound:()=>x}),n.link("react",{default(e){l=e},useState(e){r=e},useCallback(e){o=e}},0),n.link("@rocket.chat/fuselage",{Field(e){s=e},TextInput(e){c=e},Box(e){i=e},Icon(e){u=e},Margins(e){m=e},Button(e){d=e},ButtonGroup(e){p=e}},1),n.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){g=e}},2),n.link("../../contexts/TranslationContext",{useTranslation(e){h=e}},3),n.link("../../contexts/ServerContext",{useMethod(e){E=e}},4),n.link("../../hooks/useFileInput",{useFileInput(e){f=e}},5),n.link("./lib",{validate(e){y=e},createSoundData(e){k=e}},6),n.link("../../components/basic/VerticalBar",{default(e){C=e}},7)}

