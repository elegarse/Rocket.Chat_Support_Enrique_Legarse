function module(e,t,n){let l,a,o,r,c,i,m,u,s,d,E,h,f,p,v,w,b,x,R,C,g,k,y,_,A,D,T,S,N;n.link("@babel/runtime/helpers/objectSpread2",{default(e){l=e}},0),n.export({EditRoomContextBar:()=>G}),n.link("react",{default(e){a=e},useState(e){o=e},useMemo(e){r=e}},0),n.link("@rocket.chat/fuselage",{Box(e){c=e},Skeleton(e){i=e},Button(e){m=e},ButtonGroup(e){u=e},TextInput(e){s=e},Field(e){d=e},ToggleSwitch(e){E=e},Icon(e){h=e},Callout(e){f=e},TextAreaInput(e){p=e}},1),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){v=e}},2),n.link("../../components/basic/VerticalBar",{default(e){w=e}},3),n.link("../../components/NotAuthorizedPage",{default(e){b=e}},4),n.link("../../components/basic/avatar/RoomAvatarEditor",{default(e){x=e}},5),n.link("../../components/DeleteChannelWarning",{default(e){R=e}},6),n.link("../../contexts/ModalContext",{useSetModal(e){C=e}},7),n.link("../../contexts/TranslationContext",{useTranslation(e){g=e}},8),n.link("../../hooks/useForm",{useForm(e){k=e}},9),n.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){y=e},ENDPOINT_STATES(e){_=e}},10),n.link("../../../app/utils/client",{roomTypes(e){A=e},RoomSettingsEnum(e){D=e}},11),n.link("../../contexts/ServerContext",{useMethod(e){T=e}},12),n.link("../../contexts/AuthorizationContext",{usePermission(e){S=e}},13),n.link("../../hooks/useEndpointAction",{useEndpointActionExperimental(e){N=e}},14);const O=e=>{var t,n,a;return{roomName:"d"===e.t?e.usernames.join(" x "):A.getRoomName(e.t,l({type:e.t},e)),roomType:e.t,readOnly:!!e.ro,archived:!!e.archived,isDefault:!!e.default,favorite:!!e.favorite,featured:!!e.featured,roomTopic:null!==(t=e.topic)&&void 0!==t?t:"",roomDescription:null!==(n=e.description)&&void 0!==n?n:"",roomAnnouncement:null!==(a=e.announcement)&&void 0!==a?a:"",roomAvatar:void 0}};function G(e){let{rid:t}=e;const n=S("view-room-administration");return n?a.createElement(L,{rid:t}):a.createElement(b,null)}function L(e){let{rid:t}=e;const{data:n={},state:o,error:m,reload:u}=y("rooms.adminRooms.getRoom",r(()=>({rid:t}),[t]));return o===_.LOADING?a.createElement(c,{w:"full",pb:"x24"},a.createElement(i,{mbe:"x4"}),a.createElement(i,{mbe:"x8"}),a.createElement(i,{mbe:"x4"}),a.createElement(i,{mbe:"x8"}),a.createElement(i,{mbe:"x4"}),a.createElement(i,{mbe:"x8"})):o===_.ERROR?m.message:a.createElement(I,{room:l({type:n.t},n),onChange:u})}function I(e){var t;let{room:n,onChange:l}=e;const i=g(),[b,y]=o(!1),_=C(),{values:G,handlers:L,hasUnsavedChanges:I,reset:P}=k(O(n)),[j,F,M,B,z,H,V]=r(()=>{const e=A.getConfig(n.t).allowRoomSettingChange;return[e(n,D.NAME),e(n,D.TOPIC),e(n,D.ANNOUNCEMENT),e(n,D.ARCHIVE_OR_UNARCHIVE),e(n,D.DESCRIPTION),e(n,D.TYPE),e(n,D.READ_ONLY)]},[n]),{roomName:U,roomType:Y,readOnly:J,archived:W,isDefault:q,favorite:K,featured:Q,roomTopic:X,roomAvatar:Z,roomDescription:$,roomAnnouncement:ee}=G,{handleIsDefault:te,handleFavorite:ne,handleFeatured:le,handleRoomName:ae,handleRoomType:oe,handleReadOnly:re,handleArchived:ce,handleRoomAvatar:ie,handleRoomTopic:me,handleRoomDescription:ue,handleRoomAnnouncement:se}=L,de=W!==!!n.archived,Ee=S("delete-".concat(n.t)),he=n.archived?"unarchive":"archive",fe=n.archived?"Room_has_been_unarchived":"Room_has_been_archived",pe=N("POST","rooms.saveRoomSettings",i("Room_updated_successfully")),ve=N("POST","rooms.changeArchivationState",i(fe)),we=v(async()=>{const e=()=>pe({rid:n._id,roomName:U,roomTopic:X,roomType:Y,readOnly:J,default:q,favorite:{defaultValue:q,favorite:K},featured:Q,roomDescription:$,roomAnnouncement:ee,roomAvatar:Z}),t=()=>ve({rid:n._id,action:he});await Promise.all([I&&e(),de&&t()].filter(Boolean)),l()}),be=v(()=>{oe("p"===Y?"c":"p")}),xe=T("eraseRoom"),Re=v(()=>{const e=()=>_(void 0),t=async()=>{await xe(n._id),e(),y(!0)};_(a.createElement(R,{onConfirm:t,onCancel:e}))});return a.createElement(w.ScrollableContent,{is:"form",onSubmit:v(e=>e.preventDefault())},b&&a.createElement(f,{type:"danger",title:i("Room_has_been_deleted")}),"d"!==n.t&&a.createElement(x,{roomAvatar:Z,room:n,onChangeAvatar:ie}),a.createElement(d,null,a.createElement(d.Label,null,i("Name")),a.createElement(d.Row,null,a.createElement(s,{disabled:b||!j,value:U,onChange:ae,flexGrow:1}))),"d"!==n.t&&a.createElement(a.Fragment,null,a.createElement(d,null,a.createElement(d.Label,null,i("Owner")),a.createElement(d.Row,null,a.createElement(c,{fontScale:"p1"},null===(t=n.u)||void 0===t?void 0:t.username))),z&&a.createElement(d,null,a.createElement(d.Label,null,i("Description")),a.createElement(d.Row,null,a.createElement(p,{rows:4,disabled:b,value:$,onChange:ue,flexGrow:1}))),M&&a.createElement(d,null,a.createElement(d.Label,null,i("Announcement")),a.createElement(d.Row,null,a.createElement(p,{rows:4,disabled:b,value:ee,onChange:se,flexGrow:1}))),F&&a.createElement(d,null,a.createElement(d.Label,null,i("Topic")),a.createElement(d.Row,null,a.createElement(p,{rows:4,disabled:b,value:X,onChange:me,flexGrow:1}))),H&&a.createElement(d,null,a.createElement(d.Row,null,a.createElement(d.Label,null,i("Private")),a.createElement(E,{disabled:b,checked:"p"===Y,onChange:be})),a.createElement(d.Hint,null,i("Just_invited_people_can_access_this_channel"))),V&&a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},a.createElement(d.Label,null,i("Read_only")),a.createElement(E,{disabled:b,checked:J,onChange:re}))),a.createElement(d.Hint,null,i("Only_authorized_users_can_write_new_messages"))),B&&a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},a.createElement(d.Label,null,i("Archived")),a.createElement(E,{disabled:b,checked:W,onChange:ce}))))),a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},a.createElement(d.Label,null,i("Default")),a.createElement(E,{disabled:b,checked:q,onChange:te})))),a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},a.createElement(d.Label,null,i("Favorite")),a.createElement(E,{disabled:b,checked:K,onChange:ne})))),a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},a.createElement(d.Label,null,i("Featured")),a.createElement(E,{disabled:b,checked:Q,onChange:le})))),a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},a.createElement(u,{stretch:!0,flexGrow:1},a.createElement(m,{type:"reset",disabled:!I||b,onClick:P},i("Reset")),a.createElement(m,{flexGrow:1,disabled:!I||b,onClick:we},i("Save")))))),a.createElement(d,null,a.createElement(d.Row,null,a.createElement(m,{primary:!0,flexGrow:1,danger:!0,disabled:b||!Ee,onClick:Re},a.createElement(h,{name:"trash",size:"x16"}),i("Delete")))))}}

