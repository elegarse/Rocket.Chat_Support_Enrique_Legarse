function module(e,t,l){let n,o,a,r,i,s,c,d,m,u,p,f,k,h,x,g,w,b,E,C,T,M,v,y;function I(e){let{mid:t,rid:l,jump:I,room:R}=e,S=a(e,["mid","rid","jump","room"]);const _=M(),j=b(E.getConfig(R.t).route.name),[z,B]=c({}),[A,F]=g("expand-threads",!1),D=s(),G=m(()=>f.userId(),[]),L=m(()=>o({top:0,right:0,maxWidth:"855px"},"rtl"===document.dir?{borderTopRightRadius:"4px"}:{borderTopLeftRadius:"4px"},{overflow:"hidden",bottom:0,zIndex:100}),[document.dir]),W=z.replies&&z.replies.includes(G),H=m(()=>W?"unfollow":"follow",[W]),O=m(()=>"follow"===H?"bell-off":"bell",[H]),P=_("follow"===H?"Not_Following":"Following"),N=m(()=>y(z),[z._updatedAt]),V=A?"collapse":"expand",q=A?"arrow-collapse":"arrow-expand",J=d(()=>{F(!A)},[A]),K=d(()=>T("follow"===H?"followMessage":"unfollowMessage",{mid:t}),[H,t]),Q=d(()=>{j.push("d"===R.t?{rid:l}:{name:R.name})},[j,R.t,R.name]);return i(()=>{const e=x.autorun(async()=>{const e=w.findOne({_id:t})||(await C.v1.get("chat.getMessage",{msgId:t})).message;e&&B(e)});return()=>e.stop()},[t]),i(()=>{let e;return(async()=>{e=z.rid&&D.current&&h.renderWithData(k.thread,o({mainMessage:w.findOne({_id:t})||(await C.v1.get("chat.getMessage",{msgId:t})).message,jump:I,following:W},S),D.current)})(),()=>e&&h.remove(e)},[z.rid,t]),z.rid?r.createElement(r.Fragment,null,A&&r.createElement(u.Backdrop,{onClick:Q}),r.createElement(p,n({width:"380px",flexGrow:1},!A&&{position:"relative"}),r.createElement(v,n({"rcx-thread-view":!0,width:"full",style:L,display:"flex",flexDirection:"column",position:"absolute"},!A&&{width:"380px"}),r.createElement(v.Header,null,r.createElement(v.Icon,{name:"thread"}),r.createElement(v.Text,{dangerouslySetInnerHTML:{__html:N}}),r.createElement(v.Action,{"aria-label":V,onClick:J,name:q}),r.createElement(v.Action,{"aria-label":P,onClick:K,name:O}),r.createElement(v.Close,{onClick:Q})),r.createElement(v.Content,{paddingInline:0,flexShrink:1,flexGrow:1,ref:D})))):r.createElement(r.Fragment,null,A&&r.createElement(u.Backdrop,{onClick:Q}),r.createElement(p,n({width:"380px",flexGrow:1},!A&&{position:"relative"}),r.createElement(v.Skeleton,n({"rcx-thread-view":!0,width:"full",style:L,display:"flex",flexDirection:"column",position:"absolute"},!A&&{width:"380px"}))))}l.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),l.link("@babel/runtime/helpers/objectSpread2",{default(e){o=e}},1),l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){a=e}},2),l.export({default:()=>I}),l.link("react",{default(e){r=e},useEffect(e){i=e},useRef(e){s=e},useState(e){c=e},useCallback(e){d=e},useMemo(e){m=e}},0),l.link("@rocket.chat/fuselage",{Modal(e){u=e},Box(e){p=e}},1),l.link("meteor/meteor",{Meteor(e){f=e}},2),l.link("meteor/templating",{Template(e){k=e}},3),l.link("meteor/blaze",{Blaze(e){h=e}},4),l.link("meteor/tracker",{Tracker(e){x=e}},5),l.link("@rocket.chat/fuselage-hooks",{useLocalStorage(e){g=e}},6),l.link("../../../models/client",{ChatMessage(e){w=e}},7),l.link("../../../../client/contexts/RouterContext",{useRoute(e){b=e}},8),l.link("../../../utils/client",{roomTypes(e){E=e},APIClient(e){C=e}},9),l.link("../../../ui-utils/client",{call(e){T=e}},10),l.link("../../../../client/contexts/TranslationContext",{useTranslation(e){M=e}},11),l.link("../../../../client/components/basic/VerticalBar",{default(e){v=e}},12),l.link("../lib/normalizeThreadTitle",{normalizeThreadTitle(e){y=e}},13)}

