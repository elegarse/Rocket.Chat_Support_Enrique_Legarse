function module(t,n,e){var r;r=function(t){"use strict";var n=t.Pos,e,r;function i(t){var n=t.flags;return null!=n?n:(t.ignoreCase?"i":"")+(t.global?"g":"")+(t.multiline?"m":"")}function o(t,n){for(var e=i(t),r=e,o=0;o<n.length;o++)-1==r.indexOf(n.charAt(o))&&(r+=n.charAt(o));return e==r?t:new RegExp(t.source,r)}function l(t){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(t.source)}function h(t,e,r){e=o(e,"g");for(var i=r.line,l=r.ch,h=t.lastLine();i<=h;i++,l=0){e.lastIndex=l;var f=t.getLine(i),s=e.exec(f);if(s)return{from:n(i,s.index),to:n(i,s.index+s[0].length),match:s}}}function f(t,e,r){if(!l(e))return h(t,e,r);e=o(e,"gm");for(var i,f=1,s=r.line,c=t.lastLine();s<=c;){for(var u=0;u<f&&!(s>c);u++){var a=t.getLine(s++);i=null==i?a:i+"\n"+a}f*=2,e.lastIndex=r.ch;var g=e.exec(i);if(g){var m=i.slice(0,g.index).split("\n"),v=g[0].split("\n"),d=r.line+m.length-1,p=m[m.length-1].length;return{from:n(d,p),to:n(d+v.length-1,1==v.length?p+v[0].length:v[v.length-1].length),match:g}}}}function s(t,n,e){for(var r,i=0;i<=t.length;){n.lastIndex=i;var o=n.exec(t);if(!o)break;var l=o.index+o[0].length;if(l>t.length-e)break;(!r||l>r.index+r[0].length)&&(r=o),i=o.index+1}return r}function c(t,e,r){e=o(e,"g");for(var i=r.line,l=r.ch,h=t.firstLine();i>=h;i--,l=-1){var f=t.getLine(i),c=s(f,e,l<0?0:f.length-l);if(c)return{from:n(i,c.index),to:n(i,c.index+c[0].length),match:c}}}function u(t,e,r){if(!l(e))return c(t,e,r);e=o(e,"gm");for(var i,h=1,f=t.getLine(r.line).length-r.ch,u=r.line,a=t.firstLine();u>=a;){for(var g=0;g<h&&u>=a;g++){var m=t.getLine(u--);i=null==i?m:m+"\n"+i}h*=2;var v=s(i,e,f);if(v){var d=i.slice(0,v.index).split("\n"),p=v[0].split("\n"),x=u+d.length,L=d[d.length-1].length;return{from:n(x,L),to:n(x+p.length-1,1==p.length?L+p[0].length:p[p.length-1].length),match:v}}}}function a(t,n,e,r){if(t.length==n.length)return e;for(var i=0,o=e+Math.max(0,t.length-n.length);;){if(i==o)return i;var l=i+o>>1,h=r(t.slice(0,l)).length;if(h==e)return l;h>e?o=l:i=l+1}}function g(t,i,o,l){if(!i.length)return null;var h=l?e:r,f=h(i).split(/\r|\n\r?/);t:for(var s=o.line,c=o.ch,u=t.lastLine()+1-f.length;s<=u;s++,c=0){var g=t.getLine(s).slice(c),m=h(g);if(1==f.length){var v=m.indexOf(f[0]);if(-1==v)continue t;var o=a(g,m,v,h)+c;return{from:n(s,a(g,m,v,h)+c),to:n(s,a(g,m,v+f[0].length,h)+c)}}var d=m.length-f[0].length;if(m.slice(d)==f[0]){for(var p=1;p<f.length-1;p++)if(h(t.getLine(s+p))!=f[p])continue t;var x=t.getLine(s+f.length-1),L=h(x),C=f[f.length-1];if(L.slice(0,C.length)==C)return{from:n(s,a(g,m,d,h)+c),to:n(s+f.length-1,a(x,L,C.length,h))}}}}function m(t,i,o,l){if(!i.length)return null;var h=l?e:r,f=h(i).split(/\r|\n\r?/);t:for(var s=o.line,c=o.ch,u=t.firstLine()-1+f.length;s>=u;s--,c=-1){var g=t.getLine(s);c>-1&&(g=g.slice(0,c));var m=h(g);if(1==f.length){var v=m.lastIndexOf(f[0]);if(-1==v)continue t;return{from:n(s,a(g,m,v,h)),to:n(s,a(g,m,v+f[0].length,h))}}var d=f[f.length-1];if(m.slice(0,d.length)==d){for(var p=1,o=s-f.length+1;p<f.length-1;p++)if(h(t.getLine(o+p))!=f[p])continue t;var x=t.getLine(s+1-f.length),L=h(x);if(L.slice(L.length-f[0].length)==f[0])return{from:n(s+1-f.length,a(x,L,x.length-f[0].length,h)),to:n(s,a(g,m,d.length,h))}}}}function v(t,e,r,i){var l;this.atOccurrence=!1,this.doc=t,r=r?t.clipPos(r):n(0,0),this.pos={from:r,to:r},"object"==typeof i?l=i.caseFold:(l=i,i=null),"string"==typeof e?(null==l&&(l=!1),this.matches=function(n,r){return(n?m:g)(t,e,r,l)}):(e=o(e,"gm"),i&&!1===i.multiline?this.matches=function(n,r){return(n?c:h)(t,e,r)}:this.matches=function(n,r){return(n?u:f)(t,e,r)})}String.prototype.normalize?(e=function(t){return t.normalize("NFD").toLowerCase()},r=function(t){return t.normalize("NFD")}):(e=function(t){return t.toLowerCase()},r=function(t){return t}),v.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){for(var r=this.matches(e,this.doc.clipPos(e?this.pos.from:this.pos.to));r&&0==t.cmpPos(r.from,r.to);)e?r.from.ch?r.from=n(r.from.line,r.from.ch-1):r=r.from.line==this.doc.firstLine()?null:this.matches(e,this.doc.clipPos(n(r.from.line-1))):r.to.ch<this.doc.getLine(r.to.line).length?r.to=n(r.to.line,r.to.ch+1):r=r.to.line==this.doc.lastLine()?null:this.matches(e,n(r.to.line+1,0));if(r)return this.pos=r,this.atOccurrence=!0,this.pos.match||!0;var i=n(e?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:i,to:i},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e,r){if(this.atOccurrence){var i=t.splitLines(e);this.doc.replaceRange(i,this.pos.from,this.pos.to,r),this.pos.to=n(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},t.defineExtension("getSearchCursor",(function(t,n,e){return new v(this.doc,t,n,e)})),t.defineDocExtension("getSearchCursor",(function(t,n,e){return new v(this,t,n,e)})),t.defineExtension("selectMatches",(function(n,e){for(var r=[],i=this.getSearchCursor(n,this.getCursor("from"),e);i.findNext()&&!(t.cmpPos(i.to(),this.getCursor("to"))>0);)r.push({anchor:i.from(),head:i.to()});r.length&&this.setSelections(r,0)}))},"object"==typeof n&&"object"==typeof e?r(t("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],r):r(CodeMirror)}

