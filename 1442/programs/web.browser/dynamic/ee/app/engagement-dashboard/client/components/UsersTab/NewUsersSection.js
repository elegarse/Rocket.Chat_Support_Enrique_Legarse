function module(e,t,n){let a,s,o,i,r,l,c,d,u,m,p,y,g,h,f;n.export({NewUsersSection:()=>b}),n.link("@nivo/bar",{ResponsiveBar(e){a=e}},0),n.link("@rocket.chat/fuselage",{Box(e){s=e},Flex(e){o=e},Select(e){i=e},Skeleton(e){r=e}},1),n.link("moment",{default(e){l=e}},2),n.link("react",{default(e){c=e},useMemo(e){d=e},useState(e){u=e}},3),n.link("../../../../../../client/contexts/TranslationContext",{useTranslation(e){m=e}},4),n.link("../../../../../../client/hooks/useEndpointData",{useEndpointData(e){p=e}},5),n.link("../../../../../../client/components/data/CounterSet",{default(e){y=e}},6),n.link("../Section",{Section(e){g=e}},7),n.link("../../../../../../client/components/basic/Buttons/ActionButton",{ActionButton(e){h=e}},8),n.link("../../../../../../client/lib/saveFile",{saveFile(e){f=e}},9);const x=e=>"// date, newUsers\n".concat(e.map(e=>{let{date:t,newUsers:n}=e;return"".concat(t,", ").concat(n)}).join("\n"));function b(){const e=m(),t=d(()=>[["last 7 days",e("Last_7_days")],["last 30 days",e("Last_30_days")],["last 90 days",e("Last_90_days")]],[e]),[n,b]=u("last 7 days"),S=d(()=>{switch(n){case"last 7 days":return{start:l().set({hour:0,minute:0,second:0,millisecond:0}).subtract(7,"days"),end:l().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)};case"last 30 days":return{start:l().set({hour:0,minute:0,second:0,millisecond:0}).subtract(30,"days"),end:l().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)};case"last 90 days":return{start:l().set({hour:0,minute:0,second:0,millisecond:0}).subtract(90,"days"),end:l().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)}}},[n]),k=e=>b(e),E=d(()=>({start:S.start.toISOString(),end:S.end.toISOString()}),[S]),v=p("engagement-dashboard/users/new-users",E),[w,_,U,I,C]=d(()=>{if(!v)return[];const e=Array.from({length:l(S.end).diff(S.start,"days")+1},(e,t)=>({date:l(S.start).add(t,"days").toISOString(),newUsers:0}));for(const{day:t,users:n}of v.days){const a=l(t).diff(S.start,"days");a>=0&&(e[a].newUsers+=n)}return[v.period.count,v.period.variation,v.yesterday.count,v.yesterday.variation,e]},[v,S]),A=()=>{f(x(C),"NewUsersSection_start_".concat(E.start,"_end_").concat(E.end,".csv"))};return c.createElement(g,{title:e("New_users"),filter:c.createElement(c.Fragment,null,c.createElement(i,{small:!0,options:t,value:n,onChange:k}),c.createElement(h,{mis:"x16",disabled:!v,onClick:A,"aria-label":e("Download_Info"),icon:"download"}))},c.createElement(y,{counters:[{count:v?w:c.createElement(r,{variant:"rect",width:"3ex",height:"1em"}),variation:v?_:0,description:t.find(e=>{let[t]=e;return t===n})[1]},{count:v?U:c.createElement(r,{variant:"rect",width:"3ex",height:"1em"}),variation:v?I:0,description:e("Yesterday")}]}),c.createElement(o.Container,null,v?c.createElement(s,{style:{height:240}},c.createElement(o.Item,{align:"stretch",grow:1,shrink:0},c.createElement(s,{style:{position:"relative"}},c.createElement(s,{style:{position:"absolute",width:"100%",height:"100%"}},c.createElement(a,{data:C,indexBy:"date",keys:["newUsers"],groupMode:"grouped",padding:.25,margin:{bottom:20},colors:["#1d74f5"],enableLabel:!1,enableGridY:!1,axisTop:null,axisRight:null,axisBottom:7===C.length&&{tickSize:0,tickPadding:4,tickRotation:0,format:e=>l(e).format("dddd")}||null,axisLeft:null,animate:!0,motionStiffness:90,motionDamping:15,theme:{axis:{ticks:{text:{fill:"#9EA2A8",fontFamily:'Inter, -apple-system, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Meiryo UI", Arial, sans-serif',fontSize:"10px",fontStyle:"normal",fontWeight:"600",letterSpacing:"0.2px",lineHeight:"12px"}}},tooltip:{container:{backgroundColor:"#1F2329",boxShadow:"0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)",borderRadius:2}}},tooltip:t=>{let{value:n}=t;return(c.createElement(s,{fontScale:"p2",color:"alternative"},e("Value_users",{value:n})))}}))))):c.createElement(r,{variant:"rect",height:240})))}}

