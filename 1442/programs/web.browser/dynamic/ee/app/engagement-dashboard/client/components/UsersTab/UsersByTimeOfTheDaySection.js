function module(e,t,n){let a,o,s,i,r,l,c,d,u,m,y,h,g,p,f;n.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),n.export({UsersByTimeOfTheDaySection:()=>b}),n.link("@nivo/heatmap",{ResponsiveHeatMap(e){o=e}},0),n.link("@rocket.chat/fuselage",{Box(e){s=e},Flex(e){i=e},Select(e){r=e},Skeleton(e){l=e}},1),n.link("moment",{default(e){c=e}},2),n.link("react",{default(e){d=e},useMemo(e){u=e},useState(e){m=e}},3),n.link("../../../../../../client/contexts/TranslationContext",{useTranslation(e){y=e}},4),n.link("../../../../../../client/hooks/useEndpointData",{useEndpointData(e){h=e}},5),n.link("../Section",{Section(e){g=e}},6),n.link("../../../../../../client/components/basic/Buttons/ActionButton",{ActionButton(e){p=e}},7),n.link("../../../../../../client/lib/saveFile",{saveFile(e){f=e}},8);const S=e=>"// date, users\n".concat(e.map(e=>{let{users:t,hour:n,day:a,month:o,year:s}=e;return{date:c([s,o-1,a,n,0,0,0]),users:t}}).sort((e,t)=>e>t).map(e=>{let{date:t,users:n}=e;return"".concat(t.toISOString(),", ").concat(n)}).join("\n"));function b(){const e=y(),t=u(()=>[["last 7 days",e("Last_7_days")],["last 30 days",e("Last_30_days")],["last 90 days",e("Last_90_days")]],[e]),[n,b]=m("last 7 days"),k=u(()=>{switch(n){case"last 7 days":return{start:c().set({hour:0,minute:0,second:0,millisecond:0}).subtract(7,"days"),end:c().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)};case"last 30 days":return{start:c().set({hour:0,minute:0,second:0,millisecond:0}).subtract(30,"days"),end:c().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)};case"last 90 days":return{start:c().set({hour:0,minute:0,second:0,millisecond:0}).subtract(90,"days"),end:c().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)}}},[n]),x=e=>b(e),E=u(()=>({start:k.start.toISOString(),end:k.end.toISOString()}),[k]),_=h("engagement-dashboard/users/users-by-time-of-the-day-in-a-week",E),[F,I]=u(()=>{if(!_)return[];const e=Array.from({length:c(k.end).diff(k.start,"days")+1},(e,t)=>c(k.start).add(t,"days")),t=Array.from({length:24},(t,n)=>a({hour:String(n)},e.map(e=>({[e.toISOString()]:0})).reduce((e,t)=>a({},e,{},t),{})));for(const{users:n,hour:a,day:o,month:s,year:i}of _.week){const e=c([i,s-1,o,0,0,0,0]).toISOString();t[a][e]+=n}return[e.map(e=>e.toISOString()),t]},[_,k.end,k.start]),v=()=>{f(S(_.week),"UsersByTimeOfTheDaySection_start_".concat(E.start,"_end_").concat(E.end,".csv"))};return d.createElement(g,{title:e("Users_by_time_of_day"),filter:d.createElement(d.Fragment,null,d.createElement(r,{options:t,value:n,onChange:x}),d.createElement(p,{mis:"x16",onClick:v,"aria-label":e("Download_Info"),icon:"download"}))},_?d.createElement(s,{display:"flex",style:{height:696}},d.createElement(i.Item,{align:"stretch",grow:1,shrink:0},d.createElement(s,{style:{position:"relative"}},d.createElement(s,{style:{position:"absolute",width:"100%",height:"100%"}},d.createElement(o,{data:I,indexBy:"hour",keys:F,padding:4,margin:{left:40,bottom:20},colors:["#E8F2FF","#D1EBFE","#A4D3FE","#76B7FC","#549DF9","#1D74F5","#10529E"],cellOpacity:1,enableLabels:!1,axisTop:null,axisRight:null,axisBottom:{tickSize:0,tickPadding:4,tickRotation:0,format:e=>7===F.length?c(e).format("dddd"):""},axisLeft:{tickSize:0,tickPadding:4,tickRotation:0,format:e=>c().set({hour:parseInt(e,10),minute:0,second:0}).format("LT")},hoverTarget:"cell",animate:F.length<=7,motionStiffness:90,motionDamping:15,theme:{axis:{ticks:{text:{fill:"#9EA2A8",fontFamily:'Inter, -apple-system, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Meiryo UI", Arial, sans-serif',fontSize:10,fontStyle:"normal",fontWeight:"600",letterSpacing:"0.2px",lineHeight:"12px"}}},tooltip:{container:{backgroundColor:"#1F2329",boxShadow:"0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)",borderRadius:2}}},tooltip:t=>{let{value:n}=t;return(d.createElement(s,{fontScale:"p2",color:"alternative"},e("Value_users",{value:n})))}}))))):d.createElement(l,{variant:"rect",height:696}))}}

