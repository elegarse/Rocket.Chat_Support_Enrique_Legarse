function module(e,t,a){let n,l,r,i,o,s,c,d,m,u,p,h,E,g,f,x,k,b,v,_,w;function D(e){let{tagId:t,reload:a}=e;const n=i(()=>({tagId:t}),[t]),{data:l,state:o,error:s}=k("livechat/tags.getOne",n),{data:c,state:d,error:m}=k("livechat/department"),u=f();return[o,d].includes(b.LOADING)?r.createElement(v,null):s||m?r.createElement(p,{m:"x16",type:"danger"},u("Not_Available")):r.createElement(C,{tagId:t,data:l,availableDepartments:c,reload:a})}function T(e){let{reload:t}=e;const a=f(),{data:n,state:l,error:i}=k("livechat/department");return l===b.LOADING?r.createElement(v,null):i?r.createElement(m,{mbs:"x16"},a("Not_found")):r.createElement(C,{reload:t,isNew:!0,availableDepartments:n})}function C(e){let{data:t,tagId:a,isNew:p,availableDepartments:k,reload:b}=e,v=l(e,["data","tagId","isNew","availableDepartments","reload"]);const D=f(),T=w("omnichannel-tags"),C=t||{},N=i(()=>k&&k.departments?k.departments.map(e=>{let{_id:t,name:a}=e;return[t,a||t]}):[],[k]),{values:y,handlers:I,hasUnsavedChanges:S}=_({name:C.name,description:C.description,departments:C.departments}),{handleName:G,handleDescription:M,handleDepartments:R}=I,{name:L,description:q,departments:A}=y,F=i(()=>L&&0!==L.length?void 0:D("The_field_is_required","name"),[L,D]),O=i(()=>q&&0!==q.length?void 0:D("The_field_is_required","description"),[q,D]),B=i(()=>A&&0!==A.length?void 0:D("The_field_is_required","departments"),[A,D]),W=E("livechat:saveTag"),j=g(),P=h(()=>{b()}),U=i(()=>!F&&!O&&!B,[F,O,B]),V=h(async()=>{const e={name:L,description:q};if(!U)return j({type:"error",message:D("The_field_is_required")});try{await W(a,e,A),j({type:"success",message:D("saved")}),b(),T.push({})}catch(t){j({type:"error",message:t})}});return r.createElement(x.ScrollableContent,n({is:"form"},v),r.createElement(o,null,r.createElement(o.Label,null,D("Name")),r.createElement(o.Row,null,r.createElement(s,{flexGrow:1,value:L,onChange:G,error:S&&F}))),r.createElement(o,null,r.createElement(o.Label,null,D("Description")),r.createElement(o.Row,null,r.createElement(s,{flexGrow:1,value:q,onChange:M,error:S&&O}))),r.createElement(o,null,r.createElement(o.Label,null,D("Departments")),r.createElement(o.Row,null,r.createElement(u,{options:N,value:A,error:S&&B,maxWidth:"100%",placeholder:D("Select_an_option"),onChange:R,flexGrow:1}))),r.createElement(o.Row,null,r.createElement(m,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},r.createElement(d,{inlineEnd:"x4"},!p&&r.createElement(c,{flexGrow:1,type:"reset",disabled:!S,onClick:P},D("Reset")),r.createElement(c,{mie:"none",flexGrow:1,disabled:!S&&!U,onClick:V},D("Save"))))))}a.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),a.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){l=e}},1),a.export({TagEditWithData:()=>D,TagNew:()=>T,TagEdit:()=>C}),a.link("react",{default(e){r=e},useMemo(e){i=e}},0),a.link("@rocket.chat/fuselage",{Field(e){o=e},TextInput(e){s=e},Button(e){c=e},Margins(e){d=e},Box(e){m=e},MultiSelect(e){u=e},Callout(e){p=e}},1),a.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){h=e}},2),a.link("../../../../client/contexts/ServerContext",{useMethod(e){E=e}},3),a.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch(e){g=e}},4),a.link("../../../../client/contexts/TranslationContext",{useTranslation(e){f=e}},5),a.link("../../../../client/components/basic/VerticalBar",{default(e){x=e}},6),a.link("../../../../client/hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){k=e},ENDPOINT_STATES(e){b=e}},7),a.link("./Skeleton",{FormSkeleton(e){v=e}},8),a.link("../../../../client/hooks/useForm",{useForm(e){_=e}},9),a.link("../../../../client/contexts/RouterContext",{useRoute(e){w=e}},10)}

