function module(e,t,n){let a,l,o,c,i,r,s,u,m,d,k,g,x,h,p,E,T,f,C,w,v,y,b,P,D;function M(e){let{_id:t,reload:n}=e;const a=h("livechat:removeTag"),l=f("omnichannel-tags"),i=P(),r=D(),s=g(),k=o(async()=>{try{await a(t)}catch(e){console.log(e)}l.push({}),n()}),x=o(e=>{e.stopPropagation();const t=async()=>{try{await k(),r({type:"success",message:s("Tag_removed")})}catch(e){r({type:"error",message:e})}i()};i(c.createElement(b,{onDelete:t,onCancel:()=>i()}))});return c.createElement(u.Cell,{fontScale:"p1",color:"hint",onClick:x,withTruncatedText:!0},c.createElement(d,{small:!0,ghost:!0,title:s("Remove"),onClick:x},c.createElement(m,{name:"trash",size:"x16"})))}n.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),n.export({RemoveTagButton:()=>M}),n.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){l=e},useMutableCallback(e){o=e}},0),n.link("react",{default(e){c=e},useMemo(e){i=e},useCallback(e){r=e},useState(e){s=e}},1),n.link("@rocket.chat/fuselage",{Table(e){u=e},Icon(e){m=e},Button(e){d=e}},2),n.link("../../../../client/components/GenericTable",{Th(e){k=e}},3),n.link("../../../../client/contexts/TranslationContext",{useTranslation(e){g=e}},4),n.link("../../../../client/hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){x=e}},5),n.link("../../../../client/contexts/ServerContext",{useMethod(e){h=e}},6),n.link("../../../../client/contexts/AuthorizationContext",{usePermission(e){p=e}},7),n.link("../../../../client/components/NotAuthorizedPage",{default(e){E=e}},8),n.link("../../../../client/contexts/RouterContext",{useRouteParameter(e){T=e},useRoute(e){f=e}},9),n.link("../../../../client/components/basic/VerticalBar",{default(e){C=e}},10),n.link("./TagsPage",{default(e){w=e}},11),n.link("./EditTag",{TagEditWithData(e){v=e},TagNew(e){y=e}},12),n.link("../../../../client/omnichannel/DeleteWarningModal",{default(e){b=e}},13),n.link("../../../../client/contexts/ModalContext",{useSetModal(e){P=e}},14),n.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch(e){D=e}},15);const R=e=>"asc"===e?1:-1,N=(e,t)=>{let{text:n,itemsPerPage:l,current:o}=e,[c,r]=t;return i(()=>a({fields:JSON.stringify({name:1}),text:n,sort:JSON.stringify({[c]:R(r),usernames:"name"===c?R(r):void 0})},l&&{count:l},{},o&&{offset:o}),[n,l,o,c,r])};function S(){const e=g(),t=p("manage-livechat-tags"),[n,a]=s({text:"",current:0,itemsPerPage:25}),[m,d]=s(["name","asc"]),h=l(n,500),b=l(m,500),P=N(h,b),D=f("omnichannel-tags"),R=T("context"),S=T("id"),_=o(e=>{const[t,n]=m;d(t!==e?[e,"asc"]:[e,"asc"===n?"desc":"asc"])}),B=o(e=>()=>D.push({context:"edit",id:e})),{data:z,reload:I}=x("livechat/tags.list",P)||{},A=i(()=>[c.createElement(k,{key:"name",direction:m[1],active:"name"===m[0],onClick:_,sort:"name",w:"x120"},e("Name")),c.createElement(k,{key:"description",direction:m[1],active:"description"===m[0],onClick:_,sort:"description",w:"x200"},e("Description")),c.createElement(k,{key:"remove",w:"x40"},e("Remove"))].filter(Boolean),[m,_,e]),H=r(e=>{let{_id:t,name:n,description:a}=e;return(c.createElement(u.Row,{key:t,tabIndex:0,role:"link",onClick:B(t),action:!0,"qa-user-id":t},c.createElement(u.Cell,{withTruncatedText:!0},n),c.createElement(u.Cell,{withTruncatedText:!0},a),c.createElement(M,{_id:t,reload:I})))},[I,B]),J=r(()=>{if(!R)return"";const t=()=>{D.push({})};return(c.createElement(C,{className:"contextual-bar"},c.createElement(C.Header,null,"edit"===R&&e("Edit_Tag"),"new"===R&&e("New_Tag"),c.createElement(C.Close,{onClick:t})),"edit"===R&&c.createElement(v,{tagId:S,reload:I}),"new"===R&&c.createElement(y,{reload:I})))},[e,R,S,D,I]);return t?c.createElement(w,{setParams:a,params:n,onHeaderClick:_,data:z,useQuery:N,reload:I,header:A,renderRow:H,title:"Tags"},c.createElement(J,null)):c.createElement(E,null)}n.exportDefault(S)}

