function module(e,t,n){let i,a,r,l,o,c,s,u,m,d,k,x,p,E,h,y,C,f,P,T,g,w,v,b,M;function D(e){let{_id:t,reload:n}=e;const i=E("livechat:removePriority"),a=b(),o=M(),c=x(),s=r(async()=>{try{await i(t)}catch(e){console.log(e)}n()}),k=r(e=>{e.stopPropagation();const t=async()=>{try{await s(),o({type:"success",message:c("Priority_removed")})}catch(e){o({type:"error",message:e})}a()};a(l.createElement(v,{onDelete:t,onCancel:()=>a()}))});return l.createElement(u.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},l.createElement(d,{small:!0,ghost:!0,title:c("Remove"),onClick:k},l.createElement(m,{name:"trash",size:"x16"})))}n.link("@babel/runtime/helpers/objectSpread2",{default(e){i=e}},0),n.export({RemovePriorityButton:()=>D}),n.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){a=e},useMutableCallback(e){r=e}},0),n.link("react",{default(e){l=e},useMemo(e){o=e},useCallback(e){c=e},useState(e){s=e}},1),n.link("@rocket.chat/fuselage",{Table(e){u=e},Icon(e){m=e},Button(e){d=e}},2),n.link("../../../../client/components/GenericTable",{Th(e){k=e}},3),n.link("../../../../client/contexts/TranslationContext",{useTranslation(e){x=e}},4),n.link("../../../../client/hooks/useEndpointDataExperimental",{useEndpointDataExperimental(e){p=e}},5),n.link("../../../../client/contexts/ServerContext",{useMethod(e){E=e}},6),n.link("../../../../client/contexts/AuthorizationContext",{usePermission(e){h=e}},7),n.link("../../../../client/components/NotAuthorizedPage",{default(e){y=e}},8),n.link("../../../../client/contexts/RouterContext",{useRouteParameter(e){C=e},useRoute(e){f=e}},9),n.link("../../../../client/components/basic/VerticalBar",{default(e){P=e}},10),n.link("./PrioritiesPage",{default(e){T=e}},11),n.link("./EditPriority",{PriorityEditWithData(e){g=e},PriorityNew(e){w=e}},12),n.link("../../../../client/omnichannel/DeleteWarningModal",{default(e){v=e}},13),n.link("../../../../client/contexts/ModalContext",{useSetModal(e){b=e}},14),n.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch(e){M=e}},15);const R=e=>"asc"===e?1:-1,_=(e,t)=>{let{text:n,itemsPerPage:a,current:r}=e,[l,c]=t;return o(()=>i({fields:JSON.stringify({name:1}),text:n,sort:JSON.stringify({[l]:R(c),usernames:"name"===l?R(c):void 0})},a&&{count:a},{},r&&{offset:r}),[n,a,r,l,c])};function I(){const e=x(),t=h("manage-livechat-priorities"),[n,i]=s({text:"",current:0,itemsPerPage:25}),[m,d]=s(["name","asc"]),E=a(n,500),v=a(m,500),b=_(E,v),M=f("omnichannel-priorities"),R=C("context"),I=C("id"),N=r(e=>{const[t,n]=m;d(t!==e?[e,"asc"]:[e,"asc"===n?"desc":"asc"])}),S=r(e=>()=>M.push({context:"edit",id:e})),{data:B,reload:z}=p("livechat/priorities.list",b)||{},A=o(()=>[l.createElement(k,{key:"name",direction:m[1],active:"name"===m[0],onClick:N,sort:"name",w:"x120"},e("Name")),l.createElement(k,{key:"description",direction:m[1],active:"description"===m[0],onClick:N,sort:"description",w:"x200"},e("Description")),l.createElement(k,{key:"dueTimeInMinutes",direction:m[1],active:"dueTimeInMinutes"===m[0],onClick:N,sort:"dueTimeInMinutes",w:"x120"},e("Estimated_due_time")),l.createElement(k,{key:"remove",w:"x40"},e("Remove"))].filter(Boolean),[m,N,e]),H=c(t=>{let{_id:n,name:i,description:a,dueTimeInMinutes:r}=t;return(l.createElement(u.Row,{key:n,tabIndex:0,role:"link",onClick:S(n),action:!0,"qa-user-id":n},l.createElement(u.Cell,{withTruncatedText:!0},i),l.createElement(u.Cell,{withTruncatedText:!0},a),l.createElement(u.Cell,{withTruncatedText:!0},r,"  ",e("minutes")),l.createElement(D,{_id:n,reload:z})))},[z,S,e]),J=c(()=>{if(!R)return"";const t=()=>{M.push({})};return(l.createElement(P,{className:"contextual-bar"},l.createElement(P.Header,null,"edit"===R&&e("Edit_Priority"),"new"===R&&e("New_Priority"),l.createElement(P.Close,{onClick:t})),"edit"===R&&l.createElement(g,{priorityId:I,reload:z}),"new"===R&&l.createElement(w,{reload:z})))},[e,R,I,M,z]);return t?l.createElement(T,{setParams:i,params:n,onHeaderClick:N,data:B,useQuery:_,reload:z,header:A,renderRow:H,title:"Priorities"},l.createElement(J,null)):l.createElement(y,null)}n.exportDefault(I)}

