function module(e,t,n){var r,l,a,o,i,s,c,u,m,p,f,d,E,h,g,v,_,k,x;function w(){var e,t=h(),n=g(),w=u(p(!0)),y=a(w,2),C=y[0],b=y[1],S=u(p()),T=a(S,2),F=T[0],I=T[1],P=u(p([])),D=a(P,2),O=D[0],L=D[1],M=_("GET","getCurrentImportOperation"),R=_("GET","getLatestImportOperations"),B=_("POST","downloadPendingFiles"),G=v("admin-import-new"),H=v("admin-import-progress");f((function(){var e;(function(){function e(){var e,r,a;return l.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:return b(!0),o.prev=1,o.next=4,l.awrap(M());case 4:e=o.sent,r=e.operation,I(r),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(1),n({type:"error",message:t("Failed_To_Load_Import_Operation")});case 12:return o.prev=12,o.next=15,l.awrap(R());case 15:a=o.sent,L(a),o.next=22;break;case 19:o.prev=19,o.t1=o.catch(12),n({type:"error",message:t("Failed_To_Load_Import_History")});case 22:b(!1);case 23:case"end":return o.stop()}}return o}(),null,null,[[1,9],[12,19]],Promise)}return e})()()}),[n,M,R,I,L,b,t]);var N=d((function(){return null==O?void 0:O.some((function(e){var t=e.importerKey,n=e.status;return"slack"===t&&n===k.DONE}))}),[O]),A=function(){G.push()},U=function(){function e(){var e,r;return l.async(function(){function a(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,b(!0),a.next=4,l.awrap(B());case 4:if(e=a.sent,!(r=e.count)){a.next=10;break}return n({type:"info",message:t("No_files_left_to_download")}),b(!1),a.abrupt("return");case 10:n({type:"info",message:t("File_Downloads_Started")}),H.push(),a.next=19;break;case 14:a.prev=14,a.t0=a.catch(0),console.error(a.t0),n({type:"error",message:t("Failed_To_Download_Files")}),b(!1);case 19:case"end":return a.stop()}}return a}(),null,null,[[0,14]],Promise)}return e}(),K=c("(max-width: 768px)");return m.createElement(E,null,m.createElement(E.Header,{title:t("Import")},m.createElement(i,null,m.createElement(o,{primary:!0,disabled:C,onClick:A},t("Import_New_File")),N&&m.createElement(o,{disabled:C,onClick:U},t("Download_Pending_Files")))),m.createElement(E.ScrollableContentWithShadow,null,m.createElement(s,{fixed:!0},m.createElement(s.Head,null,m.createElement(s.Row,null,m.createElement(s.Cell,{is:"th",rowSpan:2,width:"x140"},t("Import_Type")),m.createElement(s.Cell,{is:"th",rowSpan:2},t("Last_Updated")),!K&&m.createElement(m.Fragment,null,m.createElement(s.Cell,{is:"th",rowSpan:2},t("Last_Status")),m.createElement(s.Cell,{is:"th",rowSpan:2},t("File")),m.createElement(s.Cell,{is:"th",align:"center",colSpan:4,width:"x320"},t("Counters")))),!K&&m.createElement(s.Row,null,m.createElement(s.Cell,{is:"th",align:"center"},t("Users")),m.createElement(s.Cell,{is:"th",align:"center"},t("Channels")),m.createElement(s.Cell,{is:"th",align:"center"},t("Messages")),m.createElement(s.Cell,{is:"th",align:"center"},t("Total")))),m.createElement(s.Body,null,C?Array.from({length:20},(function(e,t){return m.createElement(x.Skeleton,{small:K,key:t})})):m.createElement(m.Fragment,null,(null==F?void 0:F.valid)&&m.createElement(x,r({},F,{small:K})),null==O?void 0:null===(e=O.filter((function(e){var t=e._id;return(null==F?void 0:F._id)!==t||!(null==F?void 0:F.valid)})))||void 0===e?void 0:e.map((function(e){return m.createElement(x,r({key:e._id},e,{valid:!1,small:K}))})))))))}n.link("@babel/runtime/helpers/extends",{default:function(e){r=e}},0),n.link("@babel/runtime/regenerator",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},2),n.link("@rocket.chat/fuselage",{Button:function(e){o=e},ButtonGroup:function(e){i=e},Table:function(e){s=e}},0),n.link("@rocket.chat/fuselage-hooks",{useMediaQuery:function(e){c=e},useSafely:function(e){u=e}},1),n.link("react",{default:function(e){m=e},useState:function(e){p=e},useEffect:function(e){f=e},useMemo:function(e){d=e}},2),n.link("../../components/basic/Page",{default:function(e){E=e}},3),n.link("../../contexts/TranslationContext",{useTranslation:function(e){h=e}},4),n.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){g=e}},5),n.link("../../contexts/RouterContext",{useRoute:function(e){v=e}},6),n.link("../../contexts/ServerContext",{useEndpoint:function(e){_=e}},7),n.link("../../../app/importer/lib/ImporterProgressStep",{ProgressStep:function(e){k=e}},8),n.link("./ImportOperationSummary",{default:function(e){x=e}},9),n.exportDefault(w)}

