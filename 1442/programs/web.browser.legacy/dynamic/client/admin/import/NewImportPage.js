function module(e,n,t){var r,l,a,o,i,u,c,s,m,f,p,d,h,_,g,E,x,v,y,k,F,b,S,w,I,T,C,P,R,U,B;function L(){var e=S(),n=I(),t=P(),L=x(y(!1)),M=l(L,2),z=M[0],A=M[1],H=x(y("upload")),K=l(H,2),D=K[0],q=K[1],N=C("importerKey"),O=k((function(){return U.get(N)}),[N]),W=w("FileUpload_MaxFileSize"),G=T("admin-import"),j=T("admin-import-new"),J=T("admin-import-prepare"),Q=R("POST","uploadImportFile"),V=R("POST","downloadPublicImportFile");F((function(){N&&!O&&j.replace()}),[O,N,j]);var X=B(),Y=function(){G.push()},Z=function(e){j.replace({importerKey:e})},$=function(e){q(e)},ee=y([]),ne=l(ee,2),te=ne[0],re=ne[1],le=function(){function e(e){var n;return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:e=e.originalEvent||e,(n=e.target.files)&&0!==n.length||(n=(null!=e.dataTransfer?e.dataTransfer.files:void 0)||[]),re(Array.from(n));case 4:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return e}(),ae=function(e){return function(){re((function(n){return n.filter((function(n){return n!==e}))}))}},oe=function(){function l(){return r.async(function(){function l(l){for(;;)switch(l.prev=l.next){case 0:return A(!0),l.prev=1,l.next=4,r.awrap(Promise.all(Array.from(te,(function(l){return new Promise((function(a){var o=new FileReader;o.readAsDataURL(l),o.onloadend=function(){function i(){return r.async(function(){function i(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,r.awrap(Q({binaryContent:o.result.split(";base64,")[1],contentType:l.type,fileName:l.name,importerKey:N}));case 3:n({type:"success",message:e("File_uploaded_successfully")}),i.next=9;break;case 6:i.prev=6,i.t0=i.catch(0),t(i.t0,e("Failed_To_upload_Import_File"));case 9:return i.prev=9,a(),i.finish(9);case 12:case"end":return i.stop()}}return i}(),null,null,[[0,6,9,12]],Promise)}return i}(),o.onerror=function(){return a()}}))}))));case 4:J.push();case 5:return l.prev=5,A(!1),l.finish(5);case 8:case"end":return l.stop()}}return l}(),null,null,[[1,,5,8]],Promise)}return l}(),ie=x(y("")),ue=l(ie,2),ce=ue[0],se=ue[1],me=function(e){se(e.currentTarget.value)},fe=function(){function l(){return r.async(function(){function l(l){for(;;)switch(l.prev=l.next){case 0:return A(!0),l.prev=1,l.next=4,r.awrap(V({importerKey:N,fileUrl:ce}));case 4:n({type:"success",message:e("Import_requested_successfully")}),J.push(),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(1),t(l.t0,e("Failed_To_upload_Import_File"));case 11:return l.prev=11,A(!1),l.finish(11);case 14:case"end":return l.stop()}}return l}(),null,null,[[1,8,11,14]],Promise)}return l}(),pe=x(y("")),de=l(pe,2),he=de[0],_e=de[1],ge=function(e){_e(e.currentTarget.value)},Ee=function(){function l(){return r.async(function(){function l(l){for(;;)switch(l.prev=l.next){case 0:return A(!0),l.prev=1,l.next=4,r.awrap(V({importerKey:N,fileUrl:he}));case 4:n({type:"success",message:e("Import_requested_successfully")}),J.push(),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(1),t(l.t0,e("Failed_To_upload_Import_File"));case 11:return l.prev=11,A(!1),l.finish(11);case 14:case"end":return l.stop()}}return l}(),null,null,[[1,8,11,14]],Promise)}return l}(),xe=E(),ve=E(),ye=E(),ke="upload"===D&&oe||"url"===D&&fe||"path"===D&&Ee;return v.createElement(b,{className:"page-settings"},v.createElement(b.Header,{title:e("Import_New_File")},v.createElement(i,null,v.createElement(o,{ghost:!0,onClick:Y},v.createElement(m,{name:"back"})," ",e("Back_to_imports")),O&&v.createElement(o,{primary:!0,minHeight:"x40",disabled:z,onClick:ke},z?v.createElement(_,{inheritColor:!0}):e("Import")))),v.createElement(b.ScrollableContentWithShadow,null,v.createElement(a,{marginInline:"auto",marginBlock:"neg-x24",width:"full",maxWidth:"x580"},v.createElement(f,{block:"x24"},v.createElement(s,null,v.createElement(s.Label,{alignSelf:"stretch",htmlFor:xe},e("Import_Type")),v.createElement(s.Row,null,v.createElement(p,{id:xe,value:N,disabled:z,placeholder:e("Select_an_option"),onChange:Z,options:U.getAll().map((function(n){var t=n.key,r=n.name;return[t,e(r)]}))})),O&&v.createElement(s.Hint,null,e("Importer_From_Description",{from:e(O.name)}))),O&&v.createElement(s,null,v.createElement(s.Label,{alignSelf:"stretch",htmlFor:ve},e("File_Type")),v.createElement(s.Row,null,v.createElement(p,{id:ve,value:D,disabled:z,placeholder:e("Select_an_option"),onChange:$,options:[["upload",e("Upload")],["url",e("Public_URL")],["path",e("Server_File_Path")]]}))),O&&v.createElement(v.Fragment,null,"upload"===D&&v.createElement(v.Fragment,null,W>0?v.createElement(u,{type:"warning",marginBlock:"x16"},e("Importer_Upload_FileSize_Message",{maxFileSize:X(W)})):v.createElement(u,{type:"info",marginBlock:"x16"},e("Importer_Upload_Unlimited_FileSize")),v.createElement(s,null,v.createElement(s.Label,{alignSelf:"stretch",htmlFor:ye},e("Importer_Source_File")),v.createElement(s.Row,null,v.createElement(d,{type:"file",id:ye,onChange:le})),(null==te?void 0:te.length)>0&&v.createElement(s.Row,null,te.map((function(e,n){return v.createElement(c,{key:n,onClick:ae(e)},e.name)}))))),"url"===D&&v.createElement(s,null,v.createElement(s.Label,{alignSelf:"stretch",htmlFor:ye},e("File_URL")),v.createElement(s.Row,null,v.createElement(g,{id:ye,value:ce,onChange:me}))),"path"===D&&v.createElement(s,null,v.createElement(s.Label,{alignSelf:"stretch",htmlFor:ye},e("File_Path")),v.createElement(s.Row,null,v.createElement(h,{id:ye,value:he,onChange:ge}))))))))}t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},1),t.link("@rocket.chat/fuselage",{Box:function(e){a=e},Button:function(e){o=e},ButtonGroup:function(e){i=e},Callout:function(e){u=e},Chip:function(e){c=e},Field:function(e){s=e},Icon:function(e){m=e},Margins:function(e){f=e},Select:function(e){p=e},InputBox:function(e){d=e},TextInput:function(e){h=e},Throbber:function(e){_=e},UrlInput:function(e){g=e}},0),t.link("@rocket.chat/fuselage-hooks",{useUniqueId:function(e){E=e},useSafely:function(e){x=e}},1),t.link("react",{default:function(e){v=e},useState:function(e){y=e},useMemo:function(e){k=e},useEffect:function(e){F=e}},2),t.link("../../components/basic/Page",{default:function(e){b=e}},3),t.link("../../contexts/TranslationContext",{useTranslation:function(e){S=e}},4),t.link("../../contexts/SettingsContext",{useSetting:function(e){w=e}},5),t.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){I=e}},6),t.link("../../contexts/RouterContext",{useRoute:function(e){T=e},useRouteParameter:function(e){C=e}},7),t.link("./useErrorHandler",{useErrorHandler:function(e){P=e}},8),t.link("../../contexts/ServerContext",{useEndpoint:function(e){R=e}},9),t.link("../../../app/importer/client/index",{Importers:function(e){U=e}},10),t.link("../../hooks/useFormatMemorySize",{useFormatMemorySize:function(e){B=e}},11),t.exportDefault(L)}

