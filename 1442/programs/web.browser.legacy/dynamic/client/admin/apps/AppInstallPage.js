function module(e,n,t){var l,a,r,u,o,i,c,s,p,f,m,d,x,k,E,h,b,v,F,C,_,g;t.link("@babel/runtime/regenerator",{default:function(e){l=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},1),t.link("@rocket.chat/fuselage",{Button:function(e){r=e},ButtonGroup:function(e){u=e},Icon:function(e){o=e},Field:function(e){i=e},FieldGroup:function(e){c=e},TextInput:function(e){s=e},Throbber:function(e){p=e}},0),t.link("react",{default:function(e){f=e},useCallback:function(e){m=e},useEffect:function(e){d=e},useState:function(e){x=e}},1),t.link("../../components/basic/Page",{default:function(e){k=e}},2),t.link("../../contexts/RouterContext",{useRoute:function(e){E=e},useQueryStringParameter:function(e){h=e}},3),t.link("../../contexts/ServerContext",{useEndpoint:function(e){b=e},useUpload:function(e){v=e}},4),t.link("../../contexts/TranslationContext",{useTranslation:function(e){F=e}},5),t.link("../../hooks/useFileInput",{useFileInput:function(e){C=e}},6),t.link("../../hooks/useForm",{useForm:function(e){_=e}},7),t.link("./helpers",{handleInstallError:function(e){g=e}},8);var I="https://rocket.chat/apps/package.zip";function w(){var e=F(),n=E("admin-apps"),t=h("id"),w=h("url"),S=x(!1),T=a(S,2),y=T[0],A=T[1],D=t?"/apps/"+t:"/apps",P=b("POST",D),R=v(D),U=_({file:{},url:w}),z=U.values,B=U.handlers,G=z.file,L=z.url,H=!!L||!!G.name,O=B.handleFile,Q=B.handleUrl;d((function(){w&&Q(w)}),[w,Q]);var W=C(O,"app"),j,q=a(W,1)[0],J=m(function(){function e(){var e,t,a,r,u;return l.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:if(A(!0),o.prev=1,!L){o.next=9;break}return o.next=5,l.awrap(P({url:L}));case 5:return e=o.sent,t=e.app,n.push({context:"details",id:t.id}),o.abrupt("return");case 9:return(a=new FormData).append("app",G,G.name),o.next=13,l.awrap(R(a));case 13:r=o.sent,u=r.app,n.push({context:"details",id:u.id}),o.next=21;break;case 18:o.prev=18,o.t0=o.catch(1),g(o.t0);case 21:return o.prev=21,A(!1),o.finish(21);case 24:case"end":return o.stop()}}return o}(),null,null,[[1,18,21,24]],Promise)}return e}(),[L,n,P,G,R]),K=function(){n.push()};return f.createElement(k,{flexDirection:"column"},f.createElement(k.Header,{title:e("App_Installation")}),f.createElement(k.ScrollableContent,null,f.createElement(c,{display:"flex",flexDirection:"column",alignSelf:"center",maxWidth:"x600",w:"full"},f.createElement(i,null,f.createElement(i.Label,null,e("App_Url_to_Install_From")),f.createElement(i.Row,null,f.createElement(s,{placeholder:I,value:L,onChange:Q,addon:f.createElement(o,{name:"permalink",size:"x20"})}))),f.createElement(i,null,f.createElement(i.Label,null,e("App_Url_to_Install_From_File")),f.createElement(i.Row,null,f.createElement(s,{value:G.name||"",addon:f.createElement(r,{small:!0,primary:!0,onClick:q,mb:"neg-x4",mie:"neg-x8"},f.createElement(o,{name:"upload",size:"x12"}),e("Browse_Files"))}))),f.createElement(i,null,f.createElement(u,null,f.createElement(r,{disabled:!H||y,onClick:J},!y&&e("Install"),y&&f.createElement(p,{inheritColor:!0})),f.createElement(r,{onClick:K},e("Cancel")))))))}t.exportDefault(w)}

