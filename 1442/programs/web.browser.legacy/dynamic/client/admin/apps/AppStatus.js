function module(e,n,t){var r,a,u,c,o,i,l,s,f,p,d,m,h,x,b,k,v,g,w,E,y,C;t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){a=e}},1),t.link("@babel/runtime/regenerator",{default:function(e){u=e}},2),t.link("@rocket.chat/fuselage",{Box:function(e){c=e},Button:function(e){o=e},Icon:function(e){i=e},Throbber:function(e){l=e}},0),t.link("@rocket.chat/fuselage-hooks",{useSafely:function(e){s=e}},1),t.link("react",{default:function(e){f=e},useCallback:function(e){p=e},useState:function(e){d=e},memo:function(e){m=e}},2),t.link("../../contexts/TranslationContext",{useTranslation:function(e){h=e}},3),t.link("./helpers",{appButtonProps:function(e){x=e},appStatusSpanProps:function(e){b=e},handleAPIError:function(e){k=e},warnStatusChange:function(e){v=e}},4),t.link("../../../app/apps/client/orchestrator",{Apps:function(e){g=e}},5),t.link("./IframeModal",{IframeModal:function(e){w=e}},6),t.link("./CloudLoginModal",{CloudLoginModal:function(e){E=e}},7),t.link("../../contexts/ModalContext",{useSetModal:function(e){y=e}},8),t.link("../../contexts/ServerContext",{useMethod:function(e){C=e}},9);var S=function(){function e(e){var n,t,r,a,c;return u.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:return n=e.id,t=e.name,r=e.version,o.prev=1,o.next=4,u.awrap(g.installApp(n,r));case 4:a=o.sent,c=a.status,v(t,c),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(1),k(o.t0);case 12:case"end":return o.stop()}}return o}(),null,null,[[1,9]],Promise)}return e}(),P={purchase:S,install:S,update:function(){function e(e){var n,t,r,a,c;return u.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:return n=e.id,t=e.name,r=e.version,o.prev=1,o.next=4,u.awrap(g.updateApp(n,r));case 4:a=o.sent,c=a.status,v(t,c),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(1),k(o.t0);case 12:case"end":return o.stop()}}return o}(),null,null,[[1,9]],Promise)}return e}()},M=m((function(e){var n=e.app,t=e.showStatus,m=void 0===t||t,v=a(e,["app","showStatus"]),S=h(),M=s(d()),I=r(M,2),T=I[0],A=I[1],B=y(),D=x(n),L=!D&&b(n),U=(null==D?void 0:D.action)||"",j=p((function(){B(null),P[U](n).then((function(){A(!1)}))}),[B,U,n,A]),z=p((function(){A(!1),B(null)}),[A,B]),F=C("cloud:checkUserLoggedIn"),H=p(function(){function e(e){var t,r;return u.async(function(){function a(a){for(;;)switch(a.prev=a.next){case 0:return e.preventDefault(),e.stopPropagation(),A(!0),a.next=5,u.awrap(F());case 5:if(t=a.sent){a.next=10;break}return A(!1),B(f.createElement(E,null)),a.abrupt("return");case 10:if("purchase"!==U){a.next=22;break}return a.prev=11,a.next=14,u.awrap(g.buildExternalUrl(n.id,n.purchaseType,!1));case 14:r=a.sent,B(f.createElement(w,{url:r.url,cancel:z,confirm:j})),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(11),k(a.t0);case 21:return a.abrupt("return");case 22:j();case 23:case"end":return a.stop()}}return a}(),null,null,[[11,18]],Promise)}return e}(),[A,F,U,j,B,n.id,n.purchaseType,z]);return f.createElement(c,v,D&&f.createElement(o,{primary:!0,disabled:T,invisible:!m&&!T,minHeight:"x40",onClick:H},T?f.createElement(l,{inheritColor:!0}):f.createElement(f.Fragment,null,D.icon&&f.createElement(i,{name:D.icon}),S(D.label))),L&&f.createElement(c,{color:"Disabled"===L.label?"warning":"hint",display:"flex",alignItems:"center"},f.createElement(i,{size:"x20",name:L.icon,mie:"x4"}),S(L.label)))}));t.exportDefault(M)}

