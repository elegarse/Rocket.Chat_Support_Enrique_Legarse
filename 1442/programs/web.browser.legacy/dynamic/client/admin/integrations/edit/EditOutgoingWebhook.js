function module(e,n,t){var r,o,i,l,a,u,s,c,d,f,m,p,g,v,x,E,k,b,h,y,C,w,D,S,A,I;function M(e){var n=e.integrationId,t=a(e,["integrationId"]),r=k(),o=c(),d=l(o,2),f=d[0],g=d[1],v=b("integrations.get",s((function(){return{integrationId:n}}),[n,f])),x=v.data,E=v.state,y=v.error,C=function(){return g(new Date)};return E===h.LOADING?u.createElement(m,i({w:"full",pb:"x24"},t),u.createElement(p,{mbe:"x4"}),u.createElement(p,{mbe:"x8"}),u.createElement(p,{mbe:"x4"}),u.createElement(p,{mbe:"x8"}),u.createElement(p,{mbe:"x4"}),u.createElement(p,{mbe:"x8"})):y?u.createElement(m,i({mbs:"x16"},t),r("Oops_page_not_found")):u.createElement(W,i({data:x.integration,onChange:C},t))}t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},0),t.link("@babel/runtime/regenerator",{default:function(e){o=e}},1),t.link("@babel/runtime/helpers/extends",{default:function(e){i=e}},2),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},3),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){a=e}},4),t.export({default:function(){return M}}),t.link("react",{default:function(e){u=e},useMemo:function(e){s=e},useState:function(e){c=e},useCallback:function(e){d=e}},0),t.link("@rocket.chat/fuselage",{Field:function(e){f=e},Box:function(e){m=e},Skeleton:function(e){p=e},Margins:function(e){g=e},Button:function(e){v=e}},1),t.link("./EditIntegrationsPage",{SuccessModal:function(e){x=e},DeleteWarningModal:function(e){E=e}},2),t.link("../../../contexts/TranslationContext",{useTranslation:function(e){k=e}},3),t.link("../../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental:function(e){b=e},ENDPOINT_STATES:function(e){h=e}},4),t.link("../../../hooks/useEndpointAction",{useEndpointAction:function(e){y=e}},5),t.link("../../../contexts/RouterContext",{useRoute:function(e){C=e}},6),t.link("../../../contexts/ServerContext",{useMethod:function(e){w=e}},7),t.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){D=e}},8),t.link("../../../contexts/ModalContext",{useSetModal:function(e){S=e}},9),t.link("../OutgoiongWebhookForm",{default:function(e){A=e}},10),t.link("../../../hooks/useForm",{useForm:function(e){I=e}},11);var T=function(e){var n,t,r,o,i,l,a,u,s,c,d,f,m,p,g,v,x,E,k;return{enabled:null===(n=e.enabled)||void 0===n||n,impersonateUser:e.impersonateUser,event:e.event,token:e.token,urls:null!==(t=e.urls.join("\n"))&&void 0!==t?t:"",triggerWords:null!==(r=null===(o=e.triggerWords)||void 0===o?void 0:o.join("; "))&&void 0!==r?r:"",targetRoom:null!==(i=e.targetRoom)&&void 0!==i?i:"",channel:null!==(l=e.channel.join(", "))&&void 0!==l?l:"",username:null!==(a=e.username)&&void 0!==a?a:"",name:null!==(u=e.name)&&void 0!==u?u:"",alias:null!==(s=e.alias)&&void 0!==s?s:"",avatarUrl:null!==(c=e.avatarUrl)&&void 0!==c?c:"",emoji:null!==(d=e.emoji)&&void 0!==d?d:"",scriptEnabled:null!==(f=e.scriptEnabled)&&void 0!==f&&f,script:null!==(m=e.script)&&void 0!==m?m:"",retryFailedCalls:null===(p=e.retryFailedCalls)||void 0===p||p,retryCount:null!==(g=e.retryCount)&&void 0!==g?g:5,retryDelay:null!==(v=e.retryDelay)&&void 0!==v?v:"power-of-ten",triggerrWordAnywhere:null!==(x=e.triggerrWordAnywhere)&&void 0!==x&&x,runOnEdits:null===(E=e.runOnEdits)||void 0===E||E}};function W(e){var n=e.data,t=e.onChange,l=e.setSaveAction,c=a(e,["data","onChange","setSaveAction"]),p=k(),b=D(),h=I(T(n)),M=h.handlers,W=h.values,_=h.reset,j=S(),O=w("updateOutgoingIntegration"),F=C("admin-integrations"),P=s((function(){return{type:"webhook-outgoing",integrationId:n._id}}),[n._id]),R=y("POST","integrations.remove",P),U=d((function(){var e=function(){return j()},n=function(){function n(){var n;return o.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.awrap(R());case 2:(n=t.sent).success&&j(u.createElement(x,{onClose:function(){e(),F.push({})}}));case 4:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return n}();j(u.createElement(E,{onDelete:n,onCancel:e}))}),[R,F]),G=W.urls,N=W.triggerWords,B=d(function(){function e(){return o.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.awrap(O(n._id,r({},W,{triggerWords:N.split(/\s*(?:;|$)\s*/),urls:G.split("\n")})));case 3:b({type:"success",message:p("Integration_updated")}),t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b({type:"error",message:e.t0});case 10:case"end":return e.stop()}}return e}(),null,null,[[0,7]],Promise)}return e}(),[n._id,b,W,t,O,p,N,G]),H=s((function(){return u.createElement(f,null,u.createElement(f.Row,{display:"flex",flexDirection:"column"},u.createElement(m,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},u.createElement(g,{inlineEnd:"x4"},u.createElement(v,{flexGrow:1,type:"reset",onClick:_},p("Reset")),u.createElement(v,{mie:"none",flexGrow:1,onClick:B},p("Save")))),u.createElement(v,{mbs:"x4",primary:!0,danger:!0,w:"full",onClick:U},p("Delete"))))}),[U,B,_,p]);return u.createElement(A,i({formValues:W,formHandlers:M,append:H},c))}}

