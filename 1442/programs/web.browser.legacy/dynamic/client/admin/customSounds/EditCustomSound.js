function module(e,n,t){var r,l,a,o,c,u,i,s,m,f,d,E,p,h,C,k,x,b,g,S,v,y,_,w,D,T,M,F,B,I;t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},1),t.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},2),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){o=e}},3),t.export({EditCustomSound:function(){return O}}),t.link("react",{default:function(e){c=e},useCallback:function(e){u=e},useState:function(e){i=e},useMemo:function(e){s=e},useEffect:function(e){m=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){f=e},Button:function(e){d=e},ButtonGroup:function(e){E=e},Margins:function(e){p=e},TextInput:function(e){h=e},Field:function(e){C=e},Icon:function(e){k=e},Skeleton:function(e){x=e},Throbber:function(e){b=e},InputBox:function(e){g=e},Modal:function(e){S=e}},1),t.link("../../contexts/TranslationContext",{useTranslation:function(e){v=e}},2),t.link("../../contexts/ServerContext",{useMethod:function(e){y=e}},3),t.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){_=e}},4),t.link("../../hooks/useFileInput",{useFileInput:function(e){w=e}},5),t.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental:function(e){D=e},ENDPOINT_STATES:function(e){T=e}},6),t.link("./lib",{validate:function(e){M=e},createSoundData:function(e){F=e}},7),t.link("../../contexts/ModalContext",{useSetModal:function(e){B=e}},8),t.link("../../components/basic/VerticalBar",{default:function(e){I=e}},9);var N=function(e){var n=e.onDelete,t=e.onCancel,r=o(e,["onDelete","onCancel"]),l=v();return c.createElement(S,r,c.createElement(S.Header,null,c.createElement(k,{color:"danger",name:"modal-warning",size:20}),c.createElement(S.Title,null,l("Are_you_sure")),c.createElement(S.Close,{onClick:t})),c.createElement(S.Content,{fontScale:"p1"},l("Custom_Sound_Delete_Warning")),c.createElement(S.Footer,null,c.createElement(E,{align:"end"},c.createElement(d,{ghost:!0,onClick:t},l("Cancel")),c.createElement(d,{primary:!0,danger:!0,onClick:n},l("Delete")))))},A=function(e){var n=e.onClose,t=o(e,["onClose"]),r=v();return c.createElement(S,t,c.createElement(S.Header,null,c.createElement(k,{color:"success",name:"checkmark-circled",size:20}),c.createElement(S.Title,null,r("Deleted")),c.createElement(S.Close,{onClick:n})),c.createElement(S.Content,{fontScale:"p1"},r("Custom_Sound_Has_Been_Deleted")),c.createElement(S.Footer,null,c.createElement(E,{align:"end"},c.createElement(d,{primary:!0,onClick:n},r("Ok")))))};function O(e){var n=e._id,t=e.cache,r=o(e,["_id","cache"]),l=s((function(){return{query:JSON.stringify({_id:n})}}),[n]),u=D("custom-sounds.list",l),i=u.data,m=u.state,p=u.error;return m===T.LOADING?c.createElement(f,{pb:"x20"},c.createElement(x,{mbs:"x8"}),c.createElement(g.Skeleton,{w:"full"}),c.createElement(x,{mbs:"x8"}),c.createElement(g.Skeleton,{w:"full"}),c.createElement(E,{stretch:!0,w:"full",mbs:"x8"},c.createElement(d,{disabled:!0},c.createElement(b,{inheritColor:!0})),c.createElement(d,{primary:!0,disabled:!0},c.createElement(b,{inheritColor:!0}))),c.createElement(E,{stretch:!0,w:"full",mbs:"x8"},c.createElement(d,{primary:!0,danger:!0,disabled:!0},c.createElement(b,{inheritColor:!0})))):p||!i||i.sounds.length<1?c.createElement(f,{fontScale:"h1",pb:"x20"},p):c.createElement(P,a({data:i.sounds[0]},r))}function P(e){var n=e.close,t=e.onChange,a=e.data,x=o(e,["close","onChange","data"]),b=v(),g=_(),S=a||{},D=S._id,T=S.name,O=a||{},P=i(""),R=l(P,2),q=R[0],z=R[1],H=i(),L=l(H,2),G=L[0],U=L[1],W=B();m((function(){z(T||""),U(O||"")}),[T,O,D]);var j=y("deleteCustomSound"),J=y("uploadCustomSound"),V=y("insertOrUpdateSound"),K=u((function(e){U(e)}),[]),Q=s((function(){return T!==q||O!==G}),[q,T,O,G]),X=u(function(){function e(e){var n,t,l,a;return r.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:if(n=F(e,q,{previousName:T,previousSound:O,_id:D}),0!==(t=M(n,e)).length){o.next=15;break}return o.prev=3,o.next=6,r.awrap(V(n));case 6:l=o.sent,o.next=12;break;case 9:o.prev=9,o.t0=o.catch(3),g({type:"error",message:o.t0});case 12:n._id=l,n.random=Math.round(1e3*Math.random()),e&&e!==O&&(g({type:"success",message:b("Uploading_file")}),(a=new FileReader).readAsBinaryString(e),a.onloadend=function(){try{return J(a.result,e.type,n),g({type:"success",message:b("File_uploaded")})}catch(t){g({type:"error",message:t})}});case 15:t.forEach((function(e){return g({type:"error",message:b("error-the-field-is-required",{field:b(e)})})}));case 16:case"end":return o.stop()}}return o}(),null,null,[[3,9]],Promise)}return e}(),[D,g,V,q,T,O,b,J]),Y=u(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:X(G),t();case 2:case"end":return e.stop()}}return e}(),null,null,null,Promise)}return e}(),[X,G,t]),Z=u(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.awrap(j(D));case 3:W((function(){return c.createElement(A,{onClose:function(){W(void 0),n(),t()}})})),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),g({type:"error",message:e.t0}),t();case 10:case"end":return e.stop()}}return e}(),null,null,[[0,6]],Promise)}return e}(),[D,n,j,g,t]),$=function(){return W((function(){return c.createElement(N,{onDelete:Z,onCancel:function(){return W(void 0)}})}))},ee=w(K,"audio/mp3"),ne,te=l(ee,1)[0];return c.createElement(I.ScrollableContent,x,c.createElement(C,null,c.createElement(C.Label,null,b("Name")),c.createElement(C.Row,null,c.createElement(h,{value:q,onChange:function(e){return z(e.currentTarget.value)},placeholder:b("Name")}))),c.createElement(C,null,c.createElement(C.Label,{alignSelf:"stretch"},b("Sound_File_mp3")),c.createElement(f,{display:"flex",flexDirection:"row",mbs:"none"},c.createElement(p,{inline:"x4"},c.createElement(d,{square:!0,onClick:te},c.createElement(k,{name:"upload",size:"x20"})),G&&G.name||"none"))),c.createElement(C,null,c.createElement(C.Row,null,c.createElement(E,{stretch:!0,w:"full"},c.createElement(d,{onClick:n},b("Cancel")),c.createElement(d,{primary:!0,onClick:Y,disabled:!Q},b("Save"))))),c.createElement(C,null,c.createElement(C.Row,null,c.createElement(E,{stretch:!0,w:"full"},c.createElement(d,{primary:!0,danger:!0,onClick:$},c.createElement(k,{name:"trash",mie:"x4"}),b("Delete"))))))}}

