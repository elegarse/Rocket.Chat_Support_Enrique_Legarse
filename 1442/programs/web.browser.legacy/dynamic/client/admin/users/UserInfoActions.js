function module(e,n,t){var r,o,c,i,a,s,l,u,f,m,d,h,p,_,x,v,b,k,E,C,g,y,w,A,S,T;t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){o=e}},1),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){c=e}},2),t.link("@babel/runtime/helpers/extends",{default:function(e){i=e}},3),t.link("@babel/runtime/regenerator",{default:function(e){a=e}},4),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){s=e}},5),t.export({UserInfoActions:function(){return O}}),t.link("@rocket.chat/fuselage",{Button:function(e){l=e},ButtonGroup:function(e){u=e},Icon:function(e){f=e},Menu:function(e){m=e},Modal:function(e){d=e},Option:function(e){h=e}},0),t.link("react",{default:function(e){p=e},useCallback:function(e){_=e},useMemo:function(e){x=e}},1),t.link("../../channel/hooks/useUserInfoActions",{useUserInfoActionsSpread:function(e){v=e}},2),t.link("../../components/ConfirmOwnerChangeWarningModal",{default:function(e){b=e}},3),t.link("../../components/basic/UserInfo",{default:function(e){k=e}},4),t.link("../../contexts/AuthorizationContext",{usePermission:function(e){E=e}},5),t.link("../../contexts/ModalContext",{useSetModal:function(e){C=e}},6),t.link("../../contexts/RouterContext",{useRoute:function(e){g=e}},7),t.link("../../contexts/ServerContext",{useMethod:function(e){y=e},useEndpoint:function(e){w=e}},8),t.link("../../contexts/SettingsContext",{useSetting:function(e){A=e}},9),t.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){S=e}},10),t.link("../../contexts/TranslationContext",{useTranslation:function(e){T=e}},11);var M=function(e){var n=e.onConfirm,t=e.onCancel,r=e.confirmText,o=e.text,c=s(e,["onConfirm","onCancel","confirmText","text"]),i=T();return p.createElement(d,c,p.createElement(d.Header,null,p.createElement(f,{color:"danger",name:"modal-warning",size:20}),p.createElement(d.Title,null,i("Are_you_sure")),p.createElement(d.Close,{onClick:t})),p.createElement(d.Content,{fontScale:"p1"},o),p.createElement(d.Footer,null,p.createElement(u,{align:"end"},p.createElement(l,{ghost:!0,onClick:t},i("Cancel")),p.createElement(l,{primary:!0,danger:!0,onClick:n},r))))},U=function(e){var n=e.onClose,t=e.title,r=e.text,o=s(e,["onClose","title","text"]),c=T();return p.createElement(d,o,p.createElement(d.Header,null,p.createElement(f,{color:"success",name:"checkmark-circled",size:20}),p.createElement(d.Title,null,t),p.createElement(d.Close,{onClick:n})),p.createElement(d.Content,{fontScale:"p1"},r),p.createElement(d.Footer,null,p.createElement(u,{align:"end"},p.createElement(l,{primary:!0,onClick:n},c("Ok")))))},O=function(e){var n=e.username,t=e._id,l=e.isActive,f=e.isAdmin,d=e.onChange,O=T(),P=C(),R=g("direct"),D=g("admin-users"),I=S(),B=E("create-d"),W=E("edit-other-user-info"),F=E("assign-admin-role"),K=E("edit-other-user-e2ee"),j=E("edit-other-user-active-status"),z=E("delete-user"),q=A("Accounts_TwoFactorAuthentication_Enforce_Password_Fallback"),G=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){function t(){var t,r,o,c,s;return a.async(function(){function l(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,a.awrap(e());case 3:return l.abrupt("return",l.sent);case 6:if(l.prev=6,l.t0=l.catch(0),"user-last-owner"!==(null===(t=l.t0.xhr)||void 0===t?void 0:null===(r=t.responseJSON)||void 0===r?void 0:r.errorType)){l.next=12;break}return o=l.t0.xhr.responseJSON.details,c=o.shouldChangeOwner,s=o.shouldBeRemoved,P(p.createElement(b,i({shouldChangeOwner:c,shouldBeRemoved:s},n,{onConfirm:function(){function n(){return a.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.awrap(e(!0));case 2:P();case 3:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return n}(),onCancel:function(){P(),d()}}))),l.abrupt("return");case 12:I({type:"error",message:l.t0});case 13:case"end":return l.stop()}}return l}(),null,null,[[0,6]],Promise)}return t}()},H=x((function(){return{userId:t}}),[t]),J=w("POST","users.delete"),L=A("Message_ErasureType"),N=G(function(){function e(){var e,n,t=arguments;return a.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:return(e=t.length>0&&void 0!==t[0]&&t[0])&&(H.confirmRelinquish=e),r.next=4,a.awrap(J(H));case 4:(n=r.sent).success?P(p.createElement(U,{title:O("Deleted"),text:O("User_has_been_deleted"),onClose:function(){P(),d()}})):P();case 6:case"end":return r.stop()}}return r}(),null,null,null,Promise)}return e}(),{contentTitle:O("Delete_User_Warning_"+L),confirmLabel:O("Delete")}),Y=_((function(){P(p.createElement(M,{onConfirm:N,onCancel:function(){return P()},text:O("Delete_User_Warning_"+L),confirmText:O("Delete")}))}),[N,L,P,O]),Q=y("setAdminStatus"),V=_((function(){try{var e;Q(t,!f),I({type:"success",message:O(f?"User_is_no_longer_an_admin":"User_is_now_an_admin")}),d()}catch(n){I({type:"error",message:n})}}),[t,I,f,d,Q,O]),X=w("POST","users.resetE2EKey"),Z=_(function(){function e(){var e;return a.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return P(),n.next=3,a.awrap(X({userId:t}));case 3:(e=n.sent)&&P(p.createElement(U,{title:O("Success"),text:O("Users_key_has_been_reset"),onClose:function(){P(),d()}}));case 5:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e}(),[X,d,P,O,t]),$=_((function(){P(p.createElement(M,{onConfirm:Z,onCancel:function(){return P()},text:O("E2E_Reset_Other_Key_Warning"),confirmText:O("Reset")}))}),[Z,O,P]),ee=x((function(){return{userId:t,activeStatus:!l}}),[t,l]),ne=l?"User_has_been_deactivated":"User_has_been_activated",te=w("POST","users.setActiveStatus"),re=G(function(){function e(){var e,n,t=arguments;return a.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:return(e=t.length>0&&void 0!==t[0]&&t[0])&&(ee.confirmRelinquish=e),r.prev=2,r.next=5,a.awrap(te(ee));case 5:(n=r.sent).success&&(I({type:"success",message:O(ne)}),d()),r.next=12;break;case 9:throw r.prev=9,r.t0=r.catch(2),r.t0;case 12:case"end":return r.stop()}}return r}(),null,null,[[2,9]],Promise)}return e}(),{confirmLabel:O("Yes_deactivate_it")}),oe=_((function(){return R.push({rid:n})}),[R,n]),ce=_((function(){return D.push({context:"edit",id:t})}),[t,D]),ie=x((function(){return c({},B&&{directMessage:{icon:"chat",label:O("Direct_Message"),action:oe}},{},W&&{editUser:{icon:"edit",label:O("Edit"),action:ce}},{},F&&{makeAdmin:{icon:"key",label:O(f?"Remove_Admin":"Make_Admin"),action:V}},{},K&&q&&{resetE2EEKey:{icon:"key",label:O("Reset_E2E_Key"),action:$}},{},z&&{delete:{icon:"trash",label:O("Delete"),action:Y}},{},j&&{changeActiveStatus:{icon:"user",label:O(l?"Deactivate":"Activate"),action:re}})}),[O,B,oe,W,ce,F,f,V,z,Y,j,l,re,q,K,$]),ae=v(ie),se=ae.actions,le=ae.menu,ue=le&&p.createElement(m,{mi:"x4",placement:"bottom-start",small:!1,ghost:!1,flexShrink:0,key:"menu",renderItem:function(e){var n=e.label,t=n.label,r=n.icon,o=s(e,["label"]);return(p.createElement(h,i({label:t,title:t,icon:r},o)))},options:le}),fe=x((function(){return[].concat(o(se.map((function(e){var n=r(e,2),t=n[0],o=n[1],c=o.label,i=o.icon,a=o.action;return(p.createElement(k.Action,{key:t,title:c,label:c,onClick:a,icon:i}))}))),[ue]).filter(Boolean)}),[se,ue]);return p.createElement(u,{flexGrow:0,justifyContent:"center"},fe)}}

