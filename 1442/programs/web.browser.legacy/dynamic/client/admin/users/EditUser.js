function module(e,n,t){var r,a,u,s,i,o,l,c,d,f,m,p,v,k,E,x,b,_,h,g,w,y,A;function T(e){var n=e.uid,t=s(e,["uid"]),r=k(),a=E("roles.list","")||{},l=a.data,c=a.state,d=a.error,f=E("users.info",o((function(){return{userId:n}}),[n])),m=f.data,p=f.state,b=f.error;return[p,c].includes(x.LOADING)?i.createElement(A,null):b||d?i.createElement(v,{m:"x16",type:"danger"},r("User_not_found")):i.createElement(S,u({data:m.user,roles:l.roles},t))}t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},1),t.link("@babel/runtime/helpers/extends",{default:function(e){u=e}},2),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){s=e}},3),t.export({EditUserWithData:function(){return T},EditUser:function(){return S}}),t.link("react",{default:function(e){i=e},useMemo:function(e){o=e},useState:function(e){l=e},useCallback:function(e){c=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){d=e},Field:function(e){f=e},Margins:function(e){m=e},Button:function(e){p=e},Callout:function(e){v=e}},1),t.link("../../contexts/TranslationContext",{useTranslation:function(e){k=e}},2),t.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental:function(e){E=e},ENDPOINT_STATES:function(e){x=e}},3),t.link("../../hooks/useEndpointAction",{useEndpointAction:function(e){b=e}},4),t.link("../../hooks/useEndpointUpload",{useEndpointUpload:function(e){_=e}},5),t.link("../../contexts/RouterContext",{useRoute:function(e){h=e}},6),t.link("../../components/basic/avatar/UserAvatarEditor",{default:function(e){g=e}},7),t.link("../../hooks/useForm",{useForm:function(e){w=e}},8),t.link("./UserForm",{default:function(e){y=e}},9),t.link("./Skeleton",{FormSkeleton:function(e){A=e}},10);var U=function(e){var n,t,r,a,u;return{roles:e.roles,name:null!==(n=e.name)&&void 0!==n?n:"",password:"",username:e.username,status:e.status,bio:null!==(t=e.bio)&&void 0!==t?t:"",nickname:null!==(r=e.nickname)&&void 0!==r?r:"",email:e.emails&&e.emails[0].address||"",verified:e.emails&&e.emails[0].verified||!1,setRandomPassword:!1,requirePasswordChange:e.setRandomPassword||!1,customFields:null!==(a=e.customFields)&&void 0!==a?a:{},statusText:null!==(u=e.statusText)&&void 0!==u?u:""}};function S(e){var n=e.data,t=e.roles,v=s(e,["data","roles"]),E=k(),x=l(),A=a(x,2),T=A[0],S=A[1],P=w(U(n)),C=P.values,O=P.handlers,F=P.reset,I=P.hasUnsavedChanges,R=h("admin-users"),D=c((function(e){return R.push({context:"info",id:e})}),[R]),N=o((function(){return{userId:n._id,data:C}}),[n._id,JSON.stringify(C)]),j=o((function(){return{userId:n._id,avatarUrl:T&&T.avatarUrl}}),[n._id,JSON.stringify(T)]),G=o((function(){return{userId:n._id}}),[n._id]),B=b("POST","users.update",N,E("User_updated_successfully")),J=_("users.setAvatar",j,E("Avatar_changed_successfully")),M=b("POST","users.setAvatar",j,E("Avatar_changed_successfully")),W=b("POST","users.resetAvatar",G,E("Avatar_changed_successfully")),q=c(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:if("reset"!==T){e.next=2;break}return e.abrupt("return",W());case 2:if(!T.avatarUrl){e.next=4;break}return e.abrupt("return",M());case 4:return T.set("userId",n._id),e.abrupt("return",J(T));case 6:case"end":return e.stop()}}return e}(),null,null,null,Promise)}return e}(),[T,W,J,M,n._id]),H=c(function(){function e(){var e;return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.awrap(B());case 2:if(!(e=t.sent).success){t.next=8;break}if(!T){t.next=7;break}return t.next=7,r.awrap(q());case 7:D(n._id);case 8:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return e}(),[T,n._id,D,B,q]),L=t.map((function(e){var n=e._id,t;return[n,e.description||n]})),V=I||T,z=o((function(){return i.createElement(g,{username:n.username,etag:n.avatarETag,setAvatarObj:S})}),[n.username,n.avatarETag]),K=o((function(){return i.createElement(f,null,i.createElement(f.Row,null,i.createElement(d,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},i.createElement(m,{inlineEnd:"x4"},i.createElement(p,{flexGrow:1,type:"reset",disabled:!V,onClick:F},E("Reset")),i.createElement(p,{mie:"none",flexGrow:1,disabled:!V,onClick:H},E("Save"))))))}),[H,V,F,E]);return i.createElement(y,u({formValues:C,formHandlers:O,availableRoles:L,prepend:z,append:K},v))}}

