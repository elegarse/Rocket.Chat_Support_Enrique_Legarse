function module(e,t,n){var a,r,o,l,c,u,i,s,d,f,m,p,x,E,D,k,C;n.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},0),n.link("@babel/runtime/regenerator",{default:function(e){r=e}},1),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){o=e}},2),n.link("react",{default:function(e){l=e},useCallback:function(e){c=e}},0),n.link("@rocket.chat/fuselage",{Accordion:function(e){u=e},Field:function(e){i=e},FieldGroup:function(e){s=e},ButtonGroup:function(e){d=e},Button:function(e){f=e},Icon:function(e){m=e},Box:function(e){p=e},Modal:function(e){x=e}},1),n.link("../../contexts/TranslationContext",{useTranslation:function(e){E=e}},2),n.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){D=e}},3),n.link("../../contexts/ServerContext",{useMethod:function(e){k=e}},4),n.link("../../contexts/ModalContext",{useSetModal:function(e){C=e}},5);var _=function(e){var t=e.onCancel,n=e.title,a=e.text,r=o(e,["onCancel","title","text"]),c=E();return l.createElement(x,r,l.createElement(x.Header,null,l.createElement(m,{color:"success",name:"circle-check",size:20}),l.createElement(x.Title,null,n),l.createElement(x.Close,{onClick:t})),l.createElement(x.Content,{fontScale:"p1"},l.createElement(p,{mb:"x8"},a)),l.createElement(x.Footer,null,l.createElement(d,{align:"end"},l.createElement(f,{primary:!0,onClick:t},c("Ok")))))},w=function(e){var t=e.onChange,n=o(e,["onChange"]),x=E(),w=C(),b=k("requestDataDownload"),h=D(),g=c((function(){return w(null)}),[w]),q=c(function(){function e(e){var t,n;return r.async(function(){function a(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.awrap(b({fullExport:e}));case 3:if(!(t=a.sent).requested){a.next=7;break}return w(l.createElement(_,{title:x("UserDataDownload_Requested"),text:x("UserDataDownload_Requested_Text",{pending_operations:t.pendingOperationsBeforeMyRequest}),onCancel:g})),a.abrupt("return");case 7:if(!t.exportOperation){a.next=14;break}if("completed"!==t.exportOperation.status){a.next=12;break}return n=t.url?x("UserDataDownload_CompletedRequestExistedWithLink_Text",{download_link:t.url}):x("UserDataDownload_CompletedRequestExisted_Text"),w(l.createElement(_,{title:x("UserDataDownload_Requested"),text:l.createElement(p,{dangerouslySetInnerHTML:{__html:n}}),onCancel:g})),a.abrupt("return");case 12:return w(l.createElement(_,{title:x("UserDataDownload_Requested"),text:x("UserDataDownload_RequestExisted_Text",{pending_operations:t.pendingOperationsBeforeMyRequest}),onCancel:g})),a.abrupt("return");case 14:w(l.createElement(_,{title:x("UserDataDownload_Requested"),onCancel:g})),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),h({type:"error",message:a.t0});case 20:case"end":return a.stop()}}return a}(),null,null,[[0,17]],Promise)}return e}(),[g,h,b,w,x]),M=c((function(){return q(!1)}),[q]),R=c((function(){return q(!0)}),[q]);return l.createElement(u.Item,a({title:x("My Data")},n),l.createElement(s,null,l.createElement(i,null,l.createElement(i.Row,null,l.createElement(d,{stretch:!0,flexGrow:1},l.createElement(f,{onClick:M},l.createElement(m,{name:"download",size:20}),x("Download_My_Data")),l.createElement(f,{onClick:R},l.createElement(m,{name:"download",size:20}),x("Export_My_Data")))))))};n.exportDefault(w)}

