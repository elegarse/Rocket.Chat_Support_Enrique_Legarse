function module(e,n,t){var a,r,l,i,u,o,s,c,m,f,d,E,h,x,g,b,v,p,w,C,k,_,S,y,D,G,R,T,U,A;t.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},0),t.link("@babel/runtime/regenerator",{default:function(e){r=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},2),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){i=e}},3),t.export({default:function(){return M}}),t.link("react",{default:function(e){u=e},useCallback:function(e){o=e},useMemo:function(e){s=e},useEffect:function(e){c=e},useState:function(e){m=e}},0),t.link("@rocket.chat/fuselage",{Field:function(e){f=e},FieldGroup:function(e){d=e},TextInput:function(e){E=e},TextAreaInput:function(e){h=e},Box:function(e){x=e},Icon:function(e){g=e},AnimatedVisibility:function(e){b=e},PasswordInput:function(e){v=e},Button:function(e){p=e},Grid:function(e){w=e},Margins:function(e){C=e}},1),t.link("@rocket.chat/fuselage-hooks",{useDebouncedCallback:function(e){k=e},useSafely:function(e){_=e}},2),t.link("../contexts/TranslationContext",{useTranslation:function(e){S=e}},3),t.link("../../app/utils/lib/isEmail.js",{isEmail:function(e){y=e}},4),t.link("../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){D=e}},5),t.link("../contexts/ServerContext",{useMethod:function(e){G=e}},6),t.link("../helpers/getUserEmailAddress",{getUserEmailAddress:function(e){R=e}},7),t.link("../components/basic/avatar/UserAvatarEditor",{UserAvatarEditor:function(e){T=e}},8),t.link("../components/CustomFieldsForm",{default:function(e){U=e}},9),t.link("../components/basic/userStatus/UserStatusMenu",{default:function(e){A=e}},10);var P=120;function M(e){var n=e.values,t=e.handlers,M=e.user,F=e.settings,I=e.onSaveStateChange,L=i(e,["values","handlers","user","settings","onSaveStateChange"]),N=S(),z=D(),B=G("checkUsernameAvailability"),H=G("getAvatarSuggestion"),j=G("sendConfirmationEmail"),V=m(),q=l(V,2),O=q[0],W=q[1],J=_(m()),K=l(J,2),Q=K[0],X=K[1],Y=F.allowRealNameChange,Z=F.allowUserStatusMessageChange,$=F.allowEmailChange,ee=F.allowPasswordChange,ne=F.allowUserAvatarChange,te=F.canChangeUsername,ae=F.namesRegex,re=F.requireName,le=n.realname,ie=n.email,ue=n.username,oe=n.password,se=n.confirmationPassword,ce=n.statusText,me=n.bio,fe=n.statusType,de=n.customFields,Ee=n.nickname,he=t.handleRealname,xe=t.handleEmail,ge=t.handleUsername,be=t.handlePassword,ve=t.handleConfirmationPassword,pe=t.handleAvatar,we=t.handleStatusText,Ce=t.handleStatusType,ke=t.handleBio,_e=t.handleCustomFields,Se=t.handleNickname,ye=R(M),De=o(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:if(ie===ye){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,r.awrap(j(ie));case 5:z({type:"success",message:N("Verification_email_sent")}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),z({type:"error",message:e.t0});case 11:case"end":return e.stop()}}return e}(),null,null,[[2,8]],Promise)}return e}(),[z,ie,ye,j,N]),Ge=s((function(){return oe&&se&&oe!==se?N("Passwords_do_not_match"):void 0}),[N,oe,se]),Re=s((function(){return y(ie)?void 0:"error-invalid-email-address"}),[ie]),Te=k(function(){function e(e){var n;return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:if(M.username!==e){t.next=2;break}return t.abrupt("return",W(void 0));case 2:if(ae.test(e)){t.next=4;break}return t.abrupt("return",W(N("error-invalid-username")));case 4:return t.next=6,r.awrap(B(e));case 6:if(n=t.sent){t.next=9;break}return t.abrupt("return",W(N("Username_already_exist")));case 9:W(void 0);case 10:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return e}(),400,[ae,N,M.username,B,W]);c((function(){var e;(function(){function e(){var e;return r.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(H());case 2:e=n.sent,X(e);case 4:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e})()()}),[H,X]),c((function(){Te(ue)}),[Te,ue]),c((function(){oe||ve("")}),[oe,ve]);var Ue=s((function(){if(M.name!==le)return!le&&re?N("Field_required"):void 0}),[le,re,N,M.name]),Ae=s((function(){return!ce||ce.length<=P||0===ce.length?void 0:N("Max_length_is",P)}),[ce,N]),Pe,Me=l(M.emails,1)[0].verified,Fe=void 0!==Me&&Me,Ie=!![!!Ge,!!Re,!!O,!!Ue,!!Ae].filter(Boolean);c((function(){I(Ie)}),[Ie,I]);var Le=o((function(e){e.preventDefault()}),[]);return(u.createElement(d,a({is:"form",autoComplete:"off",onSubmit:Le},L),s((function(){return u.createElement(f,null,u.createElement(T,{etag:M.avatarETag,username:ue,setAvatarObj:pe,disabled:!ne,suggestions:Q}))}),[ue,pe,ne,Q,M.avatarETag]),u.createElement(x,{display:"flex",flexDirection:"row",justifyContent:"space-between"},s((function(){return u.createElement(f,{mie:"x8"},u.createElement(f.Label,{flexGrow:0},N("Name")),u.createElement(f.Row,null,u.createElement(E,{error:Ue,disabled:!Y,flexGrow:1,value:le,onChange:he})),!Y&&u.createElement(f.Hint,null,N("RealName_Change_Disabled")),u.createElement(f.Error,null,Ue))}),[N,le,he,Y,Ue]),s((function(){return u.createElement(f,{mis:"x8"},u.createElement(f.Label,{flexGrow:0},N("Username")),u.createElement(f.Row,null,u.createElement(E,{error:O,disabled:!te,flexGrow:1,value:ue,onChange:ge,addon:u.createElement(g,{name:"at",size:"x20"})})),!te&&u.createElement(f.Hint,null,N("Username_Change_Disabled")),u.createElement(f.Error,null,O))}),[N,ue,ge,te,O])),s((function(){return u.createElement(f,null,u.createElement(f.Label,null,N("StatusMessage")),u.createElement(f.Row,null,u.createElement(E,{error:Ae,disabled:!Z,flexGrow:1,value:ce,onChange:we,addon:u.createElement(A,{margin:"neg-x2",onChange:Ce,initialStatus:fe})})),!Z&&u.createElement(f.Hint,null,N("StatusMessage_Change_Disabled")),u.createElement(f.Error,null,Ae))}),[N,Ae,Z,ce,we,Ce,fe]),s((function(){return u.createElement(f,null,u.createElement(f.Label,null,N("Nickname")),u.createElement(f.Row,null,u.createElement(E,{flexGrow:1,value:Ee,onChange:Se,addon:u.createElement(g,{name:"edit",size:"x20",alignSelf:"center"})})))}),[Ee,Se,N]),s((function(){return u.createElement(f,null,u.createElement(f.Label,null,N("Bio")),u.createElement(f.Row,null,u.createElement(h,{rows:3,flexGrow:1,value:me,onChange:ke,addon:u.createElement(g,{name:"edit",size:"x20",alignSelf:"center"})})))}),[me,ke,N]),u.createElement(f,null,u.createElement(w,null,u.createElement(w.Item,null,u.createElement(d,{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:0},s((function(){return u.createElement(f,null,u.createElement(f.Label,null,N("Email")),u.createElement(f.Row,null,u.createElement(E,{flexGrow:1,value:ie,error:Re,onChange:xe,addon:u.createElement(g,{name:Fe?"circle-check":"mail",size:"x20"}),disabled:!$})),!$&&u.createElement(f.Hint,null,N("Email_Change_Disabled")),u.createElement(f.Error,null,N(Re)))}),[N,ie,xe,Fe,$,Re]),s((function(){return!Fe&&u.createElement(f,null,u.createElement(C,{blockEnd:"x28"},u.createElement(p,{disabled:ie!==ye,onClick:De},N("Resend_verification_email"))))}),[Fe,N,ie,ye,De]))),u.createElement(w.Item,null,u.createElement(d,{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:0},s((function(){return u.createElement(f,null,u.createElement(f.Label,null,N("Password")),u.createElement(f.Row,null,u.createElement(v,{autoComplete:"off",disabled:!ee,error:Ge,flexGrow:1,value:oe,onChange:be,addon:u.createElement(g,{name:"key",size:"x20"})})),!ee&&u.createElement(f.Hint,null,N("Password_Change_Disabled")))}),[N,oe,be,Ge,ee]),s((function(){return u.createElement(f,null,u.createElement(b,{visibility:oe?b.VISIBLE:b.HIDDEN},u.createElement(f.Label,null,N("Confirm_password")),u.createElement(f.Row,null,u.createElement(v,{autoComplete:"off",error:Ge,flexGrow:1,value:se,onChange:ve,addon:u.createElement(g,{name:"key",size:"x20"})})),Ge&&u.createElement(f.Error,null,Ge)))}),[N,se,ve,oe,Ge]))))),u.createElement(U,{customFieldsData:de,setCustomFieldsData:_e})))}}

