function module(e,n,t){var r,a,c,o,l,u,i,s,f,m,d,p,_,E,h,k,v,x,y,C,b,g,w,T,M,S;t.link("@babel/runtime/helpers/extends",{default:function(e){r=e}},0),t.link("@babel/runtime/regenerator",{default:function(e){a=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){c=e}},2),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){o=e}},3),t.link("react",{default:function(e){l=e},useState:function(e){u=e},useCallback:function(e){i=e},useEffect:function(e){s=e},useRef:function(e){f=e},useMemo:function(e){m=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){d=e},Button:function(e){p=e},TextInput:function(e){_=e},Icon:function(e){E=e},ButtonGroup:function(e){h=e},Margins:function(e){k=e},Modal:function(e){v=e}},1),t.link("@rocket.chat/fuselage-hooks",{useSafely:function(e){x=e}},2),t.link("yaqrcode",{default:function(e){y=e}},3),t.link("../../contexts/UserContext",{useUser:function(e){C=e}},4),t.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){b=e}},5),t.link("../../contexts/ModalContext",{useSetModal:function(e){g=e}},6),t.link("../../contexts/TranslationContext",{useTranslation:function(e){w=e}},7),t.link("../../hooks/useForm",{useForm:function(e){T=e}},8),t.link("../../contexts/ServerContext",{useMethod:function(e){M=e}},9),t.link("../../components/basic/TextCopy",{default:function(e){S=e}},10);var F=function(e){var n=e.codes,t=e.onClose,r=o(e,["codes","onClose"]),a=w(),c=m((function(){return n.join(" ")}),[n]);return l.createElement(v,r,l.createElement(v.Header,null,l.createElement(E,{name:"info",size:20}),l.createElement(v.Title,null,a("Backup_codes")),l.createElement(v.Close,{onClick:t})),l.createElement(v.Content,{fontScale:"p1"},l.createElement(d,{mb:"x8",withRichContent:!0},a("Make_sure_you_have_a_copy_of_your_codes_1")),l.createElement(S,{text:c,wordBreak:"break-word",mb:"x8"}),l.createElement(d,{mb:"x8",withRichContent:!0},a("Make_sure_you_have_a_copy_of_your_codes_2"))),l.createElement(v.Footer,null,l.createElement(h,{align:"end"},l.createElement(p,{primary:!0,onClick:t},a("Ok")))))},I=function(e){var n=e.onVerify,t=e.onCancel,r=o(e,["onVerify","onCancel"]),a=w(),c=f();s((function(){var e;"function"==typeof(null==c?void 0:null===(e=c.current)||void 0===e?void 0:e.focus)&&c.current.focus()}),[c]);var u=T({code:""}),m=u.values,k=u.handlers,x=m.code,y=k.handleCode,C=i((function(e){("click"===e.type||"keydown"===e.type&&13===e.keyCode)&&n(x)}),[x,n]);return l.createElement(v,r,l.createElement(v.Header,null,l.createElement(E,{name:"info",size:20}),l.createElement(v.Title,null,a("Two-factor_authentication")),l.createElement(v.Close,{onClick:t})),l.createElement(v.Content,{fontScale:"p1"},l.createElement(d,{mbe:"x8"},a("Open_your_authentication_app_and_enter_the_code")),l.createElement(d,{display:"flex",alignItems:"stretch"},l.createElement(_,{ref:c,placeholder:a("Enter_authentication_code"),value:x,onChange:y,onKeyDown:C}))),l.createElement(v.Footer,null,l.createElement(h,{align:"end"},l.createElement(p,{onClick:t},a("Cancel")),l.createElement(p,{primary:!0,onClick:C},a("Verify")))))},P=function(e){var n=w(),t=b(),o=C(),f=g(),m=M("2fa:enable"),E=M("2fa:disable"),h=M("2fa:validateTempToken"),v=M("2fa:checkCodesRemaining"),P=M("2fa:regenerateCodes"),R=x(u(!1)),B=c(R,2),D=B[0],V=B[1],z=x(u()),j=c(z,2),A=j[0],H=j[1],O=x(u()),Q=c(O,2),U=Q[0],q=Q[1],G=x(u()),K=c(G,2),W=K[0],Y=K[1],J=T({authCode:""}),L=J.values,N=J.handlers,X=L.authCode,Z=N.handleAuthCode,$=o&&o.services&&o.services.totp&&o.services.totp.enabled,ee=i((function(){return f(null)}),[f]);s((function(){var e;(function(){function e(){var e;return a.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:if($){n.next=2;break}return n.abrupt("return",!1);case 2:return n.next=4,a.awrap(v());case 4:e=n.sent,Y(e.remaining);case 6:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e})()()}),[v,Y,$]);var ne=i(function(){function e(){var e;return a.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.awrap(m());case 3:e=n.sent,q(e.secret),H(y(e.url,{size:200})),V(!0),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),t({type:"error",message:n.t0});case 12:case"end":return n.stop()}}return n}(),null,null,[[0,9]],Promise)}return e}(),[t,m,H,V,q]),te=i(function(){function e(){var e;return a.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:e=function(){function e(e){var r;return a.async(function(){function c(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,a.awrap(E(e));case 3:if(r=c.sent){c.next=6;break}return c.abrupt("return",t({type:"error",message:n("Invalid_two_factor_code")}));case 6:t({type:"success",message:n("Two-factor_authentication_disabled")}),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),t({type:"error",message:c.t0});case 12:ee();case 13:case"end":return c.stop()}}return c}(),null,null,[[0,9]],Promise)}return e}(),f(l.createElement(I,{onVerify:e,onCancel:ee}));case 2:case"end":return r.stop()}}return r}(),null,null,null,Promise)}return e}(),[ee,E,t,f,n]),re=i(function(){function e(){var e;return a.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.awrap(h(X));case 3:if(e=r.sent){r.next=6;break}return r.abrupt("return",t({type:"error",message:n("Invalid_two_factor_code")}));case 6:f(l.createElement(F,{codes:e.codes,onClose:ee})),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),t({type:"error",message:r.t0});case 12:case"end":return r.stop()}}return r}(),null,null,[[0,9]],Promise)}return e}(),[X,ee,t,f,n,h]),ae=i((function(){var e=function(){function e(e){var r;return a.async(function(){function c(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,a.awrap(P(e));case 3:if(r=c.sent){c.next=6;break}return c.abrupt("return",t({type:"error",message:n("Invalid_two_factor_code")}));case 6:f(l.createElement(F,{codes:r.codes,onClose:ee})),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),t({type:"error",message:c.t0});case 12:case"end":return c.stop()}}return c}(),null,null,[[0,9]],Promise)}return e}();f(l.createElement(I,{onVerify:e,onCancel:ee}))}),[ee,t,P,f,n]);return l.createElement(d,r({display:"flex",flexDirection:"column",alignItems:"flex-start"},e),l.createElement(k,{blockEnd:"x8"},l.createElement(d,{fontScale:"s2"},n("Two-factor_authentication")),!$&&!D&&l.createElement(l.Fragment,null,l.createElement(d,null,n("Two-factor_authentication_is_currently_disabled")),l.createElement(p,{primary:!0,onClick:ne},n("Enable_two-factor_authentication"))),!$&&D&&l.createElement(l.Fragment,null,l.createElement(d,null,n("Scan_QR_code")),l.createElement(d,null,n("Scan_QR_code_alternative_s")),l.createElement(S,{text:U}),l.createElement(d,{is:"img",size:"x200",src:A,"aria-hidden":"true"}),l.createElement(d,{display:"flex",flexDirection:"row",w:"full"},l.createElement(_,{placeholder:n("Enter_authentication_code"),value:X,onChange:Z}),l.createElement(p,{primary:!0,onClick:re},n("Verify")))),$&&l.createElement(l.Fragment,null,l.createElement(p,{primary:!0,danger:!0,onClick:te},n("Disable_two-factor_authentication")),l.createElement(d,{fontScale:"p2",mbs:"x8"},n("Backup_codes")),l.createElement(d,null,n("You_have_n_codes_remaining",{number:W})),l.createElement(p,{onClick:ae},n("Regenerate_codes")))))};t.exportDefault(P)}

