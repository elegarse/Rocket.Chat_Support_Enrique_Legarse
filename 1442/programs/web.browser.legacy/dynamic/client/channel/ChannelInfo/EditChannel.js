function module(e,n,t){var l,o,a,r,i,c,u,s,d,m,f,E,h,p,y,R,w,x,b,v,C,g,_,k,A,P,M,O,S,G,D,T,j,N,L,I,F,H,q;t.link("@babel/runtime/regenerator",{default:function(e){l=e}},0),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){o=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},2),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},3),t.link("react",{default:function(e){i=e},useCallback:function(e){c=e},useMemo:function(e){u=e},useRef:function(e){s=e}},0),t.link("@rocket.chat/fuselage",{Field:function(e){d=e},TextInput:function(e){m=e},ToggleSwitch:function(e){f=e},MultiSelect:function(e){E=e},Accordion:function(e){h=e},Callout:function(e){p=e},NumberInput:function(e){y=e},FieldGroup:function(e){R=e},Button:function(e){w=e},ButtonGroup:function(e){x=e},Box:function(e){b=e},Icon:function(e){v=e},TextAreaInput:function(e){C=e}},1),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){g=e}},2),t.link("../../components/basic/VerticalBar",{default:function(e){_=e}},3),t.link("../../components/basic/RawText",{default:function(e){k=e}},4),t.link("../../components/basic/avatar/RoomAvatarEditor",{default:function(e){A=e}},5),t.link("../../components/DeleteChannelWarning",{default:function(e){P=e}},6),t.link("../../contexts/TranslationContext",{useTranslation:function(e){M=e}},7),t.link("../../hooks/useForm",{useForm:function(e){O=e}},8),t.link("../../../app/utils/client",{roomTypes:function(e){S=e},RoomSettingsEnum:function(e){G=e}},9),t.link("../../../app/lib/lib/MessageTypes",{MessageTypesValues:function(e){D=e}},10),t.link("../../contexts/ServerContext",{useMethod:function(e){T=e}},11),t.link("../../contexts/ModalContext",{useSetModal:function(e){j=e}},12),t.link("../../contexts/SettingsContext",{useSetting:function(e){N=e}},13),t.link("../../contexts/AuthorizationContext",{usePermission:function(e){L=e},useAtLeastOnePermission:function(e){I=e},useRole:function(e){F=e}},14),t.link("../../hooks/useEndpointAction",{useEndpointActionExperimental:function(e){H=e}},15),t.link("../hooks/useUserRoom",{useUserRoom:function(e){q=e}},16);var J={c:"Channels",p:"Groups",d:"DMs"},W=function(e,n){var t=e.t,l=e.ro,o=e.archived,a=e.topic,i=e.description,c=e.announcement,s=e.joinCodeRequired,d=e.sysMes,m=e.encrypted,f=e.retention,E=void 0===f?{}:f,h=n.retentionPolicyEnabled,p=n.maxAgeDefault,y=N("RetentionPolicy_AppliesTo"+J[e.t]),R=N("RetentionPolicy_DoNotPrunePinned"),w=N("RetentionPolicy_FilesOnly");return u((function(){var n,u,f;return r({roomName:"d"===t?e.usernames.join(" x "):S.getRoomName(t,r({type:t},e)),roomType:t,readOnly:!!l,reactWhenReadOnly:!1,archived:!!o,roomTopic:null!=a?a:"",roomDescription:null!=i?i:"",roomAnnouncement:null!=c?c:"",roomAvatar:void 0,joinCode:"",joinCodeRequired:!!s,systemMessages:Array.isArray(d)?d:[],hideSysMes:!!(null==d?void 0:d.length),encrypted:m},h&&{retentionEnabled:null!==(n=E.enabled)&&void 0!==n?n:y,retentionOverrideGlobal:!!E.overrideGlobal,retentionMaxAge:Math.min(E.maxAge,p)||p,retentionExcludePinned:null!==(u=E.excludePinned)&&void 0!==u?u:R,retentionFilesOnly:null!==(f=E.filesOnly)&&void 0!==f?f:w})}),[c,o,i,R,w,s,p,E.enabled,E.excludePinned,E.filesOnly,E.maxAge,E.overrideGlobal,y,h,l,e,d,t,a,m])};function B(e){var n=e.rid,t=q(n);return i.createElement(V,{room:r({type:null==t?void 0:t.t},t)})}var U=function(e,n,t,l){return(!e.default||l)&&("p"===e.t&&n||"c"===e.t&&t)};function V(e){var n=e.room,t=M(),q=j(),B=N("RetentionPolicy_Enabled"),V=N("RetentionPolicy_MaxAge_"+J[n.t])||30,z=s({}),Y=c((function(e){var n=e.initialValue,t=e.value,l=e.key,o=z.current;JSON.stringify(n)!==JSON.stringify(t)?o[l]=t:delete o[l]}),[]),K=O(W(n,{retentionPolicyEnabled:B,maxAgeDefault:V}),Y),Q=K.values,X=K.handlers,Z=K.hasUnsavedChanges,$=K.reset,ee=K.commit,ne=u((function(){return D.map((function(e){var n=e.key,l=e.i18nLabel;return[n,t(l)]}))}),[t]),te=Q.roomName,le=Q.roomType,oe=Q.readOnly,ae=Q.encrypted,re=Q.roomAvatar,ie=Q.archived,ce=Q.roomTopic,ue=Q.roomDescription,se=Q.roomAnnouncement,de=Q.reactWhenReadOnly,me=Q.joinCode,fe=Q.joinCodeRequired,Ee=Q.systemMessages,he=Q.hideSysMes,pe=Q.retentionEnabled,ye=Q.retentionOverrideGlobal,Re=Q.retentionMaxAge,we=Q.retentionExcludePinned,xe=Q.retentionFilesOnly,be=X.handleJoinCode,ve=X.handleJoinCodeRequired,Ce=X.handleSystemMessages,ge=X.handleEncrypted,_e=X.handleHideSysMes,ke=X.handleRoomName,Ae=X.handleReadOnly,Pe=X.handleArchived,Me=X.handleRoomAvatar,Oe=X.handleReactWhenReadOnly,Se=X.handleRoomType,Ge=X.handleRoomTopic,De=X.handleRoomDescription,Te=X.handleRoomAnnouncement,je=X.handleRetentionEnabled,Ne=X.handleRetentionOverrideGlobal,Le=X.handleRetentionMaxAge,Ie=X.handleRetentionExcludePinned,Fe=X.handleRetentionFilesOnly,He=u((function(){var e,t=(null===(e=S.getConfig(n.t))||void 0===e?void 0:e.allowRoomSettingChange)||function(){};return[t(n,G.NAME),t(n,G.TOPIC),t(n,G.ANNOUNCEMENT),t(n,G.ARCHIVE_OR_UNARCHIVE),t(n,G.DESCRIPTION),t(n,G.TYPE),t(n,G.READ_ONLY),t(n,G.SYSTEM_MESSAGES),t(n,G.JOIN_CODE),t(n,G.REACT_WHEN_READ_ONLY),t(n,G.E2E)]}),[n]),qe=a(He,11),Je=qe[0],We=qe[1],Be=qe[2],Ue=qe[3],Ve=qe[4],ze=qe[5],Ye=qe[6],Ke=qe[7],Qe=qe[8],Xe=qe[9],Ze=qe[10],$e=F("admin"),en=L("create-c"),nn=L("create-p"),tn=U(n,en,nn,$e),ln=L("set-readonly",n._id),on=L("set-react-when-readonly",n._id),an=L("edit-privileged-setting",n._id),rn=I(u((function(){return["archive-room","unarchive-room"]}),[])),cn=L("delete-"+n.t),un=ie!==!!n.archived,sn=n.archived?"unarchive":"archive",dn=n.archived?"Room_has_been_unarchived":"Room_has_been_archived",mn=H("POST","rooms.saveRoomSettings",t("Room_updated_successfully")),fn=H("POST","rooms.changeArchivationState",t(dn)),En=g(function(){function e(){var e,t,a,i,c,u;return l.async(function(){function s(s){for(;;)switch(s.prev=s.next){case 0:return e=z.current,t=e.joinCodeRequired,a=e.hideSysMes,i=o(e,["joinCodeRequired","hideSysMes"]),c=function(){return mn(r({rid:n._id},i,{},me&&{joinCode:t?me:""},{},(i.systemMessages||!a)&&{systemMessages:a?Ee:[]}))},u=function(){return fn({rid:n._id,action:sn})},s.next=5,l.awrap(Promise.all([Z&&c(),un&&u()].filter(Boolean)));case 5:z.current={},ee();case 7:case"end":return s.stop()}}return s}(),null,null,null,Promise)}return e}()),hn=T("eraseRoom"),pn=g((function(){var e=function(){return q(void 0)},t=function(){function t(){return l.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.awrap(hn(n._id));case 2:e();case 3:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return t}();q(i.createElement(P,{onConfirm:t,onCancel:e}))})),yn=g((function(){Se("p"===le?"c":"p")})),Rn=g((function(e){Le(Math.max(1,Number(e.currentTarget.value)))}));return i.createElement(_.ScrollableContent,{p:"0",is:"form",onSubmit:g((function(e){return e.preventDefault()}))},i.createElement(A,{room:n,roomAvatar:re,onChangeAvatar:Me}),i.createElement(d,null,i.createElement(d.Label,null,t("Name")),i.createElement(d.Row,null,i.createElement(m,{disabled:!Je,value:te,onChange:ke,flexGrow:1}))),Ve&&i.createElement(d,null,i.createElement(d.Label,null,t("Description")),i.createElement(d.Row,null,i.createElement(C,{rows:4,value:ue,onChange:De,flexGrow:1}))),Be&&i.createElement(d,null,i.createElement(d.Label,null,t("Announcement")),i.createElement(d.Row,null,i.createElement(C,{rows:4,value:se,onChange:Te,flexGrow:1}))),We&&i.createElement(d,null,i.createElement(d.Label,null,t("Topic")),i.createElement(d.Row,null,i.createElement(C,{rows:4,value:ce,onChange:Ge,flexGrow:1}))),ze&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,t("Private")),i.createElement(d.Row,null,i.createElement(f,{disabled:!tn,checked:"p"===le,onChange:yn}))),i.createElement(d.Hint,null,t("Just_invited_people_can_access_this_channel"))),Ye&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,t("Read_only")),i.createElement(d.Row,null,i.createElement(f,{disabled:!ln,checked:oe,onChange:Ae}))),i.createElement(d.Hint,null,t("Only_authorized_users_can_write_new_messages"))),Xe&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,t("React_when_read_only")),i.createElement(d.Row,null,i.createElement(f,{disabled:!on,checked:de,onChange:Oe}))),i.createElement(d.Hint,null,t("Only_authorized_users_can_write_new_messages"))),Ue&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,t("Archived")),i.createElement(d.Row,null,i.createElement(f,{disabled:!rn,checked:ie,onChange:Pe})))),Qe&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,t("Password_to_access")),i.createElement(d.Row,null,i.createElement(f,{checked:fe,onChange:ve}))),i.createElement(d.Row,null,i.createElement(m,{disabled:!fe,value:me,onChange:be,placeholder:t("Reset_password"),flexGrow:1}))),Ke&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,t("Hide_System_Messages")),i.createElement(d.Row,null,i.createElement(f,{checked:he,onChange:_e}))),i.createElement(d.Row,null,i.createElement(E,{options:ne,disabled:!he,value:Ee,onChange:Ce,placeholder:t("Select_an_option"),flexGrow:1}))),Ze&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,t("Encrypted")),i.createElement(d.Row,null,i.createElement(f,{checked:ae,onChange:ge})))),B&&i.createElement(h,null,i.createElement(h.Item,{title:t("Prune")},i.createElement(R,null,i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,t("RetentionPolicyRoom_Enabled")),i.createElement(d.Row,null,i.createElement(f,{checked:pe,onChange:je})))),i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,t("RetentionPolicyRoom_OverrideGlobal")),i.createElement(d.Row,null,i.createElement(f,{disabled:!pe||!an,checked:ye,onChange:Ne})))),ye&&i.createElement(i.Fragment,null,i.createElement(p,{type:"danger"},i.createElement(k,null,t("RetentionPolicyRoom_ReadTheDocs"))),i.createElement(d,null,i.createElement(d.Label,null,t("RetentionPolicyRoom_MaxAge",{max:V})),i.createElement(d.Row,null,i.createElement(y,{value:Re,onChange:Rn,flexGrow:1}))),i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,t("RetentionPolicyRoom_ExcludePinned")),i.createElement(d.Row,null,i.createElement(f,{checked:we,onChange:Ie})))),i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,t("RetentionPolicyRoom_FilesOnly")),i.createElement(d.Row,null,i.createElement(f,{checked:xe,onChange:Fe})))))))),i.createElement(d,null,i.createElement(d.Row,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},i.createElement(x,{stretch:!0,flexGrow:1},i.createElement(w,{type:"reset",disabled:!Z,onClick:$},t("Reset")),i.createElement(w,{flexGrow:1,disabled:!Z,onClick:En},t("Save")))))),i.createElement(d,null,i.createElement(d.Row,null,i.createElement(w,{flexGrow:1,primary:!0,danger:!0,disabled:!cn,onClick:pn},i.createElement(v,{name:"trash",size:"x16"}),t("Delete")))))}t.exportDefault(B)}

