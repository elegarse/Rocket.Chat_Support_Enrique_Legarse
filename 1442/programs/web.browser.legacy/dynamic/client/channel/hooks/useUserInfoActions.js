function module(e,n,o){var r,t,a,u,i,c,s,l,m,_,f,d,v,p,b,g,h,k,x,C,w,E,M,S,U,A,R,T,y,I,O,P;o.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),o.link("@babel/runtime/helpers/objectSpread2",{default:function(e){t=e}},1),o.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},2),o.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){u=e}},3),o.export({useUserInfoActionsSpread:function(){return W},useUserInfoActions:function(){return z}}),o.link("react",{default:function(e){i=e},useCallback:function(e){c=e},useMemo:function(e){s=e}},0),o.link("@rocket.chat/fuselage",{Button:function(e){l=e},ButtonGroup:function(e){m=e},Icon:function(e){_=e},Modal:function(e){f=e},Box:function(e){d=e}},1),o.link("@rocket.chat/fuselage-hooks",{useAutoFocus:function(e){v=e},useMutableCallback:function(e){p=e}},2),o.link("underscore.string",{default:function(e){b=e}},3),o.link("../../contexts/TranslationContext",{useTranslation:function(e){g=e}},4),o.link("../../hooks/useReactiveValue",{useReactiveValue:function(e){h=e}},5),o.link("../../contexts/AuthorizationContext",{usePermission:function(e){k=e},useAllPermissions:function(e){x=e}},6),o.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){C=e}},7),o.link("../../contexts/UserContext",{useUserId:function(e){w=e},useUserSubscription:function(e){E=e},useUserSubscriptionByName:function(e){M=e}},8),o.link("../../contexts/ServerContext",{useMethod:function(e){S=e}},9),o.link("../../../app/webrtc/client",{WebRTC:function(e){U=e}},10),o.link("../../contexts/RouterContext",{useRoute:function(e){A=e}},11),o.link("../../contexts/ModalContext",{useSetModal:function(e){R=e}},12),o.link("../../../app/models/client",{RoomRoles:function(e){T=e}},13),o.link("../../../app/utils",{roomTypes:function(e){y=e},RoomMemberActions:function(e){I=e}},14),o.link("../../hooks/useEndpointAction",{useEndpointActionExperimental:function(e){O=e}},15),o.link("./useUserRoom",{useUserRoom:function(e){P=e}},16);var B=function(e,n,o){return h(c((function(){return!!T.findOne({rid:n,"u._id":e,roles:o})}),[e,n,o]))},L=function(e,n,o,r){var t=o||n,a=e&&e.name!==r;return t&&a},N=function(e){if(!e)return!1;var n=e.localUrl,o,r=e.remoteItems.get()||[];return null!==n.get()||0!==r.length},j=function(e,n,o){return e&&e.ro?(!Array.isArray(e.unmuted)||-1===e.unmuted.indexOf(n&&n.username))&&(!o||Array.isArray(e.muted)&&-1!==e.muted.indexOf(n&&n.username)):e&&Array.isArray(e.muted)&&e.muted.indexOf(n&&n.username)>-1},D=function(e){var n=e.text,o=e.confirmText,r=e.close,t=e.confirm,a=u(e,["text","confirmText","close","confirm"]),c=v(!0),s=g();return i.createElement(f,a,i.createElement(f.Header,null,i.createElement(_,{color:"warning",name:"modal-warning",size:20}),i.createElement(f.Title,null,s("Are_you_sure")),i.createElement(f.Close,{onClick:r})),i.createElement(f.Content,{fontScale:"p1"},n),i.createElement(f.Footer,null,i.createElement(m,{align:"end"},i.createElement(l,{ghost:!0,onClick:r},s("Cancel")),i.createElement(l,{ref:c,primary:!0,danger:!0,onClick:t},o))))},V=function(e){var n=a(e,2),o=n[0],r=n[1],t=r.action,u,i;return[o,{label:{label:r.label,icon:r.icon},action:t}]},W=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return s((function(){var o=Object.entries(e),r,t,a;return{actions:o.slice(0,n),menu:o.slice(n,o.length).map(V).length&&Object.fromEntries(o.slice(n,o.length).map(V))}}),[e,n])},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=g(),a=C(),u=A("direct"),l=R(),m=e._id,_=w(),f=p((function(){return l(null)})),v=P(n),T=E(n),V=M(e.username),W=B(m,n,"leader"),z=B(m,n,"moderator"),F=B(m,n,"owner"),G=c((function(){return U.getInstanceByRoomId(n)}),[n]),H=h(G),J=x("post-readonly",n),Y=T&&T.ignored&&T.ignored.indexOf(m)>-1,q=j(v,e,J),K="p"===v.t?"groups":"channels",Q=v&&v.t&&y.getConfig(v.t),X=t({},Q&&{roomCanSetOwner:Q.allowMemberAction(v,I.SET_AS_OWNER),roomCanSetLeader:Q.allowMemberAction(v,I.SET_AS_LEADER),roomCanSetModerator:Q.allowMemberAction(v,I.SET_AS_MODERATOR),roomCanBlock:Q.allowMemberAction(v,I.IGNORE),roomCanMute:Q.allowMemberAction(v,I.MUTE),roomCanRemove:Q.allowMemberAction(v,I.REMOVE_USER)}),Z=X.roomCanSetOwner,$=X.roomCanSetLeader,ee=X.roomCanSetModerator,ne=X.roomCanBlock,oe=X.roomCanMute,re=X.roomCanRemove,te=v&&v.t&&b.escapeHTML(y.getRoomName(v.t,v)),ae=k("set-owner",n),ue=k("set-leader",n),ie=k("set-moderator",n),ce=k("mute-user",n),se=k("remove-user",n),le=k("create-d"),me=N(H),_e=h(c((function(){var e;return null==H?void 0:null===(e=H.callInProgress)||void 0===e?void 0:e.get()}),[])),fe=L(T,V,le,e.username),de=p((function(){return u.push({rid:e.username})})),ve=s((function(){return fe&&{label:o("Direct_Message"),icon:"chat",action:de}}),[de,fe,o]),pe=s((function(){var e,n,r=_e?function(){H.joinCall({audio:!0,video:!0})}:function(){H.startCall({audio:!0,video:!0})};return me&&{label:o(_e?"Join_video_call":"Start_video_call"),icon:"video",action:r}}),[_e,me,o,H]),be=s((function(){var e,n,r=_e?function(){H.joinCall({audio:!0,video:!1})}:function(){H.startCall({audio:!0,video:!1})};return me&&{label:o(_e?"Join_audio_call":"Start_audio_call"),icon:"mic",action:r}}),[_e,me,o,H]),ge=F?"removeOwner":"addOwner",he=F?"User__username__removed_from__room_name__owners":"User__username__is_now_a_owner_of__room_name_",ke=O("POST",K+"."+ge,o(he,{username:e.username,room_name:te})),xe=p(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ke({roomId:n,userId:m}));case 1:case"end":return e.stop()}}return e}(),null,null,null,Promise)}return e}()),Ce=s((function(){return Z&&ae&&{label:o(F?"Remove_as_owner":"Set_as_owner"),icon:"shield-check",action:xe}}),[xe,F,o,Z,ae]),we=W?"removeLeader":"addLeader",Ee=W?"User__username__removed_from__room_name__leaders":"User__username__is_now_a_leader_of__room_name_",Me=O("POST",K+"."+we,o(Ee,{username:e.username,room_name:te})),Se=p((function(){return Me({roomId:n,userId:m})})),Ue=s((function(){return $&&ue&&{label:o(W?"Remove_as_leader":"Set_as_leader"),icon:"shield-alt",action:Se}}),[W,$,o,ue,Se]),Ae=z?"removeModerator":"addModerator",Re=z?"User__username__removed_from__room_name__moderators":"User__username__is_now_a_moderator_of__room_name_",Te=O("POST",K+"."+Ae,o(Re,{username:e.username,room_name:te})),ye=p((function(){return Te({roomId:n,userId:m})})),Ie=s((function(){return ee&&ie&&{label:o(z?"Remove_as_moderator":"Set_as_moderator"),icon:"shield",action:ye}}),[ye,z,ee,o,ie]),Oe=S("ignoreUser"),Pe=p(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.awrap(Oe({rid:n,userId:m,ignore:!Y}));case 3:a({type:"success",message:o("User_has_been_unignored")}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a({type:"error",message:e.t0});case 9:case"end":return e.stop()}}return e}(),null,null,[[0,6]],Promise)}return e}()),Be=s((function(){return ne&&m!==_&&{label:o(Y?"Unignore":"Ignore"),icon:"ban",action:Pe}}),[Pe,Y,_,ne,o,m]),Le=S(q?"unmuteUserInRoom":"muteUserInRoom"),Ne=s((function(){var t=function(){var t=function(){function t(){return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.awrap(Le({rid:n,username:e.username}));case 3:f(),a({type:"success",message:o(q?"User__username__unmuted_in_room__roomName__":"User__username__muted_in_room__roomName__",{username:e.username,roomName:te})}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"error",message:t.t0});case 10:case"end":return t.stop()}}return t}(),null,null,[[0,7]],Promise)}return t}();if(q)return t();l(i.createElement(D,{text:o("The_user_wont_be_able_to_type_in_s",te),close:f,confirmText:o("Yes_mute_user"),confirm:t}))};return oe&&ce&&{label:o(q?"Unmute_user":"Mute_user"),icon:q?"mic":"mic-off",action:t}}),[f,a,q,Le,n,oe,te,l,o,e.username,ce]),je=O("POST",K+".kick",o("User_has_been_removed_from_s",te)),De=p((function(){l(i.createElement(D,{text:o("The_user_will_be_removed_from_s",te),close:f,confirmText:o("Yes_remove_user"),confirm:function(){je({roomId:n,userId:m}),f()}}))})),Ve=s((function(){return re&&se&&{label:i.createElement(d,{color:"danger"},o("Remove_from_room")),icon:"sign-out",action:De}}),[re,se,De,o]);return s((function(){return t({},ve&&{openDirectMessage:ve},{},pe&&{video:pe},{},be&&{audio:be},{},Ce&&{changeOwner:Ce},{},Ue&&{changeLeader:Ue},{},Ie&&{changeModerator:Ie},{},Be&&{ignoreUser:Be},{},Ne&&{muteUser:Ne},{},Ve&&{removeUser:Ve})}),[be,Ue,Ie,Ce,Be,Ne,ve,Ve,pe])}}

