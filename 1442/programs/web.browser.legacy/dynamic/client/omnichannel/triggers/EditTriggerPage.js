function module(e,n,t){var a,r,o,l,u,i,s,c,m,d,f,p,g,k,v,h,E,b,x;t.link("@babel/runtime/regenerator",{default:function(e){a=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},1),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){o=e}},2),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},3),t.link("react",{default:function(e){u=e}},0),t.link("@rocket.chat/fuselage",{Button:function(e){i=e},Callout:function(e){s=e},FieldGroup:function(e){c=e},ButtonGroup:function(e){m=e}},1),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){d=e}},2),t.link("./TriggersForm",{default:function(e){f=e}},3),t.link("../../components/PageSkeleton",{default:function(e){p=e}},4),t.link("../../contexts/TranslationContext",{useTranslation:function(e){g=e}},5),t.link("../../contexts/ServerContext",{useMethod:function(e){k=e}},6),t.link("../../hooks/useForm",{useForm:function(e){v=e}},7),t.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental:function(e){h=e},ENDPOINT_STATES:function(e){E=e}},8),t.link("../../contexts/RouterContext",{useRoute:function(e){b=e}},9),t.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){x=e}},10);var S=function(e){var n=e.id,t=e.onSave,a=g(),r=h("livechat/triggers/"+n),o=r.data,l=r.state;return l===E.LOADING?u.createElement(p,null):l!==E.ERROR&&(null==o?void 0:o.trigger)?u.createElement(C,{data:o.trigger,onSave:t}):u.createElement(s,null,a("Error"),": error")},T=function(e){var n=e.name,t=e.description,a=e.enabled,r=e.runOnce,o,u=l(e.conditions,1)[0],i=u.name,s=u.value,c,m=l(e.actions,1)[0],d=m.action,f=m.params,p=f.sender,g=f.msg,k=f.name;return{name:null!=n?n:"",description:null!=t?t:"",enabled:!!a,runOnce:!!r,conditions:{name:null!=i?i:"page-url",value:null!=s?s:""},actions:{name:null!=d?d:"",params:{sender:null!=p?p:"queue",msg:null!=g?g:"",name:null!=k?k:""}}}},C=function(e){var n=e.data,t=e.onSave,l=x(),s=g(),p=b("omnichannel-triggers"),h=k("livechat:saveTrigger"),E=v(T(n)),S=E.values,C=E.handlers,D=d(function(){function e(){var e,u,i,c,m;return a.async(function(){function d(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,e=S.actions.params,u=e.sender,i=e.msg,c=e.name,m=o(S,["actions"]),d.next=4,a.awrap(h(r({_id:n._id},m,{conditions:[S.conditions],actions:[{name:"send-message",params:r({sender:u,msg:i},"custom"===u&&{name:c})}]})));case 4:l({type:"success",message:s("Saved")}),t(),p.push({}),d.next=12;break;case 9:d.prev=9,d.t0=d.catch(0),l({type:"error",message:d.t0});case 12:case"end":return d.stop()}}return d}(),null,null,[[0,9]],Promise)}return e}());return u.createElement(u.Fragment,null,u.createElement(c,null,u.createElement(f,{values:S,handlers:C})),u.createElement(m,{align:"end"},u.createElement(i,{primary:!0,onClick:D},s("Save"))))};t.exportDefault(S)}

