function module(e,t,n){var a,l,r,s,o,u,i,c,m,d,f,p,E,h,v,b,x,k,g,w,C,S,D,A,R,U,I,T,_,G;function L(e){var t=e.uid,n=e.reload,a=C(),l=A("livechat/users/agent/"+t),r=l.data,s=l.state,u=l.error,i=A("livechat/agents/"+t+"/departments"),c=i.data,m=i.state,d=i.error,f=A("livechat/department"),p=f.data,h=f.state,v=f.error;return[s,h,m].includes(R.LOADING)?o.createElement(U,null):u||d||v||!r||!r.user?o.createElement(E,{mbs:"x16"},a("User_not_found")):o.createElement(M,{uid:t,data:r,userDepartments:c,availableDepartments:p,reset:n})}function M(e){var t=e.data,n=e.userDepartments,A=e.availableDepartments,R=e.uid,U=e.reset,L=s(e,["data","userDepartments","availableDepartments","uid","reset"]),M=C(),y=_("omnichannel-agents"),F=c(),N=r(F,2),P=N[0],z=N[1],B,j=(t||{user:{}}).user,O=j.name,V=j.username,W=j.statusLivechat,q=T(j),H=u((function(){return A&&A.departments?A.departments.map((function(e){var t=e._id,n;return[t,e.name||t]})):[]}),[A]),J=u((function(){return n&&n.departments?n.departments.map((function(e){var t;return e.departmentId})):[]}),[n]),K=k(G),Q=i({values:{},hasUnsavedChanges:!1}),X=x((function(e){var t=e.hasUnsavedChanges,n=s(e,["hasUnsavedChanges"]);Q.current=n,t!==P&&z(t)})),Y=K.useMaxChatsPerAgent,Z=void 0===Y?function(){}:Y;console.log(K,Z());var $=I({departments:J,status:W,maxChats:0}),ee=$.values,te=$.handlers,ne=$.hasUnsavedChanges,ae=$.commit,le=Q.current,re=le.reset,se=le.commit,oe=te.handleDepartments,ue=te.handleStatus,ie=ee.departments,ce=ee.status,me=Z(),de=g("livechat:saveAgentInfo"),fe=g("livechat:changeLivechatStatus"),pe=w(),Ee=x((function(){U(),re()})),he=x(function(){function e(){return l.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.awrap(de(R,Q.current.values,ie));case 3:return e.next=5,l.awrap(fe({status:ce,agentId:R}));case 5:pe({type:"success",message:M("saved")}),y.push({}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),pe({type:"error",message:e.t0}),console.log(e.t0);case 13:ae(),se();case 15:case"end":return e.stop()}}return e}(),null,null,[[0,9]],Promise)}return e}());return o.createElement(S.ScrollableContent,a({is:"form"},L),o.createElement(D.Avatar,{margin:"auto",size:"x332",title:V,username:V}),o.createElement(m,null,o.createElement(m.Label,null,M("Name")),o.createElement(m.Row,null,o.createElement(d,{flexGrow:1,value:O,disabled:!0}))),o.createElement(m,null,o.createElement(m.Label,null,M("Username")),o.createElement(m.Row,null,o.createElement(d,{flexGrow:1,value:V,disabled:!0,addon:o.createElement(v,{name:"at",size:"x20"})}))),o.createElement(m,null,o.createElement(m.Label,null,M("Email")),o.createElement(m.Row,null,o.createElement(d,{flexGrow:1,value:q,disabled:!0,addon:o.createElement(v,{name:"mail",size:"x20"})}))),o.createElement(m,null,o.createElement(m.Label,null,M("Departments")),o.createElement(m.Row,null,o.createElement(h,{options:H,value:ie,placeholder:M("Select_an_option"),onChange:oe,flexGrow:1}))),o.createElement(m,null,o.createElement(m.Label,null,M("Status")),o.createElement(m.Row,null,o.createElement(b,{options:[["available",M("Available")],["not-available",M("Not_Available")]],value:ce,placeholder:M("Select_an_option"),onChange:ue,flexGrow:1}))),me&&o.createElement(me,{data:j,onChange:X}),o.createElement(m.Row,null,o.createElement(E,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},o.createElement(p,{inlineEnd:"x4"},o.createElement(f,{flexGrow:1,type:"reset",disabled:!ne&&!P,onClick:Ee},M("Reset")),o.createElement(f,{mie:"none",flexGrow:1,disabled:!ne&&!P,onClick:he},M("Save"))))))}n.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},0),n.link("@babel/runtime/regenerator",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},2),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){s=e}},3),n.export({default:function(){return L},AgentEdit:function(){return M}}),n.link("react",{default:function(e){o=e},useMemo:function(e){u=e},useRef:function(e){i=e},useState:function(e){c=e}},0),n.link("@rocket.chat/fuselage",{Field:function(e){m=e},TextInput:function(e){d=e},Button:function(e){f=e},Margins:function(e){p=e},Box:function(e){E=e},MultiSelect:function(e){h=e},Icon:function(e){v=e},Select:function(e){b=e}},1),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){x=e}},2),n.link("use-subscription",{useSubscription:function(e){k=e}},3),n.link("../../contexts/ServerContext",{useMethod:function(e){g=e}},4),n.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){w=e}},5),n.link("../../contexts/TranslationContext",{useTranslation:function(e){C=e}},6),n.link("../../components/basic/VerticalBar",{default:function(e){S=e}},7),n.link("../../components/basic/UserInfo",{UserInfo:function(e){D=e}},8),n.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental:function(e){A=e},ENDPOINT_STATES:function(e){R=e}},9),n.link("./Skeleton",{FormSkeleton:function(e){U=e}},10),n.link("../../hooks/useForm",{useForm:function(e){I=e}},11),n.link("../../helpers/getUserEmailAddress",{getUserEmailAddress:function(e){T=e}},12),n.link("../../contexts/RouterContext",{useRoute:function(e){_=e}},13),n.link("../additionalForms",{formsSubscription:function(e){G=e}},14)}

