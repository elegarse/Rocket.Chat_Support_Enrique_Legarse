function module(e,t,n){var a,r,c,i,o,l,u,s,f,m,d,x,E,p,k,v,h,g,T,w,C,b,y,A,P,D,R,S,_,M;function I(e){var t=e._id,n=e.reload,a=g("DELETE","livechat/users/agent/"+t),r=_(),i=M(),o=v(),s=l(function(){function e(){var e;return c.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.awrap(a());case 2:!0===(e=t.sent).success&&n();case 4:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return e}()),f=l((function(e){e.stopPropagation();var t=function(){function e(){return c.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.awrap(s());case 3:i({type:"success",message:o("Agent_removed")}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i({type:"error",message:e.t0});case 9:r();case 10:case"end":return e.stop()}}return e}(),null,null,[[0,6]],Promise)}return e}();r(u.createElement(S,{onDelete:t,onCancel:function(){return r()}}))}));return u.createElement(x.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},u.createElement(p,{small:!0,ghost:!0,title:o("Remove"),onClick:f},u.createElement(E,{name:"trash",size:"x16"})))}function N(e){var t=e.reload,n=v(),a=P("id"),r=D("omnichannel-agents"),i=g("DELETE","livechat/users/agent/"+a),o=_(),s=M(),f=l(function(){function e(){var e;return c.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.awrap(i());case 2:!0===(e=n.sent).success&&(r.push({}),t());case 4:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e}()),m=l((function(e){e.stopPropagation();var t=function(){function e(){return c.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.awrap(f());case 3:s({type:"success",message:n("Agent_removed")}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s({type:"error",message:e.t0});case 9:o();case 10:case"end":return e.stop()}}return e}(),null,null,[[0,6]],Promise)}return e}();o(u.createElement(S,{onDelete:t,onCancel:function(){return o()}}))})),d=l((function(){return r.push({context:"edit",id:a})}));return[u.createElement(y.Action,{key:n("Remove"),title:n("Remove"),label:n("Remove"),onClick:m,icon:"trash"}),u.createElement(y.Action,{key:n("Edit"),title:n("Edit"),label:n("Edit"),onClick:d,icon:"edit"})]}n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){a=e}},0),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},1),n.link("@babel/runtime/regenerator",{default:function(e){c=e}},2),n.export({RemoveAgentButton:function(){return I},AgentInfoActions:function(){return N}}),n.link("@rocket.chat/fuselage-hooks",{useDebouncedValue:function(e){i=e},useMediaQuery:function(e){o=e},useMutableCallback:function(e){l=e}},0),n.link("react",{default:function(e){u=e},useMemo:function(e){s=e},useCallback:function(e){f=e},useState:function(e){m=e}},1),n.link("@rocket.chat/fuselage",{Box:function(e){d=e},Table:function(e){x=e},Icon:function(e){E=e},Button:function(e){p=e}},2),n.link("../../components/GenericTable",{Th:function(e){k=e}},3),n.link("../../contexts/TranslationContext",{useTranslation:function(e){v=e}},4),n.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental:function(e){h=e}},5),n.link("../../hooks/useEndpointAction",{useEndpointAction:function(e){g=e}},6),n.link("../../contexts/AuthorizationContext",{usePermission:function(e){T=e}},7),n.link("../../components/NotAuthorizedPage",{default:function(e){w=e}},8),n.link("./AgentsPage",{default:function(e){C=e}},9),n.link("./AgentEdit",{default:function(e){b=e}},10),n.link("./AgentInfo",{default:function(e){y=e}},11),n.link("../../components/basic/avatar/UserAvatar",{default:function(e){A=e}},12),n.link("../../contexts/RouterContext",{useRouteParameter:function(e){P=e},useRoute:function(e){D=e}},13),n.link("../../components/basic/VerticalBar",{default:function(e){R=e}},14),n.link("../DeleteWarningModal",{default:function(e){S=e}},15),n.link("../../contexts/ModalContext",{useSetModal:function(e){_=e}},16),n.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){M=e}},17);var B=function(e){return"asc"===e?1:-1},z=function(e,t){var n=e.text,c=e.itemsPerPage,i=e.current,o=r(t,2),l=o[0],u=o[1];return s((function(){var e;return a({fields:JSON.stringify({name:1,username:1,emails:1,avatarETag:1}),text:n,sort:JSON.stringify((e={},e[l]=B(u),e.usernames="name"===l?B(u):void 0,e))},c&&{count:c},{},i&&{offset:i})}),[n,c,i,l,u])};function L(){var e=v(),t=T("manage-livechat-agents"),n=m({text:"",current:0,itemsPerPage:25}),a=r(n,2),c=a[0],E=a[1],p=m(["name","asc"]),g=r(p,2),S=g[0],_=g[1],M=o("(min-width: 1024px)"),B=i(c,500),L=i(S,500),U=z(B,L),H=D("omnichannel-agents"),J=P("context"),O=P("id"),Q=l((function(e){var t=r(S,2),n=t[0],a=t[1];_(n!==e?[e,"asc"]:[e,"asc"===a?"desc":"asc"])})),V=l((function(e){return function(){return H.push({context:"info",id:e})}})),j=h("livechat/users/agent",U)||{},q=j.data,G=j.reload,W=s((function(){return[u.createElement(k,{key:"name",direction:S[1],active:"name"===S[0],onClick:Q,sort:"name",w:"x200"},e("Name")),M&&u.createElement(k,{key:"username",direction:S[1],active:"username"===S[0],onClick:Q,sort:"username",w:"x140"},e("Username")),u.createElement(k,{key:"email",direction:S[1],active:"emails.adress"===S[0],onClick:Q,sort:"emails.address",w:"x120"},e("Email")),u.createElement(k,{key:"status",direction:S[1],active:"status"===S[0],onClick:Q,sort:"status",w:"x120"},e("Livechat_status")),u.createElement(k,{key:"remove",w:"x40"},e("Remove"))].filter(Boolean)}),[S,Q,e,M]),F=f((function(t){var n=t.emails,a=t._id,r=t.username,c=t.name,i=t.avatarETag,o=t.statusLivechat;return(u.createElement(x.Row,{key:a,tabIndex:0,role:"link",onClick:V(a),action:!0,"qa-user-id":a},u.createElement(x.Cell,{withTruncatedText:!0},u.createElement(d,{display:"flex",alignItems:"center"},u.createElement(A,{size:M?"x28":"x40",title:r,username:r,etag:i}),u.createElement(d,{display:"flex",withTruncatedText:!0,mi:"x8"},u.createElement(d,{display:"flex",flexDirection:"column",alignSelf:"center",withTruncatedText:!0},u.createElement(d,{fontScale:"p2",withTruncatedText:!0,color:"default"},c||r),!M&&c&&u.createElement(d,{fontScale:"p1",color:"hint",withTruncatedText:!0}," ","@"+r," "))))),M&&u.createElement(x.Cell,null,u.createElement(d,{fontScale:"p2",withTruncatedText:!0,color:"hint"},r)," ",u.createElement(d,{mi:"x4"})),u.createElement(x.Cell,{withTruncatedText:!0},n&&n.length&&n[0].address),u.createElement(x.Cell,{withTruncatedText:!0},e("available"===o?"Available":"Not_Available")),u.createElement(I,{_id:a,reload:G})))}),[M,G,V,e]),K=f((function(){if(!J)return"";var t=function(){H.push({})};return(u.createElement(R,{className:"contextual-bar"},u.createElement(R.Header,null,"edit"===J&&e("Edit_User"),"info"===J&&e("User_Info"),u.createElement(R.Close,{onClick:t})),"edit"===J&&u.createElement(b,{uid:O,reload:G}),"info"===J&&u.createElement(y,{uid:O},u.createElement(N,{id:O,reload:G}))))}),[e,J,O,H,G]);return t?u.createElement(C,{setParams:E,params:c,onHeaderClick:Q,data:q,useQuery:z,reload:G,header:W,renderRow:F,title:"Agents"},u.createElement(K,null)):u.createElement(w,null)}n.exportDefault(L)}

