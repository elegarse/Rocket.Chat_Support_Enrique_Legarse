function module(e,t,n){var i,l,a,o,u,c,s,r,d,f,m,p,h,k,b,E,v,x,C,g,F,S,y,T,D,_;n.link("@babel/runtime/regenerator",{default:function(e){i=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},2),n.link("react",{default:function(e){o=e},useCallback:function(e){u=e},useState:function(e){c=e}},0),n.link("@rocket.chat/fuselage",{Box:function(e){s=e},Button:function(e){r=e},Icon:function(e){d=e},ButtonGroup:function(e){f=e},Callout:function(e){m=e},FieldGroup:function(e){p=e}},1),n.link("use-subscription",{useSubscription:function(e){h=e}},2),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){k=e}},3),n.link("./CustomFieldsForm",{default:function(e){b=e}},4),n.link("../../components/basic/Page",{default:function(e){E=e}},5),n.link("../../components/PageSkeleton",{default:function(e){v=e}},6),n.link("../../contexts/TranslationContext",{useTranslation:function(e){x=e}},7),n.link("../../contexts/RouterContext",{useRouteParameter:function(e){C=e},useRoute:function(e){g=e}},8),n.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){F=e}},9),n.link("../../contexts/ServerContext",{useMethod:function(e){S=e}},10),n.link("../additionalForms",{formsSubscription:function(e){y=e}},11),n.link("../../hooks/useForm",{useForm:function(e){T=e}},12),n.link("../../hooks/useEndpointDataExperimental",{useEndpointDataExperimental:function(e){D=e},ENDPOINT_STATES:function(e){_=e}},13);var w=function(e){return{field:e._id,label:e.label,scope:e.scope,visibility:"visible"===e.visibility,regexp:e.regexp}},P=function(){var e=x(),t=C("id"),n=D("livechat/custom-fields/"+t),i=n.data,l=n.state,a=n.error;return l===_.LOADING?o.createElement(v,null):i&&i.success&&i.customField&&!a?o.createElement(A,{customField:i.customField,id:t}):o.createElement(E,null,o.createElement(E.Header,{title:e("Edit_Custom_Field")}),o.createElement(E.ScrollableContentWithShadow,null,o.createElement(m,{type:"danger"},e("Error"))))},A=function(e){var t=e.customField,n=e.id,m=x(),v=F(),C=c({}),D=a(C,2),_=D[0],P=D[1],A,B=h(y).useCustomFieldsAdditionalForm,M,G=(void 0===B?function(){}:B)(),I=g("omnichannel-customfields"),N=u((function(){I.push({})}),[I]),R=T(w(t)),W=R.values,H=R.handlers,O=R.hasUnsavedChanges,U=S("livechat:saveCustomField"),j=_.hasError,z=_.data,L=_.hasUnsavedChanges,q=!j&&(L||O),J=k(function(){function e(){return i.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.awrap(U(n,l({},z,{},W,{visibility:W.visibility?"visible":"hidden"})));case 3:v({type:"success",message:m("Saved")}),I.push({}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v({type:"error",message:e.t0});case 10:case"end":return e.stop()}}return e}(),null,null,[[0,7]],Promise)}return e}()),K=k((function(e){P(l({},_,{},e))}));return o.createElement(E,null,o.createElement(E.Header,{title:m("Edit_Custom_Field")},o.createElement(f,{align:"end"},o.createElement(r,{onClick:N},o.createElement(d,{size:"x16",name:"back"}),m("Back")),o.createElement(r,{primary:!0,onClick:J,disabled:!q},m("Save")))),o.createElement(E.ScrollableContentWithShadow,null,o.createElement(s,{maxWidth:"x600",w:"full",alignSelf:"center"},o.createElement(p,null,o.createElement(b,{values:W,handlers:H}),G&&o.createElement(G,{onChange:K,state:W,data:t})))))};n.exportDefault(P)}

