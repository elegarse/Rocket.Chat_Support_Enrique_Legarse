function module(e,t,n){"use strict";var r=e("react");function o(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function a(e){var t=e.lastRenderedStartIndex,n=e.lastRenderedStopIndex,r=e.startIndex,o=e.stopIndex;return!(r>n||o<t)}function i(e){for(var t=e.isItemLoaded,n=e.itemCount,r=e.minimumBatchSize,o=e.startIndex,a=e.stopIndex,i=[],d=null,s=null,l=o;l<=a;l++){var u;t(l)?null!==s&&(i.push([d,s]),d=s=null):(s=l,null===d&&(d=l))}if(null!==s){for(var f=Math.min(Math.max(s,d+r-1),n-1),c=s+1;c<=f&&!t(c);c++)s=c;i.push([d,s])}if(i.length)for(var h=i[0];h[1]-h[0]+1<r&&h[0]>0;){var p=h[0]-1;if(t(p))break;h[0]=p}return i}var d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},f=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i=e[Symbol.iterator](),d;!(r=(d=i.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(s){o=!0,a=s}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(e){function t(){var e,n,r,o;d(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r._lastRenderedStartIndex=-1,r._lastRenderedStopIndex=-1,r._memoizedUnloadedRanges=[],r._onItemsRendered=function(e){var t=e.visibleStartIndex,n=e.visibleStopIndex;r._lastRenderedStartIndex=t,r._lastRenderedStopIndex=n,r._ensureRowsLoaded(t,n)},r._setRef=function(e){r._listRef=e},u(r,o=n)}return l(t,e),s(t,[{key:"resetloadMoreItemsCache",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._memoizedUnloadedRanges=[],t&&this._ensureRowsLoaded(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"componentDidMount",value:function e(){0}},{key:"render",value:function e(){var t;return(0,this.props.children)({onItemsRendered:this._onItemsRendered,ref:this._setRef})}},{key:"_ensureRowsLoaded",value:function e(t,n){var r=this.props,o=r.isItemLoaded,a=r.itemCount,d=r.minimumBatchSize,s=void 0===d?10:d,l=r.threshold,u=void 0===l?15:l,c=i({isItemLoaded:o,itemCount:a,minimumBatchSize:s,startIndex:Math.max(0,t-u),stopIndex:Math.min(a-1,n+u)});(this._memoizedUnloadedRanges.length!==c.length||this._memoizedUnloadedRanges.some((function(e,t){var n=f(e,2),r=n[0],o=n[1];return c[t][0]!==r||c[t][1]!==o})))&&(this._memoizedUnloadedRanges=c,this._loadUnloadedRanges(c))}},{key:"_loadUnloadedRanges",value:function e(t){var n=this,r=this.props.loadMoreItems||this.props.loadMoreRows;t.forEach((function(e){var t=f(e,2),o=t[0],i=t[1],d=r(o,i);null!=d&&d.then((function(){if(a({lastRenderedStartIndex:n._lastRenderedStartIndex,lastRenderedStopIndex:n._lastRenderedStopIndex,startIndex:o,stopIndex:i})){if(null==n._listRef)return;"function"==typeof n._listRef.resetAfterIndex?n._listRef.resetAfterIndex(o,!0):("function"==typeof n._listRef._getItemStyleCache&&n._listRef._getItemStyleCache(-1),n._listRef.forceUpdate())}}))}))}}]),t}(r.PureComponent);n.exports=c}

