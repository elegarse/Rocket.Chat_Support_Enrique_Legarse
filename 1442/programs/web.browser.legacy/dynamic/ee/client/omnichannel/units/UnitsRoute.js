function module(e,t,n){var i,a,r,c,o,l,u,s,f,m,d,k,x,v,h,p,E,b,C,g,y,w,T,P,U,D,M;function R(e){var t=e._id,n=e.reload,i=p("livechat:removeUnit"),a=g("omnichannel-units"),c=D(),u=M(),s=v(),f=o(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.awrap(i(t));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.push({}),n();case 10:case"end":return e.stop()}}return e}(),null,null,[[0,5]],Promise)}return e}()),x=o((function(e){e.stopPropagation();var t=function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.awrap(f());case 3:u({type:"success",message:s("Unit_removed")}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),u({type:"error",message:e.t0});case 9:c();case 10:case"end":return e.stop()}}return e}(),null,null,[[0,6]],Promise)}return e}();c(l.createElement(U,{onDelete:t,onCancel:function(){return c()}}))}));return l.createElement(m.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},l.createElement(k,{small:!0,ghost:!0,title:s("Remove"),onClick:x},l.createElement(d,{name:"trash",size:"x16"})))}n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){i=e}},0),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},1),n.link("@babel/runtime/regenerator",{default:function(e){r=e}},2),n.export({RemoveUnitButton:function(){return R}}),n.link("@rocket.chat/fuselage-hooks",{useDebouncedValue:function(e){c=e},useMutableCallback:function(e){o=e}},0),n.link("react",{default:function(e){l=e},useMemo:function(e){u=e},useCallback:function(e){s=e},useState:function(e){f=e}},1),n.link("@rocket.chat/fuselage",{Table:function(e){m=e},Icon:function(e){d=e},Button:function(e){k=e}},2),n.link("../../../../client/components/GenericTable",{Th:function(e){x=e}},3),n.link("../../../../client/contexts/TranslationContext",{useTranslation:function(e){v=e}},4),n.link("../../../../client/hooks/useEndpointDataExperimental",{useEndpointDataExperimental:function(e){h=e}},5),n.link("../../../../client/contexts/ServerContext",{useMethod:function(e){p=e}},6),n.link("../../../../client/contexts/AuthorizationContext",{usePermission:function(e){E=e}},7),n.link("../../../../client/components/NotAuthorizedPage",{default:function(e){b=e}},8),n.link("../../../../client/contexts/RouterContext",{useRouteParameter:function(e){C=e},useRoute:function(e){g=e}},9),n.link("../../../../client/components/basic/VerticalBar",{default:function(e){y=e}},10),n.link("./UnitsPage",{default:function(e){w=e}},11),n.link("./EditUnit",{UnitEditWithData:function(e){T=e},UnitNew:function(e){P=e}},12),n.link("../../../../client/omnichannel/DeleteWarningModal",{default:function(e){U=e}},13),n.link("../../../../client/contexts/ModalContext",{useSetModal:function(e){D=e}},14),n.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){M=e}},15);var N=function(e){return"asc"===e?1:-1},S=function(e,t){var n=e.text,r=e.itemsPerPage,c=e.current,o=a(t,2),l=o[0],s=o[1];return u((function(){var e;return i({fields:JSON.stringify({name:1}),text:n,sort:JSON.stringify((e={},e[l]=N(s),e.usernames="name"===l?N(s):void 0,e))},r&&{count:r},{},c&&{offset:c})}),[n,r,c,l,s])};function _(){var e=v(),t=E("manage-livechat-units"),n=f({text:"",current:0,itemsPerPage:25}),i=a(n,2),r=i[0],d=i[1],k=f(["name","asc"]),p=a(k,2),U=p[0],D=p[1],M=c(r,500),N=c(U,500),_=S(M,N),B=g("omnichannel-units"),z=C("context"),A=C("id"),I=o((function(e){var t=a(U,2),n=t[0],i=t[1];D(n!==e?[e,"asc"]:[e,"asc"===i?"desc":"asc"])})),V=o((function(e){return function(){return B.push({context:"edit",id:e})}})),H=h("livechat/units.list",_)||{},J=H.data,O=H.reload,W=u((function(){return[l.createElement(x,{key:"name",direction:U[1],active:"name"===U[0],onClick:I,sort:"name",w:"x120"},e("Name")),l.createElement(x,{key:"visibility",direction:U[1],active:"visibility"===U[0],onClick:I,sort:"visibility",w:"x200"},e("Visibility")),l.createElement(x,{key:"remove",w:"x40"},e("Remove"))].filter(Boolean)}),[U,I,e]),j=s((function(e){var t=e._id,n=e.name,i=e.visibility;return(l.createElement(m.Row,{key:t,tabIndex:0,role:"link",onClick:V(t),action:!0,"qa-user-id":t},l.createElement(m.Cell,{withTruncatedText:!0},n),l.createElement(m.Cell,{withTruncatedText:!0},i),l.createElement(R,{_id:t,reload:O})))}),[O,V]),q=s((function(){if(!z)return"";var t=function(){B.push({})};return(l.createElement(y,{className:"contextual-bar"},l.createElement(y.Header,null,"edit"===z&&e("Edit_Unit"),"new"===z&&e("New_Unit"),l.createElement(y.Close,{onClick:t})),"edit"===z&&l.createElement(T,{unitId:A,reload:O}),"new"===z&&l.createElement(P,{reload:O})))}),[e,z,A,B,O]);return t?l.createElement(w,{setParams:d,params:r,onHeaderClick:I,data:J,useQuery:S,reload:O,header:W,renderRow:j,title:"Units"},l.createElement(q,null)):l.createElement(b,null)}n.exportDefault(_)}

