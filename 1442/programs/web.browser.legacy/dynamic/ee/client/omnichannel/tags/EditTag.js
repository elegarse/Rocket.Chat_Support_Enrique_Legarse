function module(e,t,n){var a,r,l,i,o,c,u,s,d,m,f,p,h,E,v,g,x,b,k,w,_,D;function T(e){var t=e.tagId,n=e.reload,a=o((function(){return{tagId:t}}),[t]),r=b("livechat/tags.getOne",a),l=r.data,c=r.state,u=r.error,s=b("livechat/department"),d=s.data,m=s.state,f=s.error,h=g();return[c,m].includes(k.LOADING)?i.createElement(w,null):u||f?i.createElement(p,{m:"x16",type:"danger"},h("Not_Available")):i.createElement(N,{tagId:t,data:l,availableDepartments:d,reload:n})}function C(e){var t=e.reload,n=g(),a=b("livechat/department"),r=a.data,l=a.state,o=a.error;return l===k.LOADING?i.createElement(w,null):o?i.createElement(m,{mbs:"x16"},n("Not_found")):i.createElement(N,{reload:t,isNew:!0,availableDepartments:r})}function N(e){var t=e.data,n=e.tagId,p=e.isNew,b=e.availableDepartments,k=e.reload,w=l(e,["data","tagId","isNew","availableDepartments","reload"]),T=g(),C=D("omnichannel-tags"),N=t||{},I=o((function(){return b&&b.departments?b.departments.map((function(e){var t=e._id,n;return[t,e.name||t]})):[]}),[b]),S=_({name:N.name,description:N.description,departments:N.departments}),y=S.values,G=S.handlers,M=S.hasUnsavedChanges,R=G.handleName,L=G.handleDescription,q=G.handleDepartments,A=y.name,F=y.description,O=y.departments,B=o((function(){return A&&0!==A.length?void 0:T("The_field_is_required","name")}),[A,T]),P=o((function(){return F&&0!==F.length?void 0:T("The_field_is_required","description")}),[F,T]),W=o((function(){return O&&0!==O.length?void 0:T("The_field_is_required","departments")}),[O,T]),j=E("livechat:saveTag"),U=v(),V=h((function(){k()})),z=o((function(){return!B&&!P&&!W}),[B,P,W]),H=h(function(){function e(){var e;return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:if(e={name:A,description:F},z){t.next=3;break}return t.abrupt("return",U({type:"error",message:T("The_field_is_required")}));case 3:return t.prev=3,t.next=6,r.awrap(j(n,e,O));case 6:U({type:"success",message:T("saved")}),k(),C.push({}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),U({type:"error",message:t.t0});case 14:case"end":return t.stop()}}return t}(),null,null,[[3,11]],Promise)}return e}());return i.createElement(x.ScrollableContent,a({is:"form"},w),i.createElement(c,null,i.createElement(c.Label,null,T("Name")),i.createElement(c.Row,null,i.createElement(u,{flexGrow:1,value:A,onChange:R,error:M&&B}))),i.createElement(c,null,i.createElement(c.Label,null,T("Description")),i.createElement(c.Row,null,i.createElement(u,{flexGrow:1,value:F,onChange:L,error:M&&P}))),i.createElement(c,null,i.createElement(c.Label,null,T("Departments")),i.createElement(c.Row,null,i.createElement(f,{options:I,value:O,error:M&&W,maxWidth:"100%",placeholder:T("Select_an_option"),onChange:q,flexGrow:1}))),i.createElement(c.Row,null,i.createElement(m,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},i.createElement(d,{inlineEnd:"x4"},!p&&i.createElement(s,{flexGrow:1,type:"reset",disabled:!M,onClick:V},T("Reset")),i.createElement(s,{mie:"none",flexGrow:1,disabled:!M&&!z,onClick:H},T("Save"))))))}n.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},0),n.link("@babel/runtime/regenerator",{default:function(e){r=e}},1),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){l=e}},2),n.export({TagEditWithData:function(){return T},TagNew:function(){return C},TagEdit:function(){return N}}),n.link("react",{default:function(e){i=e},useMemo:function(e){o=e}},0),n.link("@rocket.chat/fuselage",{Field:function(e){c=e},TextInput:function(e){u=e},Button:function(e){s=e},Margins:function(e){d=e},Box:function(e){m=e},MultiSelect:function(e){f=e},Callout:function(e){p=e}},1),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){h=e}},2),n.link("../../../../client/contexts/ServerContext",{useMethod:function(e){E=e}},3),n.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){v=e}},4),n.link("../../../../client/contexts/TranslationContext",{useTranslation:function(e){g=e}},5),n.link("../../../../client/components/basic/VerticalBar",{default:function(e){x=e}},6),n.link("../../../../client/hooks/useEndpointDataExperimental",{useEndpointDataExperimental:function(e){b=e},ENDPOINT_STATES:function(e){k=e}},7),n.link("./Skeleton",{FormSkeleton:function(e){w=e}},8),n.link("../../../../client/hooks/useForm",{useForm:function(e){_=e}},9),n.link("../../../../client/contexts/RouterContext",{useRoute:function(e){D=e}},10)}

