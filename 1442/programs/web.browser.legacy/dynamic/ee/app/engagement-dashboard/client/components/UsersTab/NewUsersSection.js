function module(e,t,n){var a,i,o,r,s,l,c,u,d,f,m,p,y,h,g,b,v;n.link("@babel/runtime/helpers/createForOfIteratorHelperLoose",{default:function(e){a=e}},0),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){i=e}},1),n.export({NewUsersSection:function(){return S}}),n.link("@nivo/bar",{ResponsiveBar:function(e){o=e}},0),n.link("@rocket.chat/fuselage",{Box:function(e){r=e},Flex:function(e){s=e},Select:function(e){l=e},Skeleton:function(e){c=e}},1),n.link("moment",{default:function(e){u=e}},2),n.link("react",{default:function(e){d=e},useMemo:function(e){f=e},useState:function(e){m=e}},3),n.link("../../../../../../client/contexts/TranslationContext",{useTranslation:function(e){p=e}},4),n.link("../../../../../../client/hooks/useEndpointData",{useEndpointData:function(e){y=e}},5),n.link("../../../../../../client/components/data/CounterSet",{default:function(e){h=e}},6),n.link("../Section",{Section:function(e){g=e}},7),n.link("../../../../../../client/components/basic/Buttons/ActionButton",{ActionButton:function(e){b=e}},8),n.link("../../../../../../client/lib/saveFile",{saveFile:function(e){v=e}},9);var x=function(e){return"// date, newUsers\n"+e.map((function(e){var t,n;return e.date+", "+e.newUsers})).join("\n")};function S(){var e=p(),t=f((function(){return[["last 7 days",e("Last_7_days")],["last 30 days",e("Last_30_days")],["last 90 days",e("Last_90_days")]]}),[e]),n=m("last 7 days"),S=i(n,2),k=S[0],E=S[1],w=f((function(){switch(k){case"last 7 days":return{start:u().set({hour:0,minute:0,second:0,millisecond:0}).subtract(7,"days"),end:u().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)};case"last 30 days":return{start:u().set({hour:0,minute:0,second:0,millisecond:0}).subtract(30,"days"),end:u().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)};case"last 90 days":return{start:u().set({hour:0,minute:0,second:0,millisecond:0}).subtract(90,"days"),end:u().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)}}}),[k]),_=function(e){return E(e)},U=f((function(){return{start:w.start.toISOString(),end:w.end.toISOString()}}),[w]),I=y("engagement-dashboard/users/new-users",U),A=f((function(){if(!I)return[];for(var e=Array.from({length:u(w.end).diff(w.start,"days")+1},(function(e,t){return{date:u(w.start).add(t,"days").toISOString(),newUsers:0}})),t=a(I.days),n;!(n=t()).done;){var i=n.value,o=i.day,r=i.users,s=u(o).diff(w.start,"days");s>=0&&(e[s].newUsers+=r)}return[I.period.count,I.period.variation,I.yesterday.count,I.yesterday.variation,e]}),[I,w]),C=i(A,5),B=C[0],F=C[1],L=C[2],O=C[3],R=C[4],D=function(){v(x(R),"NewUsersSection_start_"+U.start+"_end_"+U.end+".csv")};return d.createElement(g,{title:e("New_users"),filter:d.createElement(d.Fragment,null,d.createElement(l,{small:!0,options:t,value:k,onChange:_}),d.createElement(b,{mis:"x16",disabled:!I,onClick:D,"aria-label":e("Download_Info"),icon:"download"}))},d.createElement(h,{counters:[{count:I?B:d.createElement(c,{variant:"rect",width:"3ex",height:"1em"}),variation:I?F:0,description:t.find((function(e){var t,n;return i(e,1)[0]===k}))[1]},{count:I?L:d.createElement(c,{variant:"rect",width:"3ex",height:"1em"}),variation:I?O:0,description:e("Yesterday")}]}),d.createElement(s.Container,null,I?d.createElement(r,{style:{height:240}},d.createElement(s.Item,{align:"stretch",grow:1,shrink:0},d.createElement(r,{style:{position:"relative"}},d.createElement(r,{style:{position:"absolute",width:"100%",height:"100%"}},d.createElement(o,{data:R,indexBy:"date",keys:["newUsers"],groupMode:"grouped",padding:.25,margin:{bottom:20},colors:["#1d74f5"],enableLabel:!1,enableGridY:!1,axisTop:null,axisRight:null,axisBottom:7===R.length&&{tickSize:0,tickPadding:4,tickRotation:0,format:function(e){return u(e).format("dddd")}}||null,axisLeft:null,animate:!0,motionStiffness:90,motionDamping:15,theme:{axis:{ticks:{text:{fill:"#9EA2A8",fontFamily:'Inter, -apple-system, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Meiryo UI", Arial, sans-serif',fontSize:"10px",fontStyle:"normal",fontWeight:"600",letterSpacing:"0.2px",lineHeight:"12px"}}},tooltip:{container:{backgroundColor:"#1F2329",boxShadow:"0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)",borderRadius:2}}},tooltip:function(t){var n=t.value;return(d.createElement(r,{fontScale:"p2",color:"alternative"},e("Value_users",{value:n})))}}))))):d.createElement(c,{variant:"rect",height:240})))}}

