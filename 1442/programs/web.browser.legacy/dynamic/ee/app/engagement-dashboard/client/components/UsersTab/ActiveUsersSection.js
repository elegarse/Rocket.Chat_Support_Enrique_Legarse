function module(e,t,n){var i,a,o,r,l,c,s,u,d,f,m,y,v,h,g,p,k;n.link("@babel/runtime/helpers/createForOfIteratorHelperLoose",{default:function(e){i=e}},0),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},1),n.export({ActiveUsersSection:function(){return b}}),n.link("@nivo/line",{ResponsiveLine:function(e){o=e}},0),n.link("@rocket.chat/fuselage",{Box:function(e){r=e},Flex:function(e){l=e},Skeleton:function(e){c=e},Tile:function(e){s=e}},1),n.link("moment",{default:function(e){u=e}},2),n.link("react",{default:function(e){d=e},useMemo:function(e){f=e}},3),n.link("../../../../../../client/contexts/TranslationContext",{useTranslation:function(e){m=e}},4),n.link("../../../../../../client/hooks/useEndpointData",{useEndpointData:function(e){y=e}},5),n.link("../../../../../../client/components/data/CounterSet",{default:function(e){v=e}},6),n.link("../data/LegendSymbol",{LegendSymbol:function(e){h=e}},7),n.link("../Section",{Section:function(e){g=e}},8),n.link("../../../../../../client/components/basic/Buttons/ActionButton",{ActionButton:function(e){p=e}},9),n.link("../../../../../../client/lib/saveFile",{saveFile:function(e){k=e}},10);var A=function(e){var t,n,i,a,o,r,l,c,s;return"// countDailyActiveUsers, diffDailyActiveUsers, countWeeklyActiveUsers, diffWeeklyActiveUsers, countMonthlyActiveUsers, diffMonthlyActiveUsers, dauValues, wauValues, mauValues\n"+e.countDailyActiveUsers+", "+e.diffDailyActiveUsers+", "+e.countWeeklyActiveUsers+", "+e.diffWeeklyActiveUsers+", "+e.countMonthlyActiveUsers+", "+e.diffMonthlyActiveUsers+", "+e.dauValues+", "+e.wauValues+", "+e.mauValues};function b(){var e=m(),t=f((function(){return{start:u().set({hour:0,minute:0,second:0,millisecond:0}).subtract(30,"days"),end:u().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)}}),[]),n=f((function(){return{start:t.start.clone().subtract(30,"days").toISOString(),end:t.end.toISOString()}}),[t]),b=y("engagement-dashboard/users/active-users",n),U=f((function(){if(!b)return[];for(var e=function(e){return{x:u(t.start).add(e,"days").toDate(),y:0}},n=function(){return Array.from({length:u(t.end).diff(t.start,"days")+1},(function(t,n){return e(n)}))},a=function(e,t,n,i,a){for(var o=0;o<n;++o){var r=t+o;r>=i.length||(r>=0&&(i[r].y+=e),-1===r&&(a.y+=e))}},o=n(),r=e(-1),l=n(),c=e(-1),s=n(),d=e(-1),f=i(b.month),m;!(m=f()).done;){var y=m.value,v=y.users,h=y.day,g=y.month,p=y.year,k=u.utc([p,g-1,h,0,0,0,0]).diff(t.start,"days");a(v,k,1,o,r),a(v,k,7,l,c),a(v,k,30,s,d)}return[o[o.length-1].y,o[o.length-1].y-r.y,l[l.length-1].y,l[l.length-1].y-c.y,s[s.length-1].y,s[s.length-1].y-d.y,o,l,s]}),[t,b]),E=a(U,9),x=E[0],S=E[1],D=E[2],F=E[3],_=E[4],w=E[5],I=E[6],M=E[7],V=E[8],C=function(){k(A({countDailyActiveUsers:x,diffDailyActiveUsers:S,countWeeklyActiveUsers:D,diffWeeklyActiveUsers:F,countMonthlyActiveUsers:_,diffMonthlyActiveUsers:w,dauValues:I,wauValues:M,mauValues:V}),"ActiveUsersSection_start_"+n.start+"_end_"+n.end+".csv")};return d.createElement(g,{title:e("Active_users"),filter:d.createElement(p,{disabled:!b,onClick:C,"aria-label":e("Download_Info"),icon:"download"})},d.createElement(v,{counters:[{count:b?x:d.createElement(c,{variant:"rect",width:"3ex",height:"1em"}),variation:b?S:0,description:d.createElement(d.Fragment,null,d.createElement(h,{color:"#D1EBFE"})," ",e("Daily_Active_Users"))},{count:b?D:d.createElement(c,{variant:"rect",width:"3ex",height:"1em"}),variation:b?F:0,description:d.createElement(d.Fragment,null,d.createElement(h,{color:"#76B7FC"})," ",e("Weekly_Active_Users"))},{count:b?_:d.createElement(c,{variant:"rect",width:"3ex",height:"1em"}),variation:b?w:0,description:d.createElement(d.Fragment,null,d.createElement(h,{color:"#1D74F5"})," ",e("Monthly_Active_Users"))}]}),d.createElement(l.Container,null,b?d.createElement(r,{style:{height:240}},d.createElement(l.Item,{align:"stretch",grow:1,shrink:0},d.createElement(r,{style:{position:"relative"}},d.createElement(r,{style:{position:"absolute",width:"100%",height:"100%"}},d.createElement(o,{data:[{id:"dau",data:I},{id:"wau",data:M},{id:"mau",data:V}],xScale:{type:"time",format:"native",precision:"day"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",stacked:!0},enableGridX:!1,enableGridY:!1,enablePoints:!1,useMesh:!0,enableArea:!0,areaOpacity:1,enableCrosshair:!0,crosshairType:"bottom",margin:{top:0,bottom:20,right:0,left:40},colors:["#D1EBFE","#76B7FC","#1D74F5"],axisLeft:{tickSize:0,tickPadding:4,tickRotation:0,tickValues:3},axisBottom:{tickSize:0,tickPadding:4,tickRotation:0,tickValues:"every 3 days",format:function(e){return u(e).format(7===I.length?"dddd":"L")}},animate:!0,motionStiffness:90,motionDamping:15,theme:{axis:{ticks:{text:{fill:"#9EA2A8",fontFamily:'Inter, -apple-system, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Meiryo UI", Arial, sans-serif',fontSize:"10px",fontStyle:"normal",fontWeight:"600",letterSpacing:"0.2px",lineHeight:"12px"}}},tooltip:{container:{backgroundColor:"#1F2329",boxShadow:"0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)",borderRadius:2}}},enableSlices:"x",sliceTooltip:function(t){var n=t.slice.points;return(d.createElement(s,{elevation:"2"},n.map((function(t){var n=t.serieId,i=t.data.y;return(d.createElement(r,{key:n,fontScale:"p2"},"dau"===n&&e("DAU_value",{value:i})||"wau"===n&&e("WAU_value",{value:i})||"mau"===n&&e("MAU_value",{value:i})))}))))}}))))):d.createElement(c,{variant:"rect",height:240})))}}

