function module(e,t,n){var l,a,o,r,i,c,s,u,m,d,f,E,g,h,b,p,y,S,_,v,k,C;n.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){l=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){a=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){o=e}},2),n.export({MessagesPerChannelSection:function(){return w}}),n.link("@nivo/pie",{ResponsivePie:function(e){r=e}},0),n.link("@rocket.chat/fuselage",{Box:function(e){i=e},Flex:function(e){c=e},Icon:function(e){s=e},Margins:function(e){u=e},Select:function(e){m=e},Skeleton:function(e){d=e},Table:function(e){f=e},Tile:function(e){E=e}},1),n.link("moment",{default:function(e){g=e}},2),n.link("react",{default:function(e){h=e},useMemo:function(e){b=e},useState:function(e){p=e}},3),n.link("../../../../../../client/contexts/TranslationContext",{useTranslation:function(e){y=e}},4),n.link("../../../../../../client/hooks/useEndpointData",{useEndpointData:function(e){S=e}},5),n.link("../data/LegendSymbol",{LegendSymbol:function(e){_=e}},6),n.link("../Section",{Section:function(e){v=e}},7),n.link("../../../../../../client/components/basic/Buttons/ActionButton",{ActionButton:function(e){k=e}},8),n.link("../../../../../../client/lib/saveFile",{saveFile:function(e){C=e}},9);var x=function(e){return"// type, messagesSent\n"+e.map((function(e){var t,n;return e.t+", "+e.messages})).join("\n")};function w(){var e=y(),t=b((function(){return[["last 7 days",e("Last_7_days")],["last 30 days",e("Last_30_days")],["last 90 days",e("Last_90_days")]]}),[e]),n=p("last 7 days"),w=o(n,2),F=w[0],I=w[1],A=b((function(){switch(F){case"last 7 days":return{start:g().set({hour:0,minute:0,second:0,millisecond:0}).subtract(7,"days"),end:g().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)};case"last 30 days":return{start:g().set({hour:0,minute:0,second:0,millisecond:0}).subtract(30,"days"),end:g().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)};case"last 90 days":return{start:g().set({hour:0,minute:0,second:0,millisecond:0}).subtract(90,"days"),end:g().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)}}}),[F]),D=function(e){return I(e)},P=b((function(){return{start:A.start.toISOString(),end:A.end.toISOString()}}),[A]),R=S("engagement-dashboard/messages/origin",P),L=S("engagement-dashboard/messages/top-five-popular-channels",P),M=b((function(){return R&&L?[R.origins.reduce((function(e,t){var n,l=t.messages,o=t.t;return a({},e,((n={})[o]=l,n))}),{}),L.channels.reduce((function(e,t,n){var a=t.t,o=t.messages,r=t.name,i=t.usernames;return[].concat(l(e),[{i:n,t:a,name:r||i.join(" Ã— "),messages:o}])}),[])]:[];var e,t}),[A,R,L]),j=o(M,2),B=j[0],T=j[1],U=function(){C(x(R.origins),"MessagesPerChannelSection_start_"+P.start+"_end_"+P.end+".csv")};return h.createElement(v,{title:e("Where_are_the_messages_being_sent?"),filter:h.createElement(h.Fragment,null,h.createElement(m,{options:t,value:F,onChange:D}),h.createElement(k,{mis:"x16",disabled:!R,onClick:U,"aria-label":e("Download_Info"),icon:"download"}))},h.createElement(c.Container,null,h.createElement(u,{inline:"neg-x12"},h.createElement(i,null,h.createElement(u,{inline:"x12"},h.createElement(c.Item,{grow:1,shrink:0,basis:"0"},h.createElement(i,null,h.createElement(c.Container,{alignItems:"center",wrap:"no-wrap"},B?h.createElement(i,null,h.createElement(c.Item,{grow:1,shrink:1},h.createElement(u,{inline:"x24"},h.createElement(i,{style:{position:"relative",height:300}},h.createElement(i,{style:{position:"absolute",width:"100%",height:"100%"}},h.createElement(r,{data:[{id:"d",label:e("Private_Chats"),value:B.d,color:"#FFD031"},{id:"c",label:e("Private_Channels"),value:B.c,color:"#2DE0A5"},{id:"p",label:e("Public_Channels"),value:B.p,color:"#1D74F5"}],innerRadius:.6,colors:["#FFD031","#2DE0A5","#1D74F5"],enableRadialLabels:!1,enableSlicesLabels:!1,animate:!0,motionStiffness:90,motionDamping:15,theme:{axis:{ticks:{text:{fill:"#9EA2A8",fontFamily:'Inter, -apple-system, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Meiryo UI", Arial, sans-serif',fontSize:10,fontStyle:"normal",fontWeight:"600",letterSpacing:"0.2px",lineHeight:"12px"}}},tooltip:{container:{backgroundColor:"#1F2329",boxShadow:"0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)",borderRadius:2}}},tooltip:function(t){var n=t.value;return(h.createElement(i,{fontScale:"p2",color:"alternative"},e("Value_messages",{value:n})))}}))))),h.createElement(c.Item,{basis:"auto"},h.createElement(u,{block:"neg-x4"},h.createElement(i,null,h.createElement(u,{block:"x4"},h.createElement(i,{color:"info",fontScale:"p1"},h.createElement(_,{color:"#FFD031"}),e("Private_Chats")),h.createElement(i,{color:"info",fontScale:"p1"},h.createElement(_,{color:"#2DE0A5"}),e("Private_Channels")),h.createElement(i,{color:"info",fontScale:"p1"},h.createElement(_,{color:"#1D74F5"}),e("Public_Channels"))))))):h.createElement(d,{variant:"rect",height:300})))),h.createElement(c.Item,{grow:1,shrink:0,basis:"0"},h.createElement(i,null,h.createElement(u,{blockEnd:"x16"},T?h.createElement(i,{fontScale:"p1"},e("Most_popular_channels_top_5")):h.createElement(d,{width:"50%"})),T&&!T.length&&h.createElement(E,{fontScale:"p1",color:"info",style:{textAlign:"center"}},e("Not_enough_data")),(!T||!!T.length)&&h.createElement(f,null,h.createElement(f.Head,null,h.createElement(f.Row,null,h.createElement(f.Cell,null,"#"),h.createElement(f.Cell,null,e("Channel")),h.createElement(f.Cell,{align:"end"},e("Number_of_messages")))),h.createElement(f.Body,null,T&&T.map((function(e){var t=e.i,n=e.t,l=e.name,a=e.messages;return(h.createElement(f.Row,{key:t},h.createElement(f.Cell,null,t+1,"."),h.createElement(f.Cell,null,h.createElement(u,{inlineEnd:"x4"},"d"===n&&h.createElement(s,{name:"at"})||"c"===n&&h.createElement(s,{name:"lock"})||"p"===n&&h.createElement(s,{name:"hashtag"})),l),h.createElement(f.Cell,{align:"end"},a)))})),!T&&Array.from({length:5},(function(e,t){return h.createElement(f.Row,{key:t},h.createElement(f.Cell,null,h.createElement(d,{width:"100%"})),h.createElement(f.Cell,null,h.createElement(d,{width:"100%"})),h.createElement(f.Cell,{align:"end"},h.createElement(d,{width:"100%"})))})))))))))))}}

