function module(t,e,n){var o,a,i,r,s,l,u,c,d,f,m,h,y,p,g,S,b;n.link("@babel/runtime/helpers/createForOfIteratorHelperLoose",{default:function(t){o=t}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(t){a=t}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(t){i=t}},2),n.export({UsersByTimeOfTheDaySection:function(){return x}}),n.link("@nivo/heatmap",{ResponsiveHeatMap:function(t){r=t}},0),n.link("@rocket.chat/fuselage",{Box:function(t){s=t},Flex:function(t){l=t},Select:function(t){u=t},Skeleton:function(t){c=t}},1),n.link("moment",{default:function(t){d=t}},2),n.link("react",{default:function(t){f=t},useMemo:function(t){m=t},useState:function(t){h=t}},3),n.link("../../../../../../client/contexts/TranslationContext",{useTranslation:function(t){y=t}},4),n.link("../../../../../../client/hooks/useEndpointData",{useEndpointData:function(t){p=t}},5),n.link("../Section",{Section:function(t){g=t}},6),n.link("../../../../../../client/components/basic/Buttons/ActionButton",{ActionButton:function(t){S=t}},7),n.link("../../../../../../client/lib/saveFile",{saveFile:function(t){b=t}},8);var k=function(t){return"// date, users\n"+t.map((function(t){var e=t.users,n=t.hour,o=t.day,a=t.month,i=t.year;return{date:d([i,a-1,o,n,0,0,0]),users:e}})).sort((function(t,e){return t>e})).map((function(t){var e=t.date,n=t.users;return e.toISOString()+", "+n})).join("\n")};function x(){var t=y(),e=m((function(){return[["last 7 days",t("Last_7_days")],["last 30 days",t("Last_30_days")],["last 90 days",t("Last_90_days")]]}),[t]),n=h("last 7 days"),x=i(n,2),v=x[0],E=x[1],_=m((function(){switch(v){case"last 7 days":return{start:d().set({hour:0,minute:0,second:0,millisecond:0}).subtract(7,"days"),end:d().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)};case"last 30 days":return{start:d().set({hour:0,minute:0,second:0,millisecond:0}).subtract(30,"days"),end:d().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)};case"last 90 days":return{start:d().set({hour:0,minute:0,second:0,millisecond:0}).subtract(90,"days"),end:d().set({hour:0,minute:0,second:0,millisecond:0}).subtract(1)}}}),[v]),F=function(t){return E(t)},I=m((function(){return{start:_.start.toISOString(),end:_.end.toISOString()}}),[_]),O=p("engagement-dashboard/users/users-by-time-of-the-day-in-a-week",I),A=m((function(){if(!O)return[];for(var t=Array.from({length:d(_.end).diff(_.start,"days")+1},(function(t,e){return d(_.start).add(e,"days")})),e=Array.from({length:24},(function(e,n){return a({hour:String(n)},t.map((function(t){var e;return(e={})[t.toISOString()]=0,e})).reduce((function(t,e){return a({},t,{},e)}),{}))})),n=o(O.week),i;!(i=n()).done;){var r=i.value,s=r.users,l=r.hour,u=r.day,c=r.month,f=r.year,m=d([f,c-1,u,0,0,0,0]).toISOString();e[l][m]+=s}return[t.map((function(t){return t.toISOString()})),e]}),[O,_.end,_.start]),B=i(A,2),D=B[0],T=B[1],w=function(){b(k(O.week),"UsersByTimeOfTheDaySection_start_"+I.start+"_end_"+I.end+".csv")};return f.createElement(g,{title:t("Users_by_time_of_day"),filter:f.createElement(f.Fragment,null,f.createElement(u,{options:e,value:v,onChange:F}),f.createElement(S,{mis:"x16",onClick:w,"aria-label":t("Download_Info"),icon:"download"}))},O?f.createElement(s,{display:"flex",style:{height:696}},f.createElement(l.Item,{align:"stretch",grow:1,shrink:0},f.createElement(s,{style:{position:"relative"}},f.createElement(s,{style:{position:"absolute",width:"100%",height:"100%"}},f.createElement(r,{data:T,indexBy:"hour",keys:D,padding:4,margin:{left:40,bottom:20},colors:["#E8F2FF","#D1EBFE","#A4D3FE","#76B7FC","#549DF9","#1D74F5","#10529E"],cellOpacity:1,enableLabels:!1,axisTop:null,axisRight:null,axisBottom:{tickSize:0,tickPadding:4,tickRotation:0,format:function(t){return 7===D.length?d(t).format("dddd"):""}},axisLeft:{tickSize:0,tickPadding:4,tickRotation:0,format:function(t){return d().set({hour:parseInt(t,10),minute:0,second:0}).format("LT")}},hoverTarget:"cell",animate:D.length<=7,motionStiffness:90,motionDamping:15,theme:{axis:{ticks:{text:{fill:"#9EA2A8",fontFamily:'Inter, -apple-system, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Meiryo UI", Arial, sans-serif',fontSize:10,fontStyle:"normal",fontWeight:"600",letterSpacing:"0.2px",lineHeight:"12px"}}},tooltip:{container:{backgroundColor:"#1F2329",boxShadow:"0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)",borderRadius:2}}},tooltip:function(e){var n=e.value;return(f.createElement(s,{fontScale:"p2",color:"alternative"},t("Value_users",{value:n})))}}))))):f.createElement(c,{variant:"rect",height:696}))}}

