function module(e,t,n){var r,l,i,o,a,u,c,f,s,d,m,p,k,x,h,b,g,w,E,v,T,C,M,y,I,R;function S(e){var t=e.mid,n=e.rid,S=e.jump,_=e.room,j=a(e,["mid","rid","jump","room"]),z=y(),A=v(T.getConfig(_.t).route.name),B=s({}),F=o(B,2),P=F[0],D=F[1],G=w("expand-threads",!1),L=o(G,2),W=L[0],H=L[1],O=f(),N=m((function(){return x.userId()}),[]),V=m((function(){return i({top:0,right:0,maxWidth:"855px"},"rtl"===document.dir?{borderTopRightRadius:"4px"}:{borderTopLeftRadius:"4px"},{overflow:"hidden",bottom:0,zIndex:100})}),[document.dir]),q=P.replies&&P.replies.includes(N),J=m((function(){return q?"unfollow":"follow"}),[q]),K=m((function(){return"follow"===J?"bell-off":"bell"}),[J]),Q=z("follow"===J?"Not_Following":"Following"),U=m((function(){return R(P)}),[P._updatedAt]),X=W?"collapse":"expand",Y=W?"arrow-collapse":"arrow-expand",Z=d((function(){H(!W)}),[W]),$=d((function(){return M("follow"===J?"followMessage":"unfollowMessage",{mid:t})}),[J,t]),ee=d((function(){A.push("d"===_.t?{rid:n}:{name:_.name})}),[A,_.t,_.name]);return c((function(){var e=g.autorun(function(){function e(){var e;return l.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=E.findOne({_id:t}),n.t0){n.next=5;break}return n.next=4,l.awrap(C.v1.get("chat.getMessage",{msgId:t}));case 4:n.t0=n.sent.message;case 5:if(e=n.t0){n.next=8;break}return n.abrupt("return");case 8:D(e);case 9:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e}());return function(){return e.stop()}}),[t]),c((function(){var e;return function(){function n(){return l.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=P.rid&&O.current,!n.t0){n.next=18;break}if(n.t1=b,n.t2=h.thread,n.t3=i,n.t4=E.findOne({_id:t}),n.t4){n.next=10;break}return n.next=9,l.awrap(C.v1.get("chat.getMessage",{msgId:t}));case 9:n.t4=n.sent.message;case 10:n.t5=n.t4,n.t6=S,n.t7=q,n.t8={mainMessage:n.t5,jump:n.t6,following:n.t7},n.t9=j,n.t10=(0,n.t3)(n.t8,n.t9),n.t11=O.current,n.t0=n.t1.renderWithData.call(n.t1,n.t2,n.t10,n.t11);case 18:e=n.t0;case 19:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return n}()(),function(){return e&&b.remove(e)}}),[P.rid,t]),P.rid?u.createElement(u.Fragment,null,W&&u.createElement(p.Backdrop,{onClick:ee}),u.createElement(k,r({width:"380px",flexGrow:1},!W&&{position:"relative"}),u.createElement(I,r({"rcx-thread-view":!0,width:"full",style:V,display:"flex",flexDirection:"column",position:"absolute"},!W&&{width:"380px"}),u.createElement(I.Header,null,u.createElement(I.Icon,{name:"thread"}),u.createElement(I.Text,{dangerouslySetInnerHTML:{__html:U}}),u.createElement(I.Action,{"aria-label":X,onClick:Z,name:Y}),u.createElement(I.Action,{"aria-label":Q,onClick:$,name:K}),u.createElement(I.Close,{onClick:ee})),u.createElement(I.Content,{paddingInline:0,flexShrink:1,flexGrow:1,ref:O})))):u.createElement(u.Fragment,null,W&&u.createElement(p.Backdrop,{onClick:ee}),u.createElement(k,r({width:"380px",flexGrow:1},!W&&{position:"relative"}),u.createElement(I.Skeleton,r({"rcx-thread-view":!0,width:"full",style:V,display:"flex",flexDirection:"column",position:"absolute"},!W&&{width:"380px"}))))}n.link("@babel/runtime/helpers/extends",{default:function(e){r=e}},0),n.link("@babel/runtime/regenerator",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){i=e}},2),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){o=e}},3),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){a=e}},4),n.export({default:function(){return S}}),n.link("react",{default:function(e){u=e},useEffect:function(e){c=e},useRef:function(e){f=e},useState:function(e){s=e},useCallback:function(e){d=e},useMemo:function(e){m=e}},0),n.link("@rocket.chat/fuselage",{Modal:function(e){p=e},Box:function(e){k=e}},1),n.link("meteor/meteor",{Meteor:function(e){x=e}},2),n.link("meteor/templating",{Template:function(e){h=e}},3),n.link("meteor/blaze",{Blaze:function(e){b=e}},4),n.link("meteor/tracker",{Tracker:function(e){g=e}},5),n.link("@rocket.chat/fuselage-hooks",{useLocalStorage:function(e){w=e}},6),n.link("../../../models/client",{ChatMessage:function(e){E=e}},7),n.link("../../../../client/contexts/RouterContext",{useRoute:function(e){v=e}},8),n.link("../../../utils/client",{roomTypes:function(e){T=e},APIClient:function(e){C=e}},9),n.link("../../../ui-utils/client",{call:function(e){M=e}},10),n.link("../../../../client/contexts/TranslationContext",{useTranslation:function(e){y=e}},11),n.link("../../../../client/components/basic/VerticalBar",{default:function(e){I=e}},12),n.link("../lib/normalizeThreadTitle",{normalizeThreadTitle:function(e){R=e}},13)}

