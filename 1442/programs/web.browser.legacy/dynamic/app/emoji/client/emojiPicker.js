function module(e,t,r){var o,n,i,a,c,s,l,u,p;r.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){o=e}},0),r.export({updateRecentEmoji:function(){return j}}),r.link("underscore",{default:function(e){n=e}},0),r.link("meteor/reactive-var",{ReactiveVar:function(e){i=e}},1),r.link("meteor/reactive-dict",{ReactiveDict:function(e){a=e}},2),r.link("meteor/kadira:flow-router",{FlowRouter:function(e){c=e}},3),r.link("meteor/templating",{Template:function(e){s=e}},4),r.link("../../utils/client",{t:function(e){l=e}},5),r.link("./lib/EmojiPicker",{EmojiPicker:function(e){u=e}},6),r.link("../lib/rocketchat",{emoji:function(e){p=e}},7),r.link("./emojiPicker.html"),r.link("../../theme/client/imports/components/emojiPicker.css");var g=27,m=new a("emojiList"),f=function(e,t){return t&&'<li class="emoji-'+e+' emoji-picker-item" data-emoji="'+e+'" title="'+e+'">'+t+"</li>"},k=function(e,t){var r;return Object.values(p.packages).map((function(r){if(r.emojisByCategory&&r.emojisByCategory[e])return r.emojisByCategory[e].map((function(e){var o=t>0&&r.toneList.hasOwnProperty(e)?"_tone"+t:"";return f(e,r.renderPicker(":"+e+o+":"))})).join("")})).join("")||"<li>"+l("No_emojis_found")+"</li>"};function j(e){m.set(e,k(e))}var v=function(e){var t=e.categoriesList,r=e.tone;t.forEach((function(e){return m.set(e.key,k(e.key,r))}))};function y(e){var t='<ul class="emoji-list">',r,o=s.instance().tone;u.currentCategory.set("");var n=new RegExp(RegExp.escape(e.replace(/:/g,"")),"i");for(var i in meteorBabelHelpers.sanitizeForInObject(p.list))if(p.list.hasOwnProperty(i)&&n.test(i)){var a=p.list[i],c=a.emojiPackage,l=a.shortnames,g=void 0===l?[]:l,m="";i=i.replace(/:/g,"");var k=void 0!==g[0]?g[0].replace(/:/g,""):g[0];o>0&&p.packages[c].toneList.hasOwnProperty(p)&&(m="_tone"+o);var j=!1;for(var v in meteorBabelHelpers.sanitizeForInObject(p.packages[c].emojisByCategory))if(p.packages[c].emojisByCategory.hasOwnProperty(v)){var y=p.packages[c].emojisByCategory[v],h=void 0!==k?k.replace(/:/g,"").split("_"):k;if(-1!==y.indexOf(i)||void 0!==h&&h.includes(e)){j=!0;break}}if(j){var C=p.packages[c].renderPicker(":"+i+m+":");t+=f(i,C)}}return t+="</ul>"}s.emojiPicker.helpers({emojiCategories:function(){return s.instance().categoriesList},emojiByCategory:function(e){var t=[];for(var r in meteorBabelHelpers.sanitizeForInObject(p.packages))p.packages.hasOwnProperty(r)&&p.packages[r].emojisByCategory.hasOwnProperty(e)&&(t=t.concat(p.packages[r].emojisByCategory[e]));return t},searching:function(){return s.instance().currentSearchTerm.get().length>0},searchResults:function(){return y(s.instance().currentSearchTerm.get())},emojiList:function(e){return m.get(e)},currentTone:function(){return"tone-"+s.instance().tone},activeCategory:function(e){return u.currentCategory.get()===e?"active":""},currentCategory:function(){return u.currentCategory.get()}}),s.emojiPicker.events({"click .emoji-picker":function(e){e.stopPropagation(),e.preventDefault()},"click .add-custom":function(e){e.stopPropagation(),e.preventDefault(),c.go("/admin/emoji-custom"),u.close()},"click .category-link":function(e){return e.stopPropagation(),e.preventDefault(),u.showCategory(e.currentTarget.hash.substr(1)),!1},"scroll .emojis":n.throttle((function(e,t){if(!u.scrollingToCategory){var r,o=t.$(e.currentTarget).scrollTop()+8,n=u.getCategoryPositions().filter((function(e){return e.top<=o})).pop();if(n){var i,a=n.el.id.replace("emoji-list-category-","");u.currentCategory.set(a)}}}),300),"click .change-tone > a":function(e,t){e.stopPropagation(),e.preventDefault(),t.$(".tone-selector").toggleClass("show")},"click .tone-selector .tone":function(e,t){e.stopPropagation(),e.preventDefault();var r=parseInt(e.currentTarget.dataset.tone),o;for(var n in o=r>0?"_tone"+r:"",meteorBabelHelpers.sanitizeForInObject(p.packages))if(p.packages.hasOwnProperty(n)&&p.packages[n].hasOwnProperty("toneList"))for(var i in meteorBabelHelpers.sanitizeForInObject(p.packages[n].toneList))p.packages[n].toneList.hasOwnProperty(i)&&$(".emoji-"+i).html(p.packages[n].render(":"+i+o+":"));u.setTone(r),t.setCurrentTone(r),$(".tone-selector").toggleClass("show")},"click .emoji-list .emoji-picker-item":function(e,t){e.stopPropagation();var r=e.currentTarget.dataset.emoji,o=t.tone,n="";for(var i in meteorBabelHelpers.sanitizeForInObject(p.packages))p.packages.hasOwnProperty(i)&&o>0&&p.packages[i].toneList.hasOwnProperty(r)&&(n="_tone"+o);var a=$(".emoji-picker .js-emojipicker-search");a&&a.val(""),t.currentSearchTerm.set(""),u.pickEmoji(r+n)},"keyup .js-emojipicker-search, change .js-emojipicker-search":function(e,t){if(e.preventDefault(),e.stopPropagation(),27===e.keyCode)return u.close();var r=e.target.value.trim(),o=t.currentSearchTerm;r!==o.get()&&o.set(r)}}),s.emojiPicker.onCreated((function(){var e=this;this.tone=u.getTone();var t=u.getRecent();for(var r in this.currentSearchTerm=new i(""),this.categoriesList=[],meteorBabelHelpers.sanitizeForInObject(p.packages)){var n;if(p.packages.hasOwnProperty(r))if(p.packages[r].emojiCategories)if(void 0!==p.packages[r].categoryIndex)(n=this.categoriesList).splice.apply(n,[p.packages[r].categoryIndex,0].concat(o(p.packages[r].emojiCategories)));else this.categoriesList=this.categoriesList.concat(p.packages[r].emojiCategories)}t.forEach((function(e){p.packages.base.emojisByCategory.recent.push(e)})),this.setCurrentTone=function(t){$(".current-tone").removeClass("tone-"+e.tone),$(".current-tone").addClass("tone-"+t),e.tone=t},v(this)}))}

